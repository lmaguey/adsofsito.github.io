var mC=Object.defineProperty,yC=Object.defineProperties;var vC=Object.getOwnPropertyDescriptors;var Jy=Object.getOwnPropertySymbols;var _C=Object.prototype.hasOwnProperty,IC=Object.prototype.propertyIsEnumerable;var Xy=(n,e,t)=>e in n?mC(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,F=(n,e)=>{for(var t in e||={})_C.call(e,t)&&Xy(n,t,e[t]);if(Jy)for(var t of Jy(e))IC.call(e,t)&&Xy(n,t,e[t]);return n},De=(n,e)=>yC(n,vC(e));var C=(n,e,t)=>new Promise((r,i)=>{var s=u=>{try{c(t.next(u))}catch(d){i(d)}},o=u=>{try{c(t.throw(u))}catch(d){i(d)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);c((t=t.apply(n,e)).next())});var Xl=null;var Jl=1,ev=Symbol("SIGNAL");function ge(n){let e=Xl;return Xl=n,e}function tv(){return Xl}var ed={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function wC(n){if(!(sd(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Jl)){if(!n.producerMustRecompute(n)&&!nd(n)){n.dirty=!1,n.lastCleanEpoch=Jl;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Jl}}function td(n){return n&&(n.nextProducerIndex=0),ge(n)}function nv(n,e){if(ge(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(sd(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)id(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function nd(n){od(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(wC(t),r!==t.version))return!0}return!1}function rd(n){if(od(n),sd(n))for(let e=0;e<n.producerNode.length;e++)id(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function id(n,e){if(EC(n),n.liveConsumerNode.length===1&&DC(n))for(let r=0;r<n.producerNode.length;r++)id(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];od(i),i.producerIndexOfThis[r]=e}}function sd(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function od(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function EC(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function DC(n){return n.producerNode!==void 0}function TC(){throw new Error}var bC=TC;function rv(n){bC=n}function W(n){return typeof n=="function"}function Xr(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Ca=Xr(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function hr(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ae=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(W(r))try{r()}catch(s){e=s instanceof Ca?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{iv(s)}catch(o){e=e??[],o instanceof Ca?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Ca(e)}}add(e){var t;if(e&&e!==this)if(this.closed)iv(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&hr(t,e)}remove(e){let{_finalizers:t}=this;t&&hr(t,e),e instanceof n&&e._removeParent(this)}};Ae.EMPTY=(()=>{let n=new Ae;return n.closed=!0,n})();var ad=Ae.EMPTY;function Sa(n){return n instanceof Ae||n&&"closed"in n&&W(n.remove)&&W(n.add)&&W(n.unsubscribe)}function iv(n){W(n)?n():n.unsubscribe()}var Lt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ei={setTimeout(n,e,...t){let{delegate:r}=ei;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ei;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Aa(n){ei.setTimeout(()=>{let{onUnhandledError:e}=Lt;if(e)e(n);else throw n})}function Ps(){}var sv=cd("C",void 0,void 0);function ov(n){return cd("E",void 0,n)}function av(n){return cd("N",n,void 0)}function cd(n,e,t){return{kind:n,value:e,error:t}}var fr=null;function ti(n){if(Lt.useDeprecatedSynchronousErrorHandling){let e=!fr;if(e&&(fr={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=fr;if(fr=null,t)throw r}}else n()}function cv(n){Lt.useDeprecatedSynchronousErrorHandling&&fr&&(fr.errorThrown=!0,fr.error=n)}var pr=class extends Ae{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Sa(e)&&e.add(this)):this.destination=AC}static create(e,t,r){return new ni(e,t,r)}next(e){this.isStopped?ld(av(e),this):this._next(e)}error(e){this.isStopped?ld(ov(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ld(sv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},CC=Function.prototype.bind;function ud(n,e){return CC.call(n,e)}var dd=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Ra(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Ra(r)}else Ra(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ra(t)}}},ni=class extends pr{constructor(e,t,r){super();let i;if(W(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Lt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ud(e.next,s),error:e.error&&ud(e.error,s),complete:e.complete&&ud(e.complete,s)}):i=e}this.destination=new dd(i)}};function Ra(n){Lt.useDeprecatedSynchronousErrorHandling?cv(n):Aa(n)}function SC(n){throw n}function ld(n,e){let{onStoppedNotification:t}=Lt;t&&ei.setTimeout(()=>t(n,e))}var AC={closed:!0,next:Ps,error:SC,complete:Ps};var ri=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ht(n){return n}function Na(...n){return hd(n)}function hd(n){return n.length===0?ht:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var se=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=NC(t)?t:new ni(t,r,i);return ti(()=>{let{operator:o,source:c}=this;s.add(o?o.call(s,c):c?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=uv(r),new r((i,s)=>{let o=new ni({next:c=>{try{t(c)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ri](){return this}pipe(...t){return hd(t)(this)}toPromise(t){return t=uv(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function uv(n){var e;return(e=n??Lt.Promise)!==null&&e!==void 0?e:Promise}function RC(n){return n&&W(n.next)&&W(n.error)&&W(n.complete)}function NC(n){return n&&n instanceof pr||RC(n)&&Sa(n)}function fd(n){return W(n?.lift)}function oe(n){return e=>{if(fd(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(n,e,t,r,i){return new pd(n,e,t,r,i)}var pd=class extends pr{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(c){try{t(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ii(){return oe((n,e)=>{let t=null;n._refCount++;let r=ae(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var si=class extends se{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,fd(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ae;let t=this.getSubject();e.add(this.source.subscribe(ae(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ae.EMPTY)}return e}refCount(){return ii()(this)}};var lv=Xr(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var rt=(()=>{class n extends se{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new xa(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new lv}next(t){ti(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ti(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ti(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?ad:(this.currentObservers=null,s.push(t),new Ae(()=>{this.currentObservers=null,hr(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new se;return t.source=this,t}}return n.create=(e,t)=>new xa(e,t),n})(),xa=class extends rt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:ad}};var ze=class extends rt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var gd={now(){return(gd.delegate||Date).now()},delegate:void 0};var Ma=class extends Ae{constructor(e,t){super()}schedule(e,t=0){return this}};var Os={setInterval(n,e,...t){let{delegate:r}=Os;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Os;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var oi=class extends Ma{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Os.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Os.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,hr(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ai=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ai.now=gd.now;var ci=class extends ai{constructor(e,t=ai.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var md=new ci(oi);var Pa=class extends oi{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Oa=class extends ci{};var yd=new Oa(Pa);var ft=new se(n=>n.complete());function dv(n){return n&&W(n.schedule)}function hv(n){return n[n.length-1]}function fv(n){return W(hv(n))?n.pop():void 0}function Ln(n){return dv(hv(n))?n.pop():void 0}function vd(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function gv(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function c(f){try{d(r.next(f))}catch(g){o(g)}}function u(f){try{d(r.throw(f))}catch(g){o(g)}}function d(f){f.done?s(f.value):i(f.value).then(c,u)}d((r=r.apply(n,e||[])).next())})}function pv(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function gr(n){return this instanceof gr?(this.v=n,this):new gr(n)}function mv(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(I){return function(A){return Promise.resolve(A).then(I,g)}}function c(I,A){r[I]&&(i[I]=function(x){return new Promise(function(R,L){s.push([I,x,R,L])>1||u(I,x)})},A&&(i[I]=A(i[I])))}function u(I,A){try{d(r[I](A))}catch(x){y(s[0][3],x)}}function d(I){I.value instanceof gr?Promise.resolve(I.value.v).then(f,g):y(s[0][2],I)}function f(I){u("next",I)}function g(I){u("throw",I)}function y(I,A){I(A),s.shift(),s.length&&u(s[0][0],s[0][1])}}function yv(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof pv=="function"?pv(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(c,u){o=n[s](o),i(c,u,o.done,o.value)})}}function i(s,o,c,u){Promise.resolve(u).then(function(d){s({value:d,done:c})},o)}}var ka=n=>n&&typeof n.length=="number"&&typeof n!="function";function La(n){return W(n?.then)}function Fa(n){return W(n[ri])}function Va(n){return Symbol.asyncIterator&&W(n?.[Symbol.asyncIterator])}function Ua(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function xC(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ja=xC();function Ba(n){return W(n?.[ja])}function $a(n){return mv(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield gr(t.read());if(i)return yield gr(void 0);yield yield gr(r)}}finally{t.releaseLock()}})}function Ha(n){return W(n?.getReader)}function Ue(n){if(n instanceof se)return n;if(n!=null){if(Fa(n))return MC(n);if(ka(n))return PC(n);if(La(n))return OC(n);if(Va(n))return vv(n);if(Ba(n))return kC(n);if(Ha(n))return LC(n)}throw Ua(n)}function MC(n){return new se(e=>{let t=n[ri]();if(W(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function PC(n){return new se(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function OC(n){return new se(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Aa)})}function kC(n){return new se(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function vv(n){return new se(e=>{FC(n,e).catch(t=>e.error(t))})}function LC(n){return vv($a(n))}function FC(n,e){var t,r,i,s;return gv(this,void 0,void 0,function*(){try{for(t=yv(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function ct(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Fn(n,e=0){return oe((t,r)=>{t.subscribe(ae(r,i=>ct(r,n,()=>r.next(i),e),()=>ct(r,n,()=>r.complete(),e),i=>ct(r,n,()=>r.error(i),e)))})}function Vn(n,e=0){return oe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function _v(n,e){return Ue(n).pipe(Vn(e),Fn(e))}function Iv(n,e){return Ue(n).pipe(Vn(e),Fn(e))}function wv(n,e){return new se(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Ev(n,e){return new se(t=>{let r;return ct(t,e,()=>{r=n[ja](),ct(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>W(r?.return)&&r.return()})}function qa(n,e){if(!n)throw new Error("Iterable cannot be null");return new se(t=>{ct(t,e,()=>{let r=n[Symbol.asyncIterator]();ct(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Dv(n,e){return qa($a(n),e)}function Tv(n,e){if(n!=null){if(Fa(n))return _v(n,e);if(ka(n))return wv(n,e);if(La(n))return Iv(n,e);if(Va(n))return qa(n,e);if(Ba(n))return Ev(n,e);if(Ha(n))return Dv(n,e)}throw Ua(n)}function Me(n,e){return e?Tv(n,e):Ue(n)}function Q(...n){let e=Ln(n);return Me(n,e)}function ui(n,e){let t=W(n)?n:()=>n,r=i=>i.error(t());return new se(e?i=>e.schedule(r,0,i):r)}function _d(n){return!!n&&(n instanceof se||W(n.lift)&&W(n.subscribe))}var gn=Xr(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function te(n,e){return oe((t,r)=>{let i=0;t.subscribe(ae(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:VC}=Array;function UC(n,e){return VC(e)?n(...e):n(e)}function bv(n){return te(e=>UC(n,e))}var{isArray:jC}=Array,{getPrototypeOf:BC,prototype:$C,keys:HC}=Object;function Cv(n){if(n.length===1){let e=n[0];if(jC(e))return{args:e,keys:null};if(qC(e)){let t=HC(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function qC(n){return n&&typeof n=="object"&&BC(n)===$C}function Sv(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function za(...n){let e=Ln(n),t=fv(n),{args:r,keys:i}=Cv(n);if(r.length===0)return Me([],e);let s=new se(zC(r,e,i?o=>Sv(i,o):ht));return t?s.pipe(bv(t)):s}function zC(n,e,t=ht){return r=>{Av(e,()=>{let{length:i}=n,s=new Array(i),o=i,c=i;for(let u=0;u<i;u++)Av(e,()=>{let d=Me(n[u],e),f=!1;d.subscribe(ae(r,g=>{s[u]=g,f||(f=!0,c--),c||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Av(n,e,t){n?ct(t,n,e):e()}function Rv(n,e,t,r,i,s,o,c){let u=[],d=0,f=0,g=!1,y=()=>{g&&!u.length&&!d&&e.complete()},I=x=>d<r?A(x):u.push(x),A=x=>{s&&e.next(x),d++;let R=!1;Ue(t(x,f++)).subscribe(ae(e,L=>{i?.(L),s?I(L):e.next(L)},()=>{R=!0},void 0,()=>{if(R)try{for(d--;u.length&&d<r;){let L=u.shift();o?ct(e,o,()=>A(L)):A(L)}y()}catch(L){e.error(L)}}))};return n.subscribe(ae(e,I,()=>{g=!0,y()})),()=>{c?.()}}function ke(n,e,t=1/0){return W(e)?ke((r,i)=>te((s,o)=>e(r,s,i,o))(Ue(n(r,i))),t):(typeof e=="number"&&(t=e),oe((r,i)=>Rv(r,i,n,t)))}function Id(n=1/0){return ke(ht,n)}function Nv(){return Id(1)}function li(...n){return Nv()(Me(n,Ln(n)))}function Ga(n){return new se(e=>{Ue(n()).subscribe(e)})}function Et(n,e){return oe((t,r)=>{let i=0;t.subscribe(ae(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Un(n){return oe((e,t)=>{let r=null,i=!1,s;r=e.subscribe(ae(t,void 0,void 0,o=>{s=Ue(n(o,Un(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function xv(n,e,t,r,i){return(s,o)=>{let c=t,u=e,d=0;s.subscribe(ae(o,f=>{let g=d++;u=c?n(u,f,g):(c=!0,f),r&&o.next(u)},i&&(()=>{c&&o.next(u),o.complete()})))}}function di(n,e){return W(e)?ke(n,e,1):ke(n,1)}function jn(n){return oe((e,t)=>{let r=!1;e.subscribe(ae(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function mn(n){return n<=0?()=>ft:oe((e,t)=>{let r=0;e.subscribe(ae(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function wd(n){return te(()=>n)}function Wa(n=GC){return oe((e,t)=>{let r=!1;e.subscribe(ae(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function GC(){return new gn}function ks(n){return oe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Gt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Et((i,s)=>n(i,s,r)):ht,mn(1),t?jn(e):Wa(()=>new gn))}function hi(n){return n<=0?()=>ft:oe((e,t)=>{let r=[];e.subscribe(ae(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Ed(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Et((i,s)=>n(i,s,r)):ht,hi(1),t?jn(e):Wa(()=>new gn))}function Ka(n,e){return oe(xv(n,e,arguments.length>=2,!0))}function Qa(...n){let e=Ln(n);return oe((t,r)=>{(e?li(n,t,e):li(n,t)).subscribe(r)})}function Ft(n,e){return oe((t,r)=>{let i=null,s=0,o=!1,c=()=>o&&!i&&r.complete();t.subscribe(ae(r,u=>{i?.unsubscribe();let d=0,f=s++;Ue(n(u,f)).subscribe(i=ae(r,g=>r.next(e?e(u,g,f,d++):g),()=>{i=null,c()}))},()=>{o=!0,c()}))})}function Dd(n){return oe((e,t)=>{Ue(n).subscribe(ae(t,()=>t.complete(),Ps)),!t.closed&&e.subscribe(t)})}function Le(n,e,t){let r=W(n)||e||t?{next:n,error:e,complete:t}:n;return r?oe((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let c=!0;i.subscribe(ae(s,u=>{var d;(d=r.next)===null||d===void 0||d.call(r,u),s.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var d;c=!1,(d=r.error)===null||d===void 0||d.call(r,u),s.error(u)},()=>{var u,d;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):ht}var p_="https://g.co/ng/security#xss",B=class extends Error{constructor(e,t){super(mh(e,t)),this.code=e}};function mh(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Ks(n){return{toString:n}.toString()}var Ya="__parameters__";function WC(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function g_(n,e,t){return Ks(()=>{let r=WC(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return c.annotation=o,c;function c(u,d,f){let g=u.hasOwnProperty(Ya)?u[Ya]:Object.defineProperty(u,Ya,{value:[]})[Ya];for(;g.length<=f;)g.push(null);return(g[f]=g[f]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function Ie(n){for(let e in n)if(n[e]===Ie)return e;throw Error("Could not find renamed property on target object.")}function pt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(pt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function Mv(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var KC=Ie({__forward_ref__:Ie});function m_(n){return n.__forward_ref__=m_,n.toString=function(){return pt(this())},n}function Tt(n){return y_(n)?n():n}function y_(n){return typeof n=="function"&&n.hasOwnProperty(KC)&&n.__forward_ref__===m_}function U(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function bc(n){return{providers:n.providers||[],imports:n.imports||[]}}function Cc(n){return Pv(n,__)||Pv(n,I_)}function v_(n){return Cc(n)!==null}function Pv(n,e){return n.hasOwnProperty(e)?n[e]:null}function QC(n){let e=n&&(n[__]||n[I_]);return e||null}function Ov(n){return n&&(n.hasOwnProperty(kv)||n.hasOwnProperty(YC))?n[kv]:null}var __=Ie({\u0275prov:Ie}),kv=Ie({\u0275inj:Ie}),I_=Ie({ngInjectableDef:Ie}),YC=Ie({ngInjectorDef:Ie}),z=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=U({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function w_(n){return n&&!!n.\u0275providers}var ZC=Ie({\u0275cmp:Ie}),JC=Ie({\u0275dir:Ie}),XC=Ie({\u0275pipe:Ie}),eS=Ie({\u0275mod:Ie}),rc=Ie({\u0275fac:Ie}),Vs=Ie({__NG_ELEMENT_ID__:Ie}),Lv=Ie({__NG_ENV_ID__:Ie});function Us(n){return typeof n=="string"?n:n==null?"":String(n)}function tS(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Us(n)}function nS(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new B(-200,n)}function yh(n,e){throw new B(-201,!1)}var ee=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ee||{}),Md;function E_(){return Md}function Dt(n){let e=Md;return Md=n,e}function D_(n,e,t){let r=Cc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ee.Optional)return null;if(e!==void 0)return e;yh(n,"Injector")}var rS={},js=rS,Pd="__NG_DI_FLAG__",ic="ngTempTokenPath",iS="ngTokenPath",sS=/\n/gm,oS="\u0275",Fv="__source",mi;function aS(){return mi}function Bn(n){let e=mi;return mi=n,e}function cS(n,e=ee.Default){if(mi===void 0)throw new B(-203,!1);return mi===null?D_(n,void 0,e):mi.get(n,e&ee.Optional?null:void 0,e)}function Z(n,e=ee.Default){return(E_()||cS)(Tt(n),e)}function O(n,e=ee.Default){return Z(n,Sc(e))}function Sc(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Od(n){let e=[];for(let t=0;t<n.length;t++){let r=Tt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new B(900,!1);let i,s=ee.Default;for(let o=0;o<r.length;o++){let c=r[o],u=uS(c);typeof u=="number"?u===-1?i=c.token:s|=u:i=c}e.push(Z(i,s))}else e.push(Z(r))}return e}function T_(n,e){return n[Pd]=e,n.prototype[Pd]=e,n}function uS(n){return n[Pd]}function lS(n,e,t,r){let i=n[ic];throw e[Fv]&&i.unshift(e[Fv]),n.message=dS(`
`+n.message,i,t,r),n[iS]=i,n[ic]=null,n}function dS(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==oS?n.slice(2):n;let i=pt(e);if(Array.isArray(e))i=e.map(pt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let c=e[o];s.push(o+":"+(typeof c=="string"?JSON.stringify(c):pt(c)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(sS,`
  `)}`}var Bt=T_(g_("Optional"),8);var b_=T_(g_("SkipSelf"),4);function vi(n,e){let t=n.hasOwnProperty(rc);return t?n[rc]:null}function vh(n,e){n.forEach(t=>Array.isArray(t)?vh(t,e):e(t))}function C_(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function sc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var Bs={},Wt=[],_i=new z(""),S_=new z("",-1),A_=new z(""),oc=class{get(e,t=js){if(t===js){let r=new Error(`NullInjectorError: No provider for ${pt(e)}!`);throw r.name="NullInjectorError",r}return t}},R_=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(R_||{}),Qt=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Qt||{}),qn=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(qn||{});function hS(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function kd(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],c=t[r++];n.setAttribute(e,o,c,s)}else{let s=i,o=t[++r];pS(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function fS(n){return n===3||n===4||n===6}function pS(n){return n.charCodeAt(0)===64}function _h(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Vv(n,t,i,null,e[++r]):Vv(n,t,i,null,null))}}return n}function Vv(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let c=n[s++];if(typeof c=="number"){if(c===e){o=-1;break}else if(c>e){o=s-1;break}}}for(;s<n.length;){let c=n[s];if(typeof c=="number")break;if(c===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var N_="ng-template";function gS(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&hS(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Ih(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Ih(n){return n.type===4&&n.value!==N_}function mS(n,e,t){let r=n.type===4&&!t?N_:n.value;return e===r}function yS(n,e,t){let r=4,i=n.attrs,s=i!==null?IS(i):0,o=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!o&&!Vt(r)&&!Vt(u))return!1;if(o&&Vt(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!mS(n,u,t)||u===""&&e.length===1){if(Vt(r))return!1;o=!0}}else if(r&8){if(i===null||!gS(n,i,u,t)){if(Vt(r))return!1;o=!0}}else{let d=e[++c],f=vS(u,i,Ih(n),t);if(f===-1){if(Vt(r))return!1;o=!0;continue}if(d!==""){let g;if(f>s?g="":g=i[f+1].toLowerCase(),r&2&&d!==g){if(Vt(r))return!1;o=!0}}}}return Vt(r)||o}function Vt(n){return(n&1)===0}function vS(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return wS(e,n)}function _S(n,e,t=!1){for(let r=0;r<e.length;r++)if(yS(n,e[r],t))return!0;return!1}function IS(n){for(let e=0;e<n.length;e++){let t=n[e];if(fS(t))return e}return n.length}function wS(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Uv(n,e){return n?":not("+e.trim()+")":e}function ES(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let c=n[++t];i+="["+o+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Vt(o)&&(e+=Uv(s,i),i=""),r=o,s=s||!Vt(r);t++}return i!==""&&(e+=Uv(s,i)),e}function DS(n){return n.map(ES).join(",")}function TS(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Vt(i))break;i=s}r++}return{attrs:e,classes:t}}function je(n){return Ks(()=>{let e=k_(n),t=De(F({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===R_.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Qt.Emulated,styles:n.styles||Wt,_:null,schemas:n.schemas||null,tView:null,id:""});L_(t);let r=n.dependencies;return t.directiveDefs=Bv(r,!1),t.pipeDefs=Bv(r,!0),t.id=SS(t),t})}function bS(n){return vr(n)||x_(n)}function CS(n){return n!==null}function Ac(n){return Ks(()=>({type:n.type,bootstrap:n.bootstrap||Wt,declarations:n.declarations||Wt,imports:n.imports||Wt,exports:n.exports||Wt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function jv(n,e){if(n==null)return Bs;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,c=qn.None;Array.isArray(i)?(c=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=c!==qn.None?[r,c]:r,e[s]=o):t[s]=r}return t}function Rc(n){return Ks(()=>{let e=k_(n);return L_(e),e})}function vr(n){return n[ZC]||null}function x_(n){return n[JC]||null}function M_(n){return n[XC]||null}function P_(n){let e=vr(n)||x_(n)||M_(n);return e!==null?e.standalone:!1}function O_(n,e){let t=n[eS]||null;if(!t&&e===!0)throw new Error(`Type ${pt(n)} does not have '\u0275mod' property.`);return t}function k_(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Bs,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Wt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:jv(n.inputs,e),outputs:jv(n.outputs),debugInfo:null}}function L_(n){n.features?.forEach(e=>e(n))}function Bv(n,e){if(!n)return null;let t=e?M_:bS;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(CS)}function SS(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Qn(n){return{\u0275providers:n}}function AS(...n){return{\u0275providers:F_(!0,n),\u0275fromNgModule:!0}}function F_(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return vh(e,o=>{let c=o;Ld(c,s,[],r)&&(i||=[],i.push(c))}),i!==void 0&&V_(i,s),t}function V_(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];wh(i,s=>{e(s,r)})}}function Ld(n,e,t,r){if(n=Tt(n),!n)return!1;let i=null,s=Ov(n),o=!s&&vr(n);if(!s&&!o){let u=n.ngModule;if(s=Ov(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=n}let c=r.has(i);if(o){if(c)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let d of u)Ld(d,e,t,r)}}else if(s){if(s.imports!=null&&!c){r.add(i);let d;try{vh(s.imports,f=>{Ld(f,e,t,r)&&(d||=[],d.push(f))})}finally{}d!==void 0&&V_(d,e)}if(!c){let d=vi(i)||(()=>new i);e({provide:i,useFactory:d,deps:Wt},i),e({provide:A_,useValue:i,multi:!0},i),e({provide:_i,useValue:()=>Z(i),multi:!0},i)}let u=s.providers;if(u!=null&&!c){let d=n;wh(u,f=>{e(f,d)})}}else return!1;return i!==n&&n.providers!==void 0}function wh(n,e){for(let t of n)w_(t)&&(t=t.\u0275providers),Array.isArray(t)?wh(t,e):e(t)}var RS=Ie({provide:String,useValue:Ie});function U_(n){return n!==null&&typeof n=="object"&&RS in n}function NS(n){return!!(n&&n.useExisting)}function xS(n){return!!(n&&n.useFactory)}function Fd(n){return typeof n=="function"}var Nc=new z(""),Ja={},MS={},Td;function Eh(){return Td===void 0&&(Td=new oc),Td}var St=class{},$s=class extends St{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ud(e,o=>this.processProvider(o)),this.records.set(S_,fi(void 0,this)),i.has("environment")&&this.records.set(St,fi(void 0,this));let s=this.records.get(Nc);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(A_,Wt,ee.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ge(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ge(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Bn(this),r=Dt(void 0),i;try{return e()}finally{Bn(t),Dt(r)}}get(e,t=js,r=ee.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Lv))return e[Lv](this);r=Sc(r);let i,s=Bn(this),o=Dt(void 0);try{if(!(r&ee.SkipSelf)){let u=this.records.get(e);if(u===void 0){let d=VS(e)&&Cc(e);d&&this.injectableDefInScope(d)?u=fi(Vd(e),Ja):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let c=r&ee.Self?Eh():this.parent;return t=r&ee.Optional&&t===js?null:t,c.get(e,t)}catch(c){if(c.name==="NullInjectorError"){if((c[ic]=c[ic]||[]).unshift(pt(e)),s)throw c;return lS(c,e,"R3InjectorError",this.source)}else throw c}finally{Dt(o),Bn(s)}}resolveInjectorInitializers(){let e=ge(null),t=Bn(this),r=Dt(void 0),i;try{let s=this.get(_i,Wt,ee.Self);for(let o of s)o()}finally{Bn(t),Dt(r),ge(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(pt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new B(205,!1)}processProvider(e){e=Tt(e);let t=Fd(e)?e:Tt(e&&e.provide),r=OS(e);if(!Fd(e)&&e.multi===!0){let i=this.records.get(t);i||(i=fi(void 0,Ja,!0),i.factory=()=>Od(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ge(null);try{return t.value===Ja&&(t.value=MS,t.value=t.factory()),typeof t.value=="object"&&t.value&&FS(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ge(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Tt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Vd(n){let e=Cc(n),t=e!==null?e.factory:vi(n);if(t!==null)return t;if(n instanceof z)throw new B(204,!1);if(n instanceof Function)return PS(n);throw new B(204,!1)}function PS(n){if(n.length>0)throw new B(204,!1);let t=QC(n);return t!==null?()=>t.factory(n):()=>new n}function OS(n){if(U_(n))return fi(void 0,n.useValue);{let e=kS(n);return fi(e,Ja)}}function kS(n,e,t){let r;if(Fd(n)){let i=Tt(n);return vi(i)||Vd(i)}else if(U_(n))r=()=>Tt(n.useValue);else if(xS(n))r=()=>n.useFactory(...Od(n.deps||[]));else if(NS(n))r=()=>Z(Tt(n.useExisting));else{let i=Tt(n&&(n.useClass||n.provide));if(LS(n))r=()=>new i(...Od(n.deps));else return vi(i)||Vd(i)}return r}function fi(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function LS(n){return!!n.deps}function FS(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function VS(n){return typeof n=="function"||typeof n=="object"&&n instanceof z}function Ud(n,e){for(let t of n)Array.isArray(t)?Ud(t,e):t&&w_(t)?Ud(t.\u0275providers,e):e(t)}function _n(n,e){n instanceof $s&&n.assertNotDestroyed();let t,r=Bn(n),i=Dt(void 0);try{return e()}finally{Bn(r),Dt(i)}}function US(){return E_()!==void 0||aS()!=null}function jS(n){return typeof n=="function"}var In=0,ie=1,q=2,st=3,Ut=4,$t=5,ac=6,$v=7,zn=8,Ii=9,Yt=10,ut=11,Hs=12,Hv=13,Qs=14,Zt=15,wi=16,pi=17,Ei=18,xc=19,j_=20,Hn=21,bd=22,bt=23,Gn=25,B_=1;var _r=7,cc=8,uc=9,Ct=10,lc=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(lc||{});function mr(n){return Array.isArray(n)&&typeof n[B_]=="object"}function wn(n){return Array.isArray(n)&&n[B_]===!0}function $_(n){return(n.flags&4)!==0}function Mc(n){return n.componentOffset>-1}function H_(n){return(n.flags&1)===1}function Ys(n){return!!n.template}function jd(n){return(n[q]&512)!==0}var Bd=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function q_(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Pc(){return z_}function z_(n){return n.type.prototype.ngOnChanges&&(n.setInput=$S),BS}Pc.ngInherit=!0;function BS(){let n=W_(this),e=n?.current;if(e){let t=n.previous;if(t===Bs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function $S(n,e,t,r,i){let s=this.declaredInputs[r],o=W_(n)||HS(n,{previous:Bs,current:null}),c=o.current||(o.current={}),u=o.previous,d=u[s];c[s]=new Bd(d&&d.currentValue,t,u===Bs),q_(n,e,i,t)}var G_="__ngSimpleChanges__";function W_(n){return n[G_]||null}function HS(n,e){return n[G_]=e}var qv=null;var $n=function(n,e,t){qv?.(n,e,t)},qS="svg",zS="math";function yn(n){for(;Array.isArray(n);)n=n[In];return n}function GS(n,e){return yn(e[n])}function Jt(n,e){return yn(e[n.index])}function K_(n,e){return n.data[e]}function Ci(n,e){let t=e[n];return mr(t)?t:t[In]}function Dh(n){return(n[q]&128)===128}function WS(n){return wn(n[st])}function dc(n,e){return e==null?null:n[e]}function Q_(n){n[pi]=0}function Y_(n){n[q]&1024||(n[q]|=1024,Dh(n)&&kc(n))}function Oc(n){return!!(n[q]&9216||n[bt]?.dirty)}function $d(n){n[Yt].changeDetectionScheduler?.notify(8),n[q]&64&&(n[q]|=1024),Oc(n)&&kc(n)}function kc(n){n[Yt].changeDetectionScheduler?.notify(0);let e=Ir(n);for(;e!==null&&!(e[q]&8192||(e[q]|=8192,!Dh(e)));)e=Ir(e)}function Z_(n,e){if((n[q]&256)===256)throw new B(911,!1);n[Hn]===null&&(n[Hn]=[]),n[Hn].push(e)}function KS(n,e){if(n[Hn]===null)return;let t=n[Hn].indexOf(e);t!==-1&&n[Hn].splice(t,1)}function Ir(n){let e=n[st];return wn(e)?e[st]:e}var le={lFrame:aI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var J_=!1;function QS(){return le.lFrame.elementDepthCount}function YS(){le.lFrame.elementDepthCount++}function ZS(){le.lFrame.elementDepthCount--}function X_(){return le.bindingsEnabled}function JS(){return le.skipHydrationRootTNode!==null}function XS(n){return le.skipHydrationRootTNode===n}function e0(){le.skipHydrationRootTNode=null}function Fe(){return le.lFrame.lView}function Tr(){return le.lFrame.tView}function Xt(){let n=eI();for(;n!==null&&n.type===64;)n=n.parent;return n}function eI(){return le.lFrame.currentTNode}function t0(){let n=le.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Zs(n,e){let t=le.lFrame;t.currentTNode=n,t.isParent=e}function tI(){return le.lFrame.isParent}function n0(){le.lFrame.isParent=!1}function nI(){return J_}function zv(n){J_=n}function r0(){return le.lFrame.bindingIndex}function i0(n){return le.lFrame.bindingIndex=n}function rI(){return le.lFrame.bindingIndex++}function s0(n){let e=le.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function o0(){return le.lFrame.inI18n}function a0(n,e){let t=le.lFrame;t.bindingIndex=t.bindingRootIndex=n,Hd(e)}function c0(){return le.lFrame.currentDirectiveIndex}function Hd(n){le.lFrame.currentDirectiveIndex=n}function iI(n){le.lFrame.currentQueryIndex=n}function u0(n){let e=n[ie];return e.type===2?e.declTNode:e.type===1?n[$t]:null}function sI(n,e,t){if(t&ee.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&ee.Host);)if(i=u0(s),i===null||(s=s[Qs],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=le.lFrame=oI();return r.currentTNode=e,r.lView=n,!0}function Th(n){let e=oI(),t=n[ie];le.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function oI(){let n=le.lFrame,e=n===null?null:n.child;return e===null?aI(n):e}function aI(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function cI(){let n=le.lFrame;return le.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var uI=cI;function bh(){let n=cI();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Lc(){return le.lFrame.selectedIndex}function wr(n){le.lFrame.selectedIndex=n}function lI(){let n=le.lFrame;return K_(n.tView,n.selectedIndex)}function l0(){return le.lFrame.currentNamespace}var dI=!0;function Ch(){return dI}function Sh(n){dI=n}function d0(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=z_(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Ah(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:f}=s;o&&(n.contentHooks??=[]).push(-t,o),c&&((n.contentHooks??=[]).push(t,c),(n.contentCheckHooks??=[]).push(t,c)),u&&(n.viewHooks??=[]).push(-t,u),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function Xa(n,e,t){hI(n,e,3,t)}function ec(n,e,t,r){(n[q]&3)===t&&hI(n,e,t,r)}function Cd(n,e){let t=n[q];(t&3)===e&&(t&=16383,t+=1,n[q]=t)}function hI(n,e,t,r){let i=r!==void 0?n[pi]&65535:0,s=r??-1,o=e.length-1,c=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(n[pi]+=65536),(c<s||s==-1)&&(h0(n,t,e,u),n[pi]=(n[pi]&4294901760)+u+2),u++}function Gv(n,e){$n(4,n,e);let t=ge(null);try{e.call(n)}finally{ge(t),$n(5,n,e)}}function h0(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],c=n[o];i?n[q]>>14<n[pi]>>16&&(n[q]&3)===e&&(n[q]+=16384,Gv(c,s)):Gv(c,s)}var yi=-1,qs=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function f0(n){return n instanceof qs}function p0(n){return(n.flags&8)!==0}function g0(n){return(n.flags&16)!==0}var Sd={},qd=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Sc(r);let i=this.injector.get(e,Sd,r);return i!==Sd||t===Sd?i:this.parentInjector.get(e,t,r)}};function fI(n){return n!==yi}function hc(n){return n&32767}function m0(n){return n>>16}function fc(n,e){let t=m0(n),r=e;for(;t>0;)r=r[Qs],t--;return r}var zd=!0;function Wv(n){let e=zd;return zd=n,e}var y0=256,pI=y0-1,gI=5,v0=0,Kt={};function _0(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Vs)&&(r=t[Vs]),r==null&&(r=t[Vs]=v0++);let i=r&pI,s=1<<i;e.data[n+(i>>gI)]|=s}function mI(n,e){let t=yI(n,e);if(t!==-1)return t;let r=e[ie];r.firstCreatePass&&(n.injectorIndex=e.length,Ad(r.data,n),Ad(e,null),Ad(r.blueprint,null));let i=Rh(n,e),s=n.injectorIndex;if(fI(i)){let o=hc(i),c=fc(i,e),u=c[ie].data;for(let d=0;d<8;d++)e[s+d]=c[o+d]|u[o+d]}return e[s+8]=i,s}function Ad(n,e){n.push(0,0,0,0,0,0,0,0,e)}function yI(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Rh(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=EI(i),r===null)return yi;if(t++,i=i[Qs],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return yi}function I0(n,e,t){_0(n,e,t)}function vI(n,e,t){if(t&ee.Optional||n!==void 0)return n;yh(e,"NodeInjector")}function _I(n,e,t,r){if(t&ee.Optional&&r===void 0&&(r=null),!(t&(ee.Self|ee.Host))){let i=n[Ii],s=Dt(void 0);try{return i?i.get(e,r,t&ee.Optional):D_(e,r,t&ee.Optional)}finally{Dt(s)}}return vI(r,e,t)}function II(n,e,t,r=ee.Default,i){if(n!==null){if(e[q]&2048&&!(r&ee.Self)){let o=b0(n,e,t,r,Kt);if(o!==Kt)return o}let s=wI(n,e,t,r,Kt);if(s!==Kt)return s}return _I(e,t,r,i)}function wI(n,e,t,r,i){let s=D0(t);if(typeof s=="function"){if(!sI(e,n,r))return r&ee.Host?vI(i,t,r):_I(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&ee.Optional))yh(t);else return o}finally{uI()}}else if(typeof s=="number"){let o=null,c=yI(n,e),u=yi,d=r&ee.Host?e[Zt][$t]:null;for((c===-1||r&ee.SkipSelf)&&(u=c===-1?Rh(n,e):e[c+8],u===yi||!Qv(r,!1)?c=-1:(o=e[ie],c=hc(u),e=fc(u,e)));c!==-1;){let f=e[ie];if(Kv(s,c,f.data)){let g=w0(c,e,t,o,r,d);if(g!==Kt)return g}u=e[c+8],u!==yi&&Qv(r,e[ie].data[c+8]===d)&&Kv(s,c,e)?(o=f,c=hc(u),e=fc(u,e)):c=-1}}return i}function w0(n,e,t,r,i,s){let o=e[ie],c=o.data[n+8],u=r==null?Mc(c)&&zd:r!=o&&(c.type&3)!==0,d=i&ee.Host&&s===c,f=E0(c,o,t,u,d);return f!==null?zs(e,o,f,c):Kt}function E0(n,e,t,r,i){let s=n.providerIndexes,o=e.data,c=s&1048575,u=n.directiveStart,d=n.directiveEnd,f=s>>20,g=r?c:c+f,y=i?c+f:d;for(let I=g;I<y;I++){let A=o[I];if(I<u&&t===A||I>=u&&A.type===t)return I}if(i){let I=o[u];if(I&&Ys(I)&&I.type===t)return u}return null}function zs(n,e,t,r){let i=n[t],s=e.data;if(f0(i)){let o=i;o.resolving&&nS(tS(s[t]));let c=Wv(o.canSeeViewProviders);o.resolving=!0;let u,d=o.injectImpl?Dt(o.injectImpl):null,f=sI(n,r,ee.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&d0(t,s[t],e)}finally{d!==null&&Dt(d),Wv(c),o.resolving=!1,uI()}}return i}function D0(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Vs)?n[Vs]:void 0;return typeof e=="number"?e>=0?e&pI:T0:e}function Kv(n,e,t){let r=1<<n;return!!(t[e+(n>>gI)]&r)}function Qv(n,e){return!(n&ee.Self)&&!(n&ee.Host&&e)}var yr=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return II(this._tNode,this._lView,e,Sc(r),t)}};function T0(){return new yr(Xt(),Fe())}function Nh(n){return Ks(()=>{let e=n.prototype.constructor,t=e[rc]||Gd(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[rc]||Gd(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Gd(n){return y_(n)?()=>{let e=Gd(Tt(n));return e&&e()}:vi(n)}function b0(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[q]&2048&&!(o[q]&512);){let c=wI(s,o,t,r|ee.Self,Kt);if(c!==Kt)return c;let u=s.parent;if(!u){let d=o[j_];if(d){let f=d.get(t,Kt,r);if(f!==Kt)return f}u=EI(o),o=o[Qs]}s=u}return i}function EI(n){let e=n[ie],t=e.type;return t===2?e.declTNode:t===1?n[$t]:null}function Yv(n,e=null,t=null,r){let i=DI(n,e,t,r);return i.resolveInjectorInitializers(),i}function DI(n,e=null,t=null,r,i=new Set){let s=[t||Wt,AS(n)];return r=r||(typeof n=="object"?void 0:pt(n)),new $s(s,e||Eh(),r||null,i)}var jt=class n{static{this.THROW_IF_NOT_FOUND=js}static{this.NULL=new oc}static create(e,t){if(Array.isArray(e))return Yv({name:""},t,e,"");{let r=e.name??"";return Yv({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=U({token:n,providedIn:"any",factory:()=>Z(S_)})}static{this.__NG_ELEMENT_ID__=-1}};var C0=new z("");C0.__NG_ELEMENT_ID__=n=>{let e=Xt();if(e===null)throw new B(204,!1);if(e.type&2)return e.value;if(n&ee.Optional)return null;throw new B(204,!1)};var S0="ngOriginalError";function Rd(n){return n[S0]}var TI=!0,bI=(()=>{class n{static{this.__NG_ELEMENT_ID__=A0}static{this.__NG_ENV_ID__=t=>t}}return n})(),Wd=class extends bI{constructor(e){super(),this._lView=e}onDestroy(e){return Z_(this._lView,e),()=>KS(this._lView,e)}};function A0(){return new Wd(Fe())}var Si=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ze(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=U({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Kd=class extends rt{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,US()&&(this.destroyRef=O(bI,{optional:!0})??void 0,this.pendingTasks=O(Si,{optional:!0})??void 0)}emit(e){let t=ge(null);try{super.next(e)}finally{ge(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let c=super.subscribe({next:i,error:s,complete:o});return e instanceof Ae&&e.add(c),c}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},it=Kd;function pc(...n){}function CI(n){let e,t;function r(){n=pc;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Zv(n){return queueMicrotask(()=>n()),()=>{n=pc}}var xh="isAngularZone",gc=xh+"_ID",R0=0,we=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new it(!1),this.onMicrotaskEmpty=new it(!1),this.onStable=new it(!1),this.onError=new it(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=TI}=e;if(typeof Zone>"u")throw new B(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,M0(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(xh)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new B(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new B(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,N0,pc,pc);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},N0={};function Mh(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function x0(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){CI(()=>{n.callbackScheduled=!1,Qd(n),n.isCheckStableRunning=!0,Mh(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Qd(n)}function M0(n){let e=()=>{x0(n)},t=R0++;n._inner=n._inner.fork({name:"angular",properties:{[xh]:!0,[gc]:t,[gc+t]:!0},onInvokeTask:(r,i,s,o,c,u)=>{if(P0(u))return r.invokeTask(s,o,c,u);try{return Jv(n),r.invokeTask(s,o,c,u)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Xv(n)}},onInvoke:(r,i,s,o,c,u,d)=>{try{return Jv(n),r.invoke(s,o,c,u,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!O0(u)&&e(),Xv(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Qd(n),Mh(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Qd(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Jv(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Xv(n){n._nesting--,Mh(n)}var Yd=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new it,this.onMicrotaskEmpty=new it,this.onStable=new it,this.onError=new it}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function P0(n){return SI(n,"__ignore_ng_zone__")}function O0(n){return SI(n,"__scheduler_tick__")}function SI(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var vn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Rd(e);for(;t&&Rd(t);)t=Rd(t);return t||null}},k0=new z("",{providedIn:"root",factory:()=>{let n=O(we),e=O(vn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function L0(){return Fc(Xt(),Fe())}function Fc(n,e){return new Vc(Jt(n,e))}var Vc=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=L0}}return n})();function AI(n){return(n.flags&128)===128}var RI=new Map,F0=0;function V0(){return F0++}function U0(n){RI.set(n[xc],n)}function Zd(n){RI.delete(n[xc])}var e_="__ngContext__";function Er(n,e){mr(e)?(n[e_]=e[xc],U0(e)):n[e_]=e}function NI(n){return MI(n[Hs])}function xI(n){return MI(n[Ut])}function MI(n){for(;n!==null&&!wn(n);)n=n[Ut];return n}var Jd;function PI(n){Jd=n}function j0(){if(Jd!==void 0)return Jd;if(typeof document<"u")return document;throw new B(210,!1)}var Ph=new z("",{providedIn:"root",factory:()=>B0}),B0="ng",Oh=new z(""),Yn=new z("",{providedIn:"platform",factory:()=>"unknown"});var kh=new z("",{providedIn:"root",factory:()=>j0().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var $0="h",H0="b";var q0=()=>null;function Lh(n,e,t=!1){return q0(n,e,t)}var OI=!1,z0=new z("",{providedIn:"root",factory:()=>OI});var mc=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${p_})`}};function Fh(n){return n instanceof mc?n.changingThisBreaksApplicationSecurity:n}function kI(n,e){let t=G0(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${p_})`)}return t===e}function G0(n){return n instanceof mc&&n.getTypeName()||null}var W0=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function LI(n){return n=String(n),n.match(W0)?n:"unsafe:"+n}var Vh=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Vh||{});function FI(n){let e=K0();return e?e.sanitize(Vh.URL,n)||"":kI(n,"URL")?Fh(n):LI(Us(n))}function K0(){let n=Fe();return n&&n[Yt].sanitizer}function VI(n){return n instanceof Function?n():n}var br=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(br||{}),Q0;function Uh(n,e){return Q0(n,e)}function gi(n,e,t,r,i){if(r!=null){let s,o=!1;wn(r)?s=r:mr(r)&&(o=!0,r=r[In]);let c=yn(r);n===0&&t!==null?i==null?HI(e,t,c):yc(e,t,c,i||null,!0):n===1&&t!==null?yc(e,t,c,i||null,!0):n===2?lA(e,c,o):n===3&&e.destroyNode(c),s!=null&&hA(e,n,s,t,i)}}function Y0(n,e){return n.createText(e)}function Z0(n,e,t){n.setValue(e,t)}function UI(n,e,t){return n.createElement(e,t)}function J0(n,e){jI(n,e),e[In]=null,e[$t]=null}function X0(n,e,t,r,i,s){r[In]=i,r[$t]=e,Uc(n,r,t,1,i,s)}function jI(n,e){e[Yt].changeDetectionScheduler?.notify(9),Uc(n,e,e[ut],2,null,null)}function eA(n){let e=n[Hs];if(!e)return Nd(n[ie],n);for(;e;){let t=null;if(mr(e))t=e[Hs];else{let r=e[Ct];r&&(t=r)}if(!t){for(;e&&!e[Ut]&&e!==n;)mr(e)&&Nd(e[ie],e),e=e[st];e===null&&(e=n),mr(e)&&Nd(e[ie],e),t=e&&e[Ut]}e=t}}function tA(n,e,t,r){let i=Ct+r,s=t.length;r>0&&(t[i-1][Ut]=e),r<s-Ct?(e[Ut]=t[i],C_(t,Ct+r,e)):(t.push(e),e[Ut]=null),e[st]=t;let o=e[wi];o!==null&&t!==o&&BI(o,e);let c=e[Ei];c!==null&&c.insertView(n),$d(e),e[q]|=128}function BI(n,e){let t=n[uc],r=e[st];if(mr(r))n[q]|=lc.HasTransplantedViews;else{let i=r[st][Zt];e[Zt]!==i&&(n[q]|=lc.HasTransplantedViews)}t===null?n[uc]=[e]:t.push(e)}function jh(n,e){let t=n[uc],r=t.indexOf(e);t.splice(r,1)}function Xd(n,e){if(n.length<=Ct)return;let t=Ct+e,r=n[t];if(r){let i=r[wi];i!==null&&i!==n&&jh(i,r),e>0&&(n[t-1][Ut]=r[Ut]);let s=sc(n,Ct+e);J0(r[ie],r);let o=s[Ei];o!==null&&o.detachView(s[ie]),r[st]=null,r[Ut]=null,r[q]&=-129}return r}function $I(n,e){if(!(e[q]&256)){let t=e[ut];t.destroyNode&&Uc(n,e,t,3,null,null),eA(e)}}function Nd(n,e){if(e[q]&256)return;let t=ge(null);try{e[q]&=-129,e[q]|=256,e[bt]&&rd(e[bt]),rA(n,e),nA(n,e),e[ie].type===1&&e[ut].destroy();let r=e[wi];if(r!==null&&wn(e[st])){r!==e[st]&&jh(r,e);let i=e[Ei];i!==null&&i.detachView(n)}Zd(e)}finally{ge(t)}}function nA(n,e){let t=n.cleanup,r=e[$v];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[$v]=null);let i=e[Hn];if(i!==null){e[Hn]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function rA(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof qs)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let c=i[s[o]],u=s[o+1];$n(4,c,u);try{u.call(c)}finally{$n(5,c,u)}}else{$n(4,i,s);try{s.call(i)}finally{$n(5,i,s)}}}}}function iA(n,e,t){return sA(n,e.parent,t)}function sA(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[In];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===Qt.None||s===Qt.Emulated)return null}return Jt(r,t)}}function yc(n,e,t,r,i){n.insertBefore(e,t,r,i)}function HI(n,e,t){n.appendChild(e,t)}function t_(n,e,t,r,i){r!==null?yc(n,e,t,r,i):HI(n,e,t)}function qI(n,e){return n.parentNode(e)}function oA(n,e){return n.nextSibling(e)}function aA(n,e,t){return uA(n,e,t)}function cA(n,e,t){return n.type&40?Jt(n,t):null}var uA=cA,n_;function Bh(n,e,t,r){let i=iA(n,r,e),s=e[ut],o=r.parent||e[$t],c=aA(o,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)t_(s,i,t[u],c,!1);else t_(s,i,t,c,!1);n_!==void 0&&n_(s,r,e,t,i)}function Ls(n,e){if(e!==null){let t=e.type;if(t&3)return Jt(e,n);if(t&4)return eh(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ls(n,r);{let i=n[e.index];return wn(i)?eh(-1,i):yn(i)}}else{if(t&128)return Ls(n,e.next);if(t&32)return Uh(e,n)()||yn(n[e.index]);{let r=zI(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ir(n[Zt]);return Ls(i,r)}else return Ls(n,e.next)}}}return null}function zI(n,e){if(e!==null){let r=n[Zt][$t],i=e.projection;return r.projection[i]}return null}function eh(n,e){let t=Ct+n+1;if(t<e.length){let r=e[t],i=r[ie].firstChild;if(i!==null)return Ls(r,i)}return e[_r]}function lA(n,e,t){n.removeChild(null,e,t)}function $h(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let c=r[t.index],u=t.type;if(o&&e===0&&(c&&Er(yn(c),r),t.flags|=2),(t.flags&32)!==32)if(u&8)$h(n,e,t.child,r,i,s,!1),gi(e,n,i,c,s);else if(u&32){let d=Uh(t,r),f;for(;f=d();)gi(e,n,i,f,s);gi(e,n,i,c,s)}else u&16?dA(n,e,r,t,i,s):gi(e,n,i,c,s);t=o?t.projectionNext:t.next}}function Uc(n,e,t,r,i,s){$h(t,r,n.firstChild,e,i,s,!1)}function dA(n,e,t,r,i,s){let o=t[Zt],u=o[$t].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++){let f=u[d];gi(e,n,i,f,s)}else{let d=u,f=o[st];AI(r)&&(d.flags|=128),$h(n,e,d,f,i,s,!0)}}function hA(n,e,t,r,i){let s=t[_r],o=yn(t);s!==o&&gi(e,n,r,s,i);for(let c=Ct;c<t.length;c++){let u=t[c];Uc(u[ie],u,n,e,r,s)}}function fA(n,e,t){n.setAttribute(e,"style",t)}function GI(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function WI(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&kd(n,e,r),i!==null&&GI(n,e,i),s!==null&&fA(n,e,s)}var Cr={};function ot(n=1){KI(Tr(),Fe(),Lc()+n,!1)}function KI(n,e,t,r){if(!r)if((e[q]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Xa(e,s,t)}else{let s=n.preOrderHooks;s!==null&&ec(e,s,0,t)}wr(t)}function At(n,e=ee.Default){let t=Fe();if(t===null)return Z(n,e);let r=Xt();return II(r,t,Tt(n),e)}function QI(n,e,t,r,i,s){let o=ge(null);try{let c=null;i&qn.SignalBased&&(c=e[r][ev]),c!==null&&c.transformFn!==void 0&&(s=c.transformFn(s)),i&qn.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,c,s,t,r):q_(e,c,r,s)}finally{ge(o)}}function pA(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)wr(~i);else{let s=i,o=t[++r],c=t[++r];a0(o,s);let u=e[s];c(2,u)}}}finally{wr(-1)}}function jc(n,e,t,r,i,s,o,c,u,d,f){let g=e.blueprint.slice();return g[In]=i,g[q]=r|4|128|8|64,(d!==null||n&&n[q]&2048)&&(g[q]|=2048),Q_(g),g[st]=g[Qs]=n,g[zn]=t,g[Yt]=o||n&&n[Yt],g[ut]=c||n&&n[ut],g[Ii]=u||n&&n[Ii]||null,g[$t]=s,g[xc]=V0(),g[ac]=f,g[j_]=d,g[Zt]=e.type==2?n[Zt]:g,g}function Bc(n,e,t,r,i){let s=n.data[e];if(s===null)s=gA(n,e,t,r,i),o0()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=t0();s.injectorIndex=o===null?-1:o.injectorIndex}return Zs(s,!0),s}function gA(n,e,t,r,i){let s=eI(),o=tI(),c=o?s:s&&s.parent,u=n.data[e]=IA(n,c,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function YI(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function ZI(n,e,t,r,i){let s=Lc(),o=r&2;try{wr(-1),o&&e.length>Gn&&KI(n,e,Gn,!1),$n(o?2:0,i),t(r,i)}finally{wr(s),$n(o?3:1,i)}}function JI(n,e,t){if($_(e)){let r=ge(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let c=n.data[o];if(c.contentQueries){let u=t[o];c.contentQueries(1,u,o)}}}finally{ge(r)}}}function XI(n,e,t){X_()&&(CA(n,e,t,Jt(t,e)),(t.flags&64)===64&&sw(n,e,t))}function ew(n,e,t=Jt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],c=o===-1?t(e,n):n[o];n[i++]=c}}}function tw(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Hh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Hh(n,e,t,r,i,s,o,c,u,d,f){let g=Gn+r,y=g+i,I=mA(g,y),A=typeof d=="function"?d():d;return I[ie]={type:n,blueprint:I,template:t,queries:null,viewQuery:c,declTNode:e,data:I.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:f}}function mA(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Cr);return t}function yA(n,e,t,r){let s=r.get(z0,OI)||t===Qt.ShadowDom,o=n.selectRootElement(e,s);return vA(o),o}function vA(n){_A(n)}var _A=()=>null;function IA(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,c=0;return JS()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function r_(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let c,u=qn.None;Array.isArray(o)?(c=o[0],u=o[1]):c=o;let d=s;if(i!==null){if(!i.hasOwnProperty(s))continue;d=i[s]}n===0?i_(r,t,d,c,u):i_(r,t,d,c)}return r}function i_(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function wA(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,c=[],u=null,d=null;for(let f=r;f<i;f++){let g=s[f],y=t?t.get(g):null,I=y?y.inputs:null,A=y?y.outputs:null;u=r_(0,g.inputs,f,u,I),d=r_(1,g.outputs,f,d,A);let x=u!==null&&o!==null&&!Ih(e)?kA(u,f,o):null;c.push(x)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=c,e.inputs=u,e.outputs=d}function EA(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function nw(n,e,t,r,i,s,o,c){let u=Jt(e,t),d=e.inputs,f;!c&&d!=null&&(f=d[r])?(qh(n,t,f,r,i),Mc(e)&&DA(t,e.index)):e.type&3?(r=EA(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function DA(n,e){let t=Ci(e,n);t[q]&16||(t[q]|=64)}function rw(n,e,t,r){if(X_()){let i=r===null?null:{"":-1},s=AA(n,t),o,c;s===null?o=c=null:[o,c]=s,o!==null&&iw(n,e,t,o,i,c),i&&RA(t,r,i)}t.mergedAttrs=_h(t.mergedAttrs,t.attrs)}function iw(n,e,t,r,i,s){for(let d=0;d<r.length;d++)I0(mI(t,e),n,r[d].type);xA(t,n.data.length,r.length);for(let d=0;d<r.length;d++){let f=r[d];f.providersResolver&&f.providersResolver(f)}let o=!1,c=!1,u=YI(n,e,r.length,null);for(let d=0;d<r.length;d++){let f=r[d];t.mergedAttrs=_h(t.mergedAttrs,f.hostAttrs),MA(n,t,e,u,f),NA(u,f,i),f.contentQueries!==null&&(t.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(t.flags|=64);let g=f.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!c&&(g.ngOnChanges||g.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),c=!0),u++}wA(n,t,s)}function TA(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let c=~e.index;bA(o)!=c&&o.push(c),o.push(t,r,s)}}function bA(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function CA(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;Mc(t)&&PA(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||mI(t,e),Er(r,e);let o=t.initialInputs;for(let c=i;c<s;c++){let u=n.data[c],d=zs(e,n,c,t);if(Er(d,e),o!==null&&OA(e,c-i,d,u,t,o),Ys(u)){let f=Ci(t.index,e);f[zn]=zs(e,n,c,t)}}}function sw(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=c0();try{wr(s);for(let c=r;c<i;c++){let u=n.data[c],d=e[c];Hd(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&SA(u,d)}}finally{wr(-1),Hd(o)}}function SA(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function AA(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(_S(e,o.selectors,!1))if(r||(r=[]),Ys(o))if(o.findHostDirectiveDefs!==null){let c=[];i=i||new Map,o.findHostDirectiveDefs(o,c,i),r.unshift(...c,o);let u=c.length;th(n,e,u)}else r.unshift(o),th(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function th(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function RA(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new B(-301,!1);r.push(e[i],s)}}}function NA(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ys(e)&&(t[""]=n)}}function xA(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function MA(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=vi(i.type,!0)),o=new qs(s,Ys(i),At);n.blueprint[r]=o,t[r]=o,TA(n,e,r,YI(n,t,i.hostVars,Cr),i)}function PA(n,e,t){let r=Jt(e,n),i=tw(t),s=n[Yt].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let c=$c(n,jc(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=c}function OA(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let c=0;c<o.length;){let u=o[c++],d=o[c++],f=o[c++],g=o[c++];QI(r,t,u,d,f,g)}}function kA(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let c=0;c<o.length;c+=3)if(o[c]===e){r.push(s,o[c+1],o[c+2],t[i+1]);break}}i+=2}return r}function ow(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function aw(n,e){let t=n.contentQueries;if(t!==null){let r=ge(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let c=n.data[o];iI(s),c.contentQueries(2,e[o],o)}}}finally{ge(r)}}}function $c(n,e){return n[Hs]?n[Hv][Ut]=e:n[Hs]=e,n[Hv]=e,e}function nh(n,e,t){iI(0);let r=ge(null);try{e(n,t)}finally{ge(r)}}function LA(n,e){let t=n[Ii],r=t?t.get(vn,null):null;r&&r.handleError(e)}function qh(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],c=t[s++],u=t[s++],d=e[o],f=n.data[o];QI(f,d,r,c,u,i)}}function cw(n,e,t){let r=GS(e,n);Z0(n[ut],r,t)}function FA(n,e){let t=Ci(e,n),r=t[ie];VA(r,t);let i=t[In];i!==null&&t[ac]===null&&(t[ac]=Lh(i,t[Ii])),zh(r,t,t[zn])}function VA(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function zh(n,e,t){Th(e);try{let r=n.viewQuery;r!==null&&nh(1,r,t);let i=n.template;i!==null&&ZI(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ei]?.finishViewCreation(n),n.staticContentQueries&&aw(n,e),n.staticViewQueries&&nh(2,n.viewQuery,t);let s=n.components;s!==null&&UA(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[q]&=-5,bh()}}function UA(n,e){for(let t=0;t<e.length;t++)FA(n,e[t])}function jA(n,e,t,r){let i=ge(null);try{let s=e.tView,c=n[q]&4096?4096:16,u=jc(n,s,t,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];u[wi]=d;let f=n[Ei];return f!==null&&(u[Ei]=f.createEmbeddedView(s)),zh(s,u,t),u}finally{ge(i)}}function s_(n,e){return!e||e.firstChild===null||AI(n)}function BA(n,e,t,r=!0){let i=e[ie];if(tA(i,e,n,t),r){let o=eh(t,n),c=e[ut],u=qI(c,n[_r]);u!==null&&X0(i,n[$t],c,e,u,o)}let s=e[ac];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function vc(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(yn(s)),wn(s)&&$A(s,r);let o=t.type;if(o&8)vc(n,e,t.child,r);else if(o&32){let c=Uh(t,e),u;for(;u=c();)r.push(u)}else if(o&16){let c=zI(e,t);if(Array.isArray(c))r.push(...c);else{let u=Ir(e[Zt]);vc(u[ie],u,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function $A(n,e){for(let t=Ct;t<n.length;t++){let r=n[t],i=r[ie].firstChild;i!==null&&vc(r[ie],r,i,e)}n[_r]!==n[In]&&e.push(n[_r])}var uw=[];function HA(n){return n[bt]??qA(n)}function qA(n){let e=uw.pop()??Object.create(GA);return e.lView=n,e}function zA(n){n.lView[bt]!==n&&(n.lView=null,uw.push(n))}var GA=De(F({},ed),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{kc(n.lView)},consumerOnSignalRead(){this.lView[bt]=this}});function WA(n){let e=n[bt]??Object.create(KA);return e.lView=n,e}var KA=De(F({},ed),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Ir(n.lView);for(;e&&!lw(e[ie]);)e=Ir(e);e&&Y_(e)},consumerOnSignalRead(){this.lView[bt]=this}});function lw(n){return n.type!==2}var QA=100;function dw(n,e=!0,t=0){let r=n[Yt],i=r.rendererFactory,s=!1;s||i.begin?.();try{YA(n,t)}catch(o){throw e&&LA(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function YA(n,e){let t=nI();try{zv(!0),rh(n,e);let r=0;for(;Oc(n);){if(r===QA)throw new B(103,!1);r++,rh(n,1)}}finally{zv(t)}}function ZA(n,e,t,r){let i=e[q];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Yt].inlineEffectRunner?.flush(),Th(e);let c=!0,u=null,d=null;s||(lw(n)?(d=HA(e),u=td(d)):tv()===null?(c=!1,d=WA(e),u=td(d)):e[bt]&&(rd(e[bt]),e[bt]=null));try{Q_(e),i0(n.bindingStartIndex),t!==null&&ZI(n,e,t,2,r);let f=(i&3)===3;if(!s)if(f){let I=n.preOrderCheckHooks;I!==null&&Xa(e,I,null)}else{let I=n.preOrderHooks;I!==null&&ec(e,I,0,null),Cd(e,0)}if(o||JA(e),hw(e,0),n.contentQueries!==null&&aw(n,e),!s)if(f){let I=n.contentCheckHooks;I!==null&&Xa(e,I)}else{let I=n.contentHooks;I!==null&&ec(e,I,1),Cd(e,1)}pA(n,e);let g=n.components;g!==null&&pw(e,g,0);let y=n.viewQuery;if(y!==null&&nh(2,y,r),!s)if(f){let I=n.viewCheckHooks;I!==null&&Xa(e,I)}else{let I=n.viewHooks;I!==null&&ec(e,I,2),Cd(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[bd]){for(let I of e[bd])I();e[bd]=null}s||(e[q]&=-73)}catch(f){throw s||kc(e),f}finally{d!==null&&(nv(d,u),c&&zA(d)),bh()}}function hw(n,e){for(let t=NI(n);t!==null;t=xI(t))for(let r=Ct;r<t.length;r++){let i=t[r];fw(i,e)}}function JA(n){for(let e=NI(n);e!==null;e=xI(e)){if(!(e[q]&lc.HasTransplantedViews))continue;let t=e[uc];for(let r=0;r<t.length;r++){let i=t[r];Y_(i)}}}function XA(n,e,t){let r=Ci(e,n);fw(r,t)}function fw(n,e){Dh(n)&&rh(n,e)}function rh(n,e){let r=n[ie],i=n[q],s=n[bt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&nd(s)),o||=!1,s&&(s.dirty=!1),n[q]&=-9217,o)ZA(r,n,r.template,n[zn]);else if(i&8192){hw(n,1);let c=r.components;c!==null&&pw(n,c,1)}}function pw(n,e,t){for(let r=0;r<e.length;r++)XA(n,e[r],t)}function gw(n,e){let t=nI()?64:1088;for(n[Yt].changeDetectionScheduler?.notify(e);n;){n[q]|=t;let r=Ir(n);if(jd(n)&&!r)return n;n=r}return null}var Dr=class{get rootNodes(){let e=this._lView,t=e[ie];return vc(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[zn]}set context(e){this._lView[zn]=e}get destroyed(){return(this._lView[q]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[st];if(wn(e)){let t=e[cc],r=t?t.indexOf(this):-1;r>-1&&(Xd(e,r),sc(t,r))}this._attachedToViewContainer=!1}$I(this._lView[ie],this._lView)}onDestroy(e){Z_(this._lView,e)}markForCheck(){gw(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[q]&=-129}reattach(){$d(this._lView),this._lView[q]|=128}detectChanges(){this._lView[q]|=1024,dw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new B(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=jd(this._lView),t=this._lView[wi];t!==null&&!e&&jh(t,this._lView),jI(this._lView[ie],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new B(902,!1);this._appRef=e;let t=jd(this._lView),r=this._lView[wi];r!==null&&!t&&BI(r,this._lView),$d(this._lView)}},Gh=(()=>{class n{static{this.__NG_ELEMENT_ID__=nR}}return n})(),eR=Gh,tR=class extends eR{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=jA(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Dr(i)}};function nR(){return rR(Xt(),Fe())}function rR(n,e){return n.type&4?new tR(e,n,Fc(n,e)):null}var jB=new RegExp(`^(\\d+)*(${H0}|${$0})*(.*)`);var iR=()=>null;function o_(n,e){return iR(n,e)}var Di=class{},Hc=new z("",{providedIn:"root",factory:()=>!1});var mw=new z(""),yw=new z(""),ih=class{},_c=class{};function sR(n){let e=Error(`No component factory found for ${pt(n)}.`);return e[oR]=n,e}var oR="ngComponent";var sh=class{resolveComponentFactory(e){throw sR(e)}},Ti=class{static{this.NULL=new sh}},bi=class{};var aR=(()=>{class n{static{this.\u0275prov=U({token:n,providedIn:"root",factory:()=>null})}}return n})();function oh(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let c=e[o];if(typeof c=="number")s=c;else if(s==1)i=Mv(i,c);else if(s==2){let u=c,d=e[++o];r=Mv(r,u+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Ic=class extends Ti{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=vr(e);return new Gs(t,this.ngModule)}};function a_(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,c=s?i[1]:qn.None;e?t.push({propName:o,templateName:r,isSignal:(c&qn.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function cR(n){let e=n.toLowerCase();return e==="svg"?qS:e==="math"?zS:null}var Gs=class extends _c{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=a_(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return a_(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=DS(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=ge(null);try{i=i||this.ngModule;let o=i instanceof St?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let c=o?new qd(e,o):e,u=c.get(bi,null);if(u===null)throw new B(407,!1);let d=c.get(aR,null),f=c.get(Di,null),g={rendererFactory:u,sanitizer:d,inlineEffectRunner:null,changeDetectionScheduler:f},y=u.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",A=r?yA(y,r,this.componentDef.encapsulation,c):UI(y,I,cR(I)),x=512;this.componentDef.signals?x|=4096:this.componentDef.onPush||(x|=16);let R=null;A!==null&&(R=Lh(A,c,!0));let L=Hh(0,null,null,1,0,null,null,null,null,null,null),H=jc(null,L,null,x,null,null,g,y,c,null,R);Th(H);let K,fe,xe=null;try{let X=this.componentDef,E,m=null;X.findHostDirectiveDefs?(E=[],m=new Map,X.findHostDirectiveDefs(X,E,m),E.push(X)):E=[X];let v=uR(H,A);xe=lR(v,A,X,E,H,g,y),fe=K_(L,Gn),A&&fR(y,X,A,r),t!==void 0&&pR(fe,this.ngContentSelectors,t),K=hR(xe,X,E,m,H,[gR]),zh(L,H,null)}catch(X){throw xe!==null&&Zd(xe),Zd(H),X}finally{bh()}return new ah(this.componentType,K,Fc(fe,H),H,fe)}finally{ge(s)}}},ah=class extends ih{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Dr(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;qh(s[ie],s,i,e,t),this.previousInputValues.set(e,t);let o=Ci(this._tNode.index,s);gw(o,1)}}get injector(){return new yr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function uR(n,e){let t=n[ie],r=Gn;return n[r]=e,Bc(t,r,2,"#host",null)}function lR(n,e,t,r,i,s,o){let c=i[ie];dR(r,n,e,o);let u=null;e!==null&&(u=Lh(e,i[Ii]));let d=s.rendererFactory.createRenderer(e,t),f=16;t.signals?f=4096:t.onPush&&(f=64);let g=jc(i,tw(t),null,f,i[n.index],n,s,d,null,null,u);return c.firstCreatePass&&th(c,n,r.length-1),$c(i,g),i[n.index]=g}function dR(n,e,t,r){for(let i of n)e.mergedAttrs=_h(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(oh(e,e.mergedAttrs,!0),t!==null&&WI(r,t,e))}function hR(n,e,t,r,i,s){let o=Xt(),c=i[ie],u=Jt(o,i);iw(c,i,o,t,null,r);for(let f=0;f<t.length;f++){let g=o.directiveStart+f,y=zs(i,c,g,o);Er(y,i)}sw(c,i,o),u&&Er(u,i);let d=zs(i,c,o.directiveStart+o.componentOffset,o);if(n[zn]=i[zn]=d,s!==null)for(let f of s)f(d,e);return JI(c,o,i),d}function fR(n,e,t,r){if(r)kd(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:s}=TS(e.selectors[0]);i&&kd(n,t,i),s&&s.length>0&&GI(n,t,s.join(" "))}}function pR(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function gR(){let n=Xt();Ah(Fe()[ie],n)}var Js=(()=>{class n{static{this.__NG_ELEMENT_ID__=mR}}return n})();function mR(){let n=Xt();return vR(n,Fe())}var yR=Js,vw=class extends yR{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Fc(this._hostTNode,this._hostLView)}get injector(){return new yr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Rh(this._hostTNode,this._hostLView);if(fI(e)){let t=fc(e,this._hostLView),r=hc(e),i=t[ie].data[r+8];return new yr(i,t)}else return new yr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=c_(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ct}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=o_(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(c,i,s_(this._hostTNode,o)),c}createComponent(e,t,r,i,s){let o=e&&!jS(e),c;if(o)c=t;else{let A=t||{};c=A.index,r=A.injector,i=A.projectableNodes,s=A.environmentInjector||A.ngModuleRef}let u=o?e:new Gs(vr(e)),d=r||this.parentInjector;if(!s&&u.ngModule==null){let x=(o?d:this.parentInjector).get(St,null);x&&(s=x)}let f=vr(u.componentType??{}),g=o_(this._lContainer,f?.id??null),y=g?.firstChild??null,I=u.create(d,i,y,s);return this.insertImpl(I.hostView,c,s_(this._hostTNode,g)),I}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(WS(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[st],d=new vw(u,u[$t],u[st]);d.detach(d.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return BA(o,i,s,r),e.attachToViewContainerRef(),C_(xd(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=c_(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Xd(this._lContainer,t);r&&(sc(xd(this._lContainer),t),$I(r[ie],r))}detach(e){let t=this._adjustIndex(e,-1),r=Xd(this._lContainer,t);return r&&sc(xd(this._lContainer),t)!=null?new Dr(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function c_(n){return n[cc]}function xd(n){return n[cc]||(n[cc]=[])}function vR(n,e){let t,r=e[n.index];return wn(r)?t=r:(t=ow(r,e,null,n),e[n.index]=t,$c(e,t)),IR(t,e,n,r),new vw(t,n,e)}function _R(n,e){let t=n[ut],r=t.createComment(""),i=Jt(e,n),s=qI(t,i);return yc(t,s,r,oA(t,i),!1),r}var IR=DR,wR=()=>!1;function ER(n,e,t){return wR(n,e,t)}function DR(n,e,t,r){if(n[_r])return;let i;t.type&8?i=yn(r):i=_R(e,t),n[_r]=i}var u_=new Set;function Wh(n){u_.has(n)||(u_.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Wn=class{},Ws=class{};var ch=class extends Wn{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ic(this);let s=O_(e);this._bootstrapComponents=VI(s.bootstrap),this._r3Injector=DI(e,t,[{provide:Wn,useValue:this},{provide:Ti,useValue:this.componentFactoryResolver},...r],pt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},uh=class extends Ws{constructor(e){super(),this.moduleType=e}create(e){return new ch(this.moduleType,e,[])}};var wc=class extends Wn{constructor(e){super(),this.componentFactoryResolver=new Ic(this),this.instance=null;let t=new $s([...e.providers,{provide:Wn,useValue:this},{provide:Ti,useValue:this.componentFactoryResolver}],e.parent||Eh(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Kh(n,e,t=null){return new wc({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function _w(n){return bR(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function TR(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function bR(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Ec(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function CR(n,e,t,r){let i=Ec(n,e,t);return Ec(n,e+1,r)||i}function SR(n){return(n.flags&32)===32}function AR(n,e,t,r,i,s,o,c,u){let d=e.consts,f=Bc(e,n,4,o||null,c||null);rw(e,t,f,dc(d,u)),Ah(e,f);let g=f.tView=Hh(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return e.queries!==null&&(e.queries.template(e,f),g.queries=e.queries.embeddedTView(f)),f}function RR(n,e,t,r,i,s,o,c,u,d){let f=t+Gn,g=e.firstCreatePass?AR(f,e,n,r,i,s,o,c,u):e.data[f];Zs(g,!1);let y=NR(e,n,g,t);Ch()&&Bh(e,n,y,g),Er(y,n);let I=ow(y,n,y,g);return n[f]=I,$c(n,I),ER(I,g,n),H_(g)&&XI(e,n,g),u!=null&&ew(n,g,d),g}function Qh(n,e,t,r,i,s,o,c){let u=Fe(),d=Tr(),f=dc(d.consts,s);return RR(u,d,n,e,t,r,i,f,o,c),Qh}var NR=xR;function xR(n,e,t,r){return Sh(!0),e[ut].createComment("")}var Fs=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Fs||{}),MR=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=U({token:n,providedIn:"root",factory:()=>new n})}}return n})(),l_=class n{constructor(){this.ngZone=O(we),this.scheduler=O(Di),this.errorHandler=O(vn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Fs.EarlyRead,Fs.Write,Fs.MixedReadWrite,Fs.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=U({token:n,providedIn:"root",factory:()=>new n})}};function Iw(n,e,t,r){return Ec(n,rI(),t)?e+Us(t)+r:Cr}function PR(n,e,t,r,i,s){let o=r0(),c=CR(n,o,t,i);return s0(2),c?e+Us(t)+r+Us(i)+s:Cr}function Yh(n,e,t){let r=Fe(),i=rI();if(Ec(r,i,e)){let s=Tr(),o=lI();nw(s,o,r,n,e,r[ut],t,!1)}return Yh}function d_(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";qh(n,t,s[o],o,r)}function OR(n,e,t,r,i,s){let o=e.consts,c=dc(o,i),u=Bc(e,n,2,r,c);return rw(e,t,u,dc(o,s)),u.attrs!==null&&oh(u,u.attrs,!1),u.mergedAttrs!==null&&oh(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function me(n,e,t,r){let i=Fe(),s=Tr(),o=Gn+n,c=i[ut],u=s.firstCreatePass?OR(o,s,i,e,t,r):s.data[o],d=kR(s,i,u,c,e,n);i[o]=d;let f=H_(u);return Zs(u,!0),WI(c,d,u),!SR(u)&&Ch()&&Bh(s,i,d,u),QS()===0&&Er(d,i),YS(),f&&(XI(s,i,u),JI(s,u,i)),r!==null&&ew(i,u),me}function ye(){let n=Xt();tI()?n0():(n=n.parent,Zs(n,!1));let e=n;XS(e)&&e0(),ZS();let t=Tr();return t.firstCreatePass&&(Ah(t,n),$_(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&p0(e)&&d_(t,e,Fe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&g0(e)&&d_(t,e,Fe(),e.stylesWithoutHost,!1),ye}function Ce(n,e,t,r){return me(n,e,t,r),ye(),Ce}var kR=(n,e,t,r,i,s)=>(Sh(!0),UI(r,i,l0()));var Dc="en-US";var LR=Dc;function FR(n){typeof n=="string"&&(LR=n.toLowerCase().replace(/_/g,"-"))}function Zh(n,e,t){return ww(n,"",e,"",t),Zh}function ww(n,e,t,r,i){let s=Fe(),o=Iw(s,e,t,r);if(o!==Cr){let c=Tr(),u=lI();nw(c,u,s,n,o,s[ut],i,!1)}return ww}function Te(n,e=""){let t=Fe(),r=Tr(),i=n+Gn,s=r.firstCreatePass?Bc(r,i,1,e,null):r.data[i],o=VR(r,t,s,e,n);t[i]=o,Ch()&&Bh(r,t,o,s),Zs(s,!1)}var VR=(n,e,t,r,i)=>(Sh(!0),Y0(e[ut],r));function gt(n,e,t){let r=Fe(),i=Iw(r,n,e,t);return i!==Cr&&cw(r,Lc(),i),gt}function Jh(n,e,t,r,i){let s=Fe(),o=PR(s,n,e,t,r,i);return o!==Cr&&cw(s,Lc(),o),Jh}var UR=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=F_(!1,t.type),i=r.length>0?Kh([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=U({token:n,providedIn:"environment",factory:()=>new n(Z(St))})}}return n})();function Be(n){Wh("NgStandalone"),n.getStandaloneInjector=e=>e.get(UR).getOrCreateStandaloneInjector(n)}var Kn=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Ew=new Kn("18.2.13");var qc=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var Dw=new z("");function Xs(n){return!!n&&typeof n.then=="function"}function Tw(n){return!!n&&typeof n.subscribe=="function"}var bw=new z(""),Cw=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=O(bw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(Xs(s))t.push(s);else if(Tw(s)){let o=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Xh=new z("");function jR(){rv(()=>{throw new B(600,!1)})}function BR(n){return n.isBoundToModule}var $R=10;function HR(n,e,t){try{let r=t();return Xs(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Sr=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=O(k0),this.afterRenderManager=O(MR),this.zonelessEnabled=O(Hc),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new rt,this.afterTick=new rt,this.componentTypes=[],this.components=[],this.isStable=O(Si).hasPendingTasks.pipe(te(t=>!t)),this._injector=O(St)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof _c;if(!this._injector.get(Cw).done){let y=!i&&P_(t),I=!1;throw new B(405,I)}let o;i?o=t:o=this._injector.get(Ti).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let c=BR(o)?void 0:this._injector.get(Wn),u=r||o.selector,d=o.create(jt.NULL,[],u,c),f=d.location.nativeElement,g=d.injector.get(Dw,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),tc(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new B(101,!1);let t=ge(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,ge(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(bi,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<$R;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)qR(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Oc(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;tc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Xh,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>tc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new B(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function tc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function qR(n,e,t,r){if(!t&&!Oc(n))return;dw(n,e,t&&!r?0:1)}var lh=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},ef=(()=>{class n{compileModuleSync(t){return new uh(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=O_(t),s=VI(i.declarations).reduce((o,c)=>{let u=vr(c);return u&&o.push(new Gs(u)),o},[]);return new lh(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var zR=(()=>{class n{constructor(){this.zone=O(we),this.changeDetectionScheduler=O(Di),this.applicationRef=O(Sr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),GR=new z("",{factory:()=>!1});function Sw({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new we(De(F({},Rw()),{scheduleInRootZone:t})),[{provide:we,useFactory:n},{provide:_i,multi:!0,useFactory:()=>{let r=O(zR,{optional:!0});return()=>r.initialize()}},{provide:_i,multi:!0,useFactory:()=>{let r=O(WR);return()=>{r.initialize()}}},e===!0?{provide:mw,useValue:!0}:[],{provide:yw,useValue:t??TI}]}function Aw(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=Sw({ngZoneFactory:()=>{let i=Rw(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Wh("NgZone_CoalesceEvent"),new we(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Qn([{provide:GR,useValue:!0},{provide:Hc,useValue:!1},r])}function Rw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var WR=(()=>{class n{constructor(){this.subscription=new Ae,this.initialized=!1,this.zone=O(we),this.pendingTasks=O(Si)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{we.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{we.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var KR=(()=>{class n{constructor(){this.appRef=O(Sr),this.taskService=O(Si),this.ngZone=O(we),this.zonelessEnabled=O(Hc),this.disableScheduling=O(mw,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ae,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(gc):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(yw,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Yd||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Zv:CI;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(gc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Zv(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function QR(){return typeof $localize<"u"&&$localize.locale||Dc}var tf=new z("",{providedIn:"root",factory:()=>O(tf,ee.Optional|ee.SkipSelf)||QR()});var dh=new z("");function Za(n){return!n.moduleRef}function YR(n){let e=Za(n)?n.r3Injector:n.moduleRef.injector,t=e.get(we);return t.run(()=>{Za(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(vn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),Za(n)){let s=()=>e.destroy(),o=n.platformInjector.get(dh);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(dh);o.add(s),n.moduleRef.onDestroy(()=>{tc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return HR(r,t,()=>{let s=e.get(Cw);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(tf,Dc);if(FR(o||Dc),Za(n)){let c=e.get(Sr);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return ZR(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function ZR(n,e){let t=n.injector.get(Sr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new B(-403,!1);e.push(n)}var nc=null;function JR(n=[],e){return jt.create({name:e,providers:[{provide:Nc,useValue:"platform"},{provide:dh,useValue:new Set([()=>nc=null])},...n]})}function XR(n=[]){if(nc)return nc;let e=JR(n);return nc=e,jR(),eN(e),e}function eN(n){n.get(Oh,null)?.forEach(t=>t())}var eo=(()=>{class n{static{this.__NG_ELEMENT_ID__=tN}}return n})();function tN(n){return nN(Xt(),Fe(),(n&16)===16)}function nN(n,e,t){if(Mc(n)&&!t){let r=Ci(n.index,e);return new Dr(r,r)}else if(n.type&175){let r=e[Zt];return new Dr(r,e)}return null}var hh=class{constructor(){}supports(e){return _w(e)}create(e){return new fh(e)}},rN=(n,e)=>e,fh=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||rN}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<h_(r,i,s)?t:r,c=h_(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let d=c-i,f=u-i;if(d!=f){for(let y=0;y<d;y++){let I=y<s.length?s[y]:s[y]=0,A=I+y;f<=A&&A<d&&(s[y]=I+1)}let g=o.previousIndex;s[g]=f-d}}c!==u&&e(o,c,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!_w(e))throw new B(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)s=e[c],o=this._trackByFn(c,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,c),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,c)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,TR(e,c=>{o=this._trackByFn(i,c),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,c,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,c,o,i)),Object.is(t.item,c)||this._addIdentityChange(t,c)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new ph(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Tc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Tc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},ph=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},gh=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Tc=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new gh,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function h_(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function f_(){return new nf([new hh])}var nf=(()=>{class n{static{this.\u0275prov=U({token:n,providedIn:"root",factory:f_})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||f_()),deps:[[n,new b_,new Bt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new B(901,!1)}}return n})();function Nw(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=XR(r),s=[Sw({}),{provide:Di,useExisting:KR},...t||[]],o=new wc({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return YR({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var kw=null;function Ai(){return kw}function Lw(n){kw??=n}var zc=class{};var Rt=new z(""),Fw=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>O(aN),providedIn:"platform"})}}return n})();var aN=(()=>{class n extends Fw{constructor(){super(),this._doc=O(Rt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ai().getBaseHref(this._doc)}onPopState(t){let r=Ai().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Ai().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Vw(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function xw(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Ar(n){return n&&n[0]!=="?"?"?"+n:n}var Wc=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>O(Uw),providedIn:"root"})}}return n})(),cN=new z(""),Uw=(()=>{class n extends Wc{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(Rt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Vw(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Ar(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Ar(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Ar(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Z(Fw),Z(cN,8))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var to=(()=>{class n{constructor(t){this._subject=new it,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=dN(xw(Mw(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ar(r))}normalize(t){return n.stripTrailingSlash(lN(this._basePath,Mw(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ar(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ar(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Ar}static{this.joinWithSlash=Vw}static{this.stripTrailingSlash=xw}static{this.\u0275fac=function(r){return new(r||n)(Z(Wc))}}static{this.\u0275prov=U({token:n,factory:()=>uN(),providedIn:"root"})}}return n})();function uN(){return new to(Z(Wc))}function lN(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Mw(n){return n.replace(/\/index.html$/,"")}function dN(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function jw(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var rf=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Bw=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new rf(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let c=r.get(s);r.move(c,o),Pw(c,i)}});for(let i=0,s=r.length;i<s;i++){let c=r.get(i).context;c.index=i,c.count=s,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);Pw(s,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(At(Js),At(Gh),At(nf))}}static{this.\u0275dir=Rc({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function Pw(n,e){n.context.$implicit=e.item}var sf=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ac({type:n})}static{this.\u0275inj=bc({})}}return n})(),$w="browser",hN="server";function of(n){return n===hN}var Gc=class{};var uf=class extends zc{constructor(){super(...arguments),this.supportsDOMEvents=!0}},lf=class n extends uf{static makeCurrent(){Lw(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=pN();return t==null?null:gN(t)}resetBaseElement(){no=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return jw(document.cookie,e)}},no=null;function pN(){return no=no||document.querySelector("base"),no?no.getAttribute("href"):null}function gN(n){return new URL(n,document.baseURI).pathname}var mN=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),df=new z(""),Gw=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new B(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(Z(df),Z(we))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),Kc=class{constructor(e){this._doc=e}},af="ng-app-id",Ww=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=of(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${af}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(af),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(af,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(Z(Rt),Z(Ph),Z(kh,8),Z(Yn))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),cf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ff=/%COMP%/g,Kw="%COMP%",yN=`_nghost-${Kw}`,vN=`_ngcontent-${Kw}`,_N=!0,IN=new z("",{providedIn:"root",factory:()=>_N});function wN(n){return vN.replace(ff,n)}function EN(n){return yN.replace(ff,n)}function Qw(n,e){return e.map(t=>t.replace(ff,n))}var Hw=(()=>{class n{constructor(t,r,i,s,o,c,u,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=c,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=of(c),this.defaultRenderer=new ro(t,o,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Qt.ShadowDom&&(r=De(F({},r),{encapsulation:Qt.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Qc?i.applyToHost(t):i instanceof io&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,c=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case Qt.Emulated:s=new Qc(u,d,r,this.appId,f,o,c,g);break;case Qt.ShadowDom:return new hf(u,d,t,r,o,c,this.nonce,g);default:s=new io(u,d,r,f,o,c,g);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(Z(Gw),Z(Ww),Z(Ph),Z(IN),Z(Rt),Z(Yn),Z(we),Z(kh))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),ro=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(cf[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(qw(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(qw(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new B(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=cf[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=cf[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(br.DashCase|br.Important)?e.style.setProperty(t,r,i&br.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&br.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Ai().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function qw(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var hf=class extends ro{constructor(e,t,r,i,s,o,c,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=Qw(i.id,i.styles);for(let f of d){let g=document.createElement("style");c&&g.setAttribute("nonce",c),g.textContent=f,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},io=class extends ro{constructor(e,t,r,i,s,o,c,u){super(e,s,o,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?Qw(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Qc=class extends io{constructor(e,t,r,i,s,o,c,u){let d=i+"-"+r.id;super(e,t,r,s,o,c,u,d),this.contentAttr=wN(d),this.hostAttr=EN(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},DN=(()=>{class n extends Kc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(Z(Rt))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),zw=["alt","control","meta","shift"],TN={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bN={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},CN=(()=>{class n extends Kc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ai().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),o="code."),zw.forEach(d=>{let f=r.indexOf(d);f>-1&&(r.splice(f,1),o+=d+".")}),o+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=TN[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),zw.forEach(o=>{if(o!==i){let c=bN[o];c(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(Z(Rt))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})();function Yw(n,e){return Nw(F({rootComponent:n},SN(e)))}function SN(n){return{appProviders:[...MN,...n?.providers??[]],platformProviders:xN}}function AN(){lf.makeCurrent()}function RN(){return new vn}function NN(){return PI(document),document}var xN=[{provide:Yn,useValue:$w},{provide:Oh,useValue:AN,multi:!0},{provide:Rt,useFactory:NN,deps:[]}];var MN=[{provide:Nc,useValue:"root"},{provide:vn,useFactory:RN,deps:[]},{provide:df,useClass:DN,multi:!0,deps:[Rt,we,Yn]},{provide:df,useClass:CN,multi:!0,deps:[Rt]},Hw,Ww,Gw,{provide:bi,useExisting:Hw},{provide:Gc,useClass:mN,deps:[]},[]];var Zw=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(Z(Rt))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var J="primary",Eo=Symbol("RouteTitle"),vf=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Oi(n){return new vf(n)}function ON(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],c=n[s];if(o[0]===":")i[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function kN(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!en(n[t],e[t]))return!1;return!0}function en(n,e){let t=n?_f(n):void 0,r=e?_f(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!sE(n[i],e[i]))return!1;return!0}function _f(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function sE(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function oE(n){return n.length>0?n[n.length-1]:null}function Zn(n){return _d(n)?n:Xs(n)?Me(Promise.resolve(n)):Q(n)}var LN={exact:cE,subset:uE},aE={exact:FN,subset:VN,ignored:()=>!0};function Jw(n,e,t){return LN[t.paths](n.root,e.root,t.matrixParams)&&aE[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function FN(n,e){return en(n,e)}function cE(n,e,t){if(!Nr(n.segments,e.segments)||!Jc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!cE(n.children[r],e.children[r],t))return!1;return!0}function VN(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>sE(n[t],e[t]))}function uE(n,e,t){return lE(n,e,e.segments,t)}function lE(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Nr(i,t)||e.hasChildren()||!Jc(i,t,r))}else if(n.segments.length===t.length){if(!Nr(n.segments,t)||!Jc(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!uE(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Nr(n.segments,i)||!Jc(n.segments,i,r)||!n.children[J]?!1:lE(n.children[J],e,s,r)}}function Jc(n,e,t){return e.every((r,i)=>aE[t](n[i].parameters,r.parameters))}var Dn=class{constructor(e=new pe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Oi(this.queryParams),this._queryParamMap}toString(){return BN.serialize(this)}},pe=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xc(this)}},Rr=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Oi(this.parameters),this._parameterMap}toString(){return hE(this)}};function UN(n,e){return Nr(n,e)&&n.every((t,r)=>en(t.parameters,e[r].parameters))}function Nr(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function jN(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===J&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==J&&(t=t.concat(e(i,r)))}),t}var zf=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>new ho,providedIn:"root"})}}return n})(),ho=class{parse(e){let t=new wf(e);return new Dn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${so(e.root,!0)}`,r=qN(e.queryParams),i=typeof e.fragment=="string"?`#${$N(e.fragment)}`:"";return`${t}${r}${i}`}},BN=new ho;function Xc(n){return n.segments.map(e=>hE(e)).join("/")}function so(n,e){if(!n.hasChildren())return Xc(n);if(e){let t=n.children[J]?so(n.children[J],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==J&&r.push(`${i}:${so(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=jN(n,(r,i)=>i===J?[so(n.children[J],!1)]:[`${i}:${so(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[J]!=null?`${Xc(n)}/${t[0]}`:`${Xc(n)}/(${t.join("//")})`}}function dE(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yc(n){return dE(n).replace(/%3B/gi,";")}function $N(n){return encodeURI(n)}function If(n){return dE(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function eu(n){return decodeURIComponent(n)}function Xw(n){return eu(n.replace(/\+/g,"%20"))}function hE(n){return`${If(n.path)}${HN(n.parameters)}`}function HN(n){return Object.entries(n).map(([e,t])=>`;${If(e)}=${If(t)}`).join("")}function qN(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Yc(t)}=${Yc(i)}`).join("&"):`${Yc(t)}=${Yc(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var zN=/^[^\/()?;#]+/;function pf(n){let e=n.match(zN);return e?e[0]:""}var GN=/^[^\/()?;=#]+/;function WN(n){let e=n.match(GN);return e?e[0]:""}var KN=/^[^=?&#]+/;function QN(n){let e=n.match(KN);return e?e[0]:""}var YN=/^[^&#]+/;function ZN(n){let e=n.match(YN);return e?e[0]:""}var wf=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new pe([],{}):new pe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[J]=new pe(e,t)),r}parseSegment(){let e=pf(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new B(4009,!1);return this.capture(e),new Rr(eu(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=WN(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=pf(this.remaining);i&&(r=i,this.capture(r))}e[eu(t)]=eu(r)}parseQueryParam(e){let t=QN(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=ZN(this.remaining);o&&(r=o,this.capture(r))}let i=Xw(t),s=Xw(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=pf(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new B(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=J);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[J]:new pe([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new B(4011,!1)}};function fE(n){return n.segments.length>0?new pe([],{[J]:n}):n}function pE(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=pE(i);if(r===J&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new pe(n.segments,e);return JN(t)}function JN(n){if(n.numberOfChildren===1&&n.children[J]){let e=n.children[J];return new pe(n.segments.concat(e.segments),e.children)}return n}function fo(n){return n instanceof Dn}function XN(n,e,t=null,r=null){let i=gE(n);return mE(i,e,t,r)}function gE(n){let e;function t(s){let o={};for(let u of s.children){let d=t(u);o[u.outlet]=d}let c=new pe(s.url,o);return s===n&&(e=c),c}let r=t(n.root),i=fE(r);return e??i}function mE(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return gf(i,i,i,t,r);let s=ex(e);if(s.toRoot())return gf(i,i,new pe([],{}),t,r);let o=tx(s,i,n),c=o.processChildren?co(o.segmentGroup,o.index,s.commands):vE(o.segmentGroup,o.index,s.commands);return gf(i,o.segmentGroup,c,t,r)}function tu(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function po(n){return typeof n=="object"&&n!=null&&n.outlets}function gf(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([u,d])=>{s[u]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`});let o;n===e?o=t:o=yE(n,e,t);let c=fE(pE(o));return new Dn(c,s,i)}function yE(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=yE(s,e,t)}),new pe(n.segments,r)}var nu=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&tu(r[0]))throw new B(4003,!1);let i=r.find(po);if(i&&i!==oE(r))throw new B(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function ex(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new nu(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([u,d])=>{c[u]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new nu(t,e,r)}var xi=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function tx(n,e,t){if(n.isAbsolute)return new xi(e,!0,0);if(!t)return new xi(e,!1,NaN);if(t.parent===null)return new xi(t,!0,0);let r=tu(n.commands[0])?0:1,i=t.segments.length-1+r;return nx(t,i,n.numberOfDoubleDots)}function nx(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new B(4005,!1);i=r.segments.length}return new xi(r,!1,i-s)}function rx(n){return po(n[0])?n[0].outlets:{[J]:n}}function vE(n,e,t){if(n??=new pe([],{}),n.segments.length===0&&n.hasChildren())return co(n,e,t);let r=ix(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new pe(n.segments.slice(0,r.pathIndex),{});return s.children[J]=new pe(n.segments.slice(r.pathIndex),n.children),co(s,0,i)}else return r.match&&i.length===0?new pe(n.segments,{}):r.match&&!n.hasChildren()?Ef(n,e,t):r.match?co(n,0,i):Ef(n,e,t)}function co(n,e,t){if(t.length===0)return new pe(n.segments,{});{let r=rx(t),i={};if(Object.keys(r).some(s=>s!==J)&&n.children[J]&&n.numberOfChildren===1&&n.children[J].segments.length===0){let s=co(n.children[J],e,t);return new pe(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=vE(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new pe(n.segments,i)}}function ix(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],c=t[r];if(po(c))break;let u=`${c}`,d=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&d&&typeof d=="object"&&d.outlets===void 0){if(!tE(u,d,o))return s;r+=2}else{if(!tE(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ef(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(po(s)){let u=sx(s.outlets);return new pe(r,u)}if(i===0&&tu(t[0])){let u=n.segments[e];r.push(new Rr(u.path,eE(t[0]))),i++;continue}let o=po(s)?s.outlets[J]:`${s}`,c=i<t.length-1?t[i+1]:null;o&&c&&tu(c)?(r.push(new Rr(o,eE(c))),i+=2):(r.push(new Rr(o,{})),i++)}return new pe(r,{})}function sx(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Ef(new pe([],{}),0,r))}),e}function eE(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function tE(n,e,t){return n==t.path&&en(e,t.parameters)}var uo="imperative",Ge=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ge||{}),Nt=class{constructor(e,t){this.id=e,this.url=t}},go=class extends Nt{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Ge.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},xr=class extends Nt{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Ge.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},yt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(yt||{}),Df=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Df||{}),En=class extends Nt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ge.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Mr=class extends Nt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ge.NavigationSkipped}},mo=class extends Nt{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Ge.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ru=class extends Nt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ge.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tf=class extends Nt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ge.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bf=class extends Nt{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Ge.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Cf=class extends Nt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ge.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sf=class extends Nt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ge.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Af=class{constructor(e){this.route=e,this.type=Ge.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Rf=class{constructor(e){this.route=e,this.type=Ge.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Nf=class{constructor(e){this.snapshot=e,this.type=Ge.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xf=class{constructor(e){this.snapshot=e,this.type=Ge.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mf=class{constructor(e){this.snapshot=e,this.type=Ge.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pf=class{constructor(e){this.snapshot=e,this.type=Ge.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var yo=class{},ki=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function ox(n,e){return n.providers&&!n._injector&&(n._injector=Kh(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Ht(n){return n.outlet||J}function ax(n,e){let t=n.filter(r=>Ht(r)===e);return t.push(...n.filter(r=>Ht(r)!==e)),t}function Do(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Of=class{get injector(){return Do(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new lu(this.rootInjector),this.attachRef=null}},lu=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Of(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(Z(St))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),iu=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=kf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=kf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Lf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Lf(e,this._root).map(t=>t.value)}};function kf(n,e){if(n===e.value)return e;for(let t of e.children){let r=kf(n,t);if(r)return r}return null}function Lf(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Lf(n,t);if(r.length)return r.unshift(e),r}return[]}var mt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ni(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var su=class extends iu{constructor(e,t){super(e),this.snapshot=t,Gf(this,e)}toString(){return this.snapshot.toString()}};function _E(n){let e=cx(n),t=new ze([new Rr("",{})]),r=new ze({}),i=new ze({}),s=new ze({}),o=new ze(""),c=new Li(t,r,s,o,i,J,n,e.root);return c.snapshot=e.root,new su(new mt(c,[]),e)}function cx(n){let e={},t={},r={},i="",s=new Mi([],e,r,i,t,J,n,null,{});return new au("",new mt(s,[]))}var Li=class{constructor(e,t,r,i,s,o,c,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(te(d=>d[Eo]))??Q(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(te(e=>Oi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(te(e=>Oi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ou(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),n.params),data:F(F({},e.data),n.data),resolve:F(F(F(F({},n.data),e.data),i?.data),n._resolvedData)}:r={params:F({},n.params),data:F({},n.data),resolve:F(F({},n.data),n._resolvedData??{})},i&&wE(i)&&(r.resolve[Eo]=i.title),r}var Mi=class{get title(){return this.data?.[Eo]}constructor(e,t,r,i,s,o,c,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=c,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Oi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Oi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},au=class extends iu{constructor(e,t){super(t),this.url=e,Gf(this,t)}toString(){return IE(this._root)}};function Gf(n,e){e.value._routerState=n,e.children.forEach(t=>Gf(n,t))}function IE(n){let e=n.children.length>0?` { ${n.children.map(IE).join(", ")} } `:"";return`${n.value}${e}`}function mf(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,en(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),en(e.params,t.params)||n.paramsSubject.next(t.params),kN(e.url,t.url)||n.urlSubject.next(t.url),en(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ff(n,e){let t=en(n.params,e.params)&&UN(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Ff(n.parent,e.parent))}function wE(n){return typeof n.title=="string"||n.title===null}var ux=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=J,this.activateEvents=new it,this.deactivateEvents=new it,this.attachEvents=new it,this.detachEvents=new it,this.parentContexts=O(lu),this.location=O(Js),this.changeDetector=O(eo),this.inputBinder=O(Wf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new B(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new B(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new B(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new B(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new Vf(t,c,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Rc({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Pc]})}}return n})(),Vf=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Li?this.route:e===lu?this.childContexts:this.parent.get(e,t)}},Wf=new z("");function lx(n,e,t){let r=vo(n,e._root,t?t._root:void 0);return new su(r,e)}function vo(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=dx(n,e,t);return new mt(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>vo(n,c)),o}}let r=hx(e.value),i=e.children.map(s=>vo(n,s));return new mt(r,i)}}function dx(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return vo(n,r,i);return vo(n,r)})}function hx(n){return new Li(new ze(n.url),new ze(n.params),new ze(n.queryParams),new ze(n.fragment),new ze(n.data),n.outlet,n.component,n)}var _o=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},EE="ngNavigationCancelingError";function cu(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=fo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=DE(!1,yt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function DE(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[EE]=!0,t.cancellationCode=e,t}function fx(n){return TE(n)&&fo(n.url)}function TE(n){return!!n&&n[EE]}var px=(n,e,t,r)=>te(i=>(new Uf(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Uf=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),mf(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ni(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ni(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ni(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ni(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Pf(s.value.snapshot))}),e.children.length&&this.forwardEvent(new xf(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(mf(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),mf(c.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},uu=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Pi=class{constructor(e,t){this.component=e,this.route=t}};function gx(n,e,t){let r=n._root,i=e?e._root:null;return oo(r,i,t,[r.value])}function mx(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Vi(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!v_(n)?n:e.get(n):r}function oo(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ni(e);return n.children.forEach(o=>{yx(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>lo(c,t.getContext(o),i)),i}function yx(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=vx(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new uu(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?oo(n,e,c?c.children:null,r,i):oo(n,e,t,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Pi(c.outlet.component,o))}else o&&lo(e,c,i),i.canActivateChecks.push(new uu(r)),s.component?oo(n,null,c?c.children:null,r,i):oo(n,null,t,r,i);return i}function vx(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Nr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Nr(n.url,e.url)||!en(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ff(n,e)||!en(n.queryParams,e.queryParams);case"paramsChange":default:return!Ff(n,e)}}function lo(n,e,t){let r=Ni(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?lo(o,e.children.getContext(s),t):lo(o,null,t):lo(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Pi(e.outlet.component,i)):t.canDeactivateChecks.push(new Pi(null,i)):t.canDeactivateChecks.push(new Pi(null,i))}function To(n){return typeof n=="function"}function _x(n){return typeof n=="boolean"}function Ix(n){return n&&To(n.canLoad)}function wx(n){return n&&To(n.canActivate)}function Ex(n){return n&&To(n.canActivateChild)}function Dx(n){return n&&To(n.canDeactivate)}function Tx(n){return n&&To(n.canMatch)}function bE(n){return n instanceof gn||n?.name==="EmptyError"}var Zc=Symbol("INITIAL_VALUE");function Fi(){return Ft(n=>za(n.map(e=>e.pipe(mn(1),Qa(Zc)))).pipe(te(e=>{for(let t of e)if(t!==!0){if(t===Zc)return Zc;if(t===!1||bx(t))return t}return!0}),Et(e=>e!==Zc),mn(1)))}function bx(n){return fo(n)||n instanceof _o}function Cx(n,e){return ke(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?Q(De(F({},t),{guardsResult:!0})):Sx(o,r,i,n).pipe(ke(c=>c&&_x(c)?Ax(r,s,n,e):Q(c)),te(c=>De(F({},t),{guardsResult:c})))})}function Sx(n,e,t,r){return Me(n).pipe(ke(i=>Px(i.component,i.route,t,e,r)),Gt(i=>i!==!0,!0))}function Ax(n,e,t,r){return Me(e).pipe(di(i=>li(Nx(i.route.parent,r),Rx(i.route,r),Mx(n,i.path,t),xx(n,i.route,t))),Gt(i=>i!==!0,!0))}function Rx(n,e){return n!==null&&e&&e(new Mf(n)),Q(!0)}function Nx(n,e){return n!==null&&e&&e(new Nf(n)),Q(!0)}function xx(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Q(!0);let i=r.map(s=>Ga(()=>{let o=Do(e)??t,c=Vi(s,o),u=wx(c)?c.canActivate(e,n):_n(o,()=>c(e,n));return Zn(u).pipe(Gt())}));return Q(i).pipe(Fi())}function Mx(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>mx(o)).filter(o=>o!==null).map(o=>Ga(()=>{let c=o.guards.map(u=>{let d=Do(o.node)??t,f=Vi(u,d),g=Ex(f)?f.canActivateChild(r,n):_n(d,()=>f(r,n));return Zn(g).pipe(Gt())});return Q(c).pipe(Fi())}));return Q(s).pipe(Fi())}function Px(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Q(!0);let o=s.map(c=>{let u=Do(e)??i,d=Vi(c,u),f=Dx(d)?d.canDeactivate(n,e,t,r):_n(u,()=>d(n,e,t,r));return Zn(f).pipe(Gt())});return Q(o).pipe(Fi())}function Ox(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Q(!0);let s=i.map(o=>{let c=Vi(o,n),u=Ix(c)?c.canLoad(e,t):_n(n,()=>c(e,t));return Zn(u)});return Q(s).pipe(Fi(),CE(r))}function CE(n){return Na(Le(e=>{if(typeof e!="boolean")throw cu(n,e)}),te(e=>e===!0))}function kx(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Q(!0);let s=i.map(o=>{let c=Vi(o,n),u=Tx(c)?c.canMatch(e,t):_n(n,()=>c(e,t));return Zn(u)});return Q(s).pipe(Fi(),CE(r))}var Io=class{constructor(e){this.segmentGroup=e||null}},wo=class extends Error{constructor(e){super(),this.urlTree=e}};function Ri(n){return ui(new Io(n))}function Lx(n){return ui(new B(4e3,!1))}function Fx(n){return ui(DE(!1,yt.GuardRejected))}var jf=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Q(r);if(i.numberOfChildren>1||!i.children[J])return Lx(`${e.redirectTo}`);i=i.children[J]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let c=t,{queryParams:u,fragment:d,routeConfig:f,url:g,outlet:y,params:I,data:A,title:x}=i,R=_n(s,()=>c({params:I,data:A,queryParams:u,fragment:d,routeConfig:f,url:g,outlet:y,title:x}));if(R instanceof Dn)throw new wo(R);t=R}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new wo(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Dn(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);r[i]=t[c]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([c,u])=>{o[c]=this.createSegmentGroup(e,u,r,i)}),new pe(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new B(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Bf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Vx(n,e,t,r,i){let s=SE(n,e,t);return s.matched?(r=ox(e,r),kx(r,e,t,i).pipe(te(o=>o===!0?s:F({},Bf)))):Q(s)}function SE(n,e,t){if(e.path==="**")return Ux(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?F({},Bf):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||ON)(t,n,e);if(!i)return F({},Bf);let s={};Object.entries(i.posParams??{}).forEach(([c,u])=>{s[c]=u.path});let o=i.consumed.length>0?F(F({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Ux(n){return{matched:!0,parameters:n.length>0?oE(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function nE(n,e,t,r){return t.length>0&&$x(n,t,r)?{segmentGroup:new pe(e,Bx(r,new pe(t,n.children))),slicedSegments:[]}:t.length===0&&Hx(n,t,r)?{segmentGroup:new pe(n.segments,jx(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new pe(n.segments,n.children),slicedSegments:t}}function jx(n,e,t,r){let i={};for(let s of t)if(du(n,e,s)&&!r[Ht(s)]){let o=new pe([],{});i[Ht(s)]=o}return F(F({},r),i)}function Bx(n,e){let t={};t[J]=e;for(let r of n)if(r.path===""&&Ht(r)!==J){let i=new pe([],{});t[Ht(r)]=i}return t}function $x(n,e,t){return t.some(r=>du(n,e,r)&&Ht(r)!==J)}function Hx(n,e,t){return t.some(r=>du(n,e,r))}function du(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function qx(n,e,t){return e.length===0&&!n.children[t]}var $f=class{};function zx(n,e,t,r,i,s,o="emptyOnly"){return new Hf(n,e,t,r,i,o,s).recognize()}var Gx=31,Hf=class{constructor(e,t,r,i,s,o,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new jf(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new B(4002,`'${e.segmentGroup}'`)}recognize(){let e=nE(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(te(({children:t,rootSnapshot:r})=>{let i=new mt(r,t),s=new au("",i),o=XN(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Mi([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),J,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,J,t).pipe(te(r=>({children:r,rootSnapshot:t})),Un(r=>{if(r instanceof wo)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Io?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(te(o=>o instanceof mt?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Me(s).pipe(di(o=>{let c=r.children[o],u=ax(t,o);return this.processSegmentGroup(e,u,c,o,i)}),Ka((o,c)=>(o.push(...c),o)),jn(null),Ed(),ke(o=>{if(o===null)return Ri(r);let c=AE(o);return Wx(c),Q(c)}))}processSegment(e,t,r,i,s,o,c){return Me(t).pipe(di(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,s,o,c).pipe(Un(d=>{if(d instanceof Io)return Q(null);throw d}))),Gt(u=>!!u),Un(u=>{if(bE(u))return qx(r,i,s)?Q(new $f):Ri(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,s,o,c,u){return Ht(r)!==o&&(o===J||!du(i,s,r))?Ri(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,u):Ri(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,c){let{matched:u,parameters:d,consumedSegments:f,positionalParamSegments:g,remainingSegments:y}=SE(t,i,s);if(!u)return Ri(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Gx&&(this.allowRedirects=!1));let I=new Mi(s,d,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,rE(i),Ht(i),i.component??i._loadedComponent??null,i,iE(i)),A=ou(I,c,this.paramsInheritanceStrategy);I.params=Object.freeze(A.params),I.data=Object.freeze(A.data);let x=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,g,I,e);return this.applyRedirects.lineralizeSegments(i,x).pipe(ke(R=>this.processSegment(e,r,t,R.concat(y),o,!1,c)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let c=Vx(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),c.pipe(Ft(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ft(({routes:d})=>{let f=r._loadedInjector??e,{parameters:g,consumedSegments:y,remainingSegments:I}=u,A=new Mi(y,g,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,rE(r),Ht(r),r.component??r._loadedComponent??null,r,iE(r)),x=ou(A,o,this.paramsInheritanceStrategy);A.params=Object.freeze(x.params),A.data=Object.freeze(x.data);let{segmentGroup:R,slicedSegments:L}=nE(t,y,I,d);if(L.length===0&&R.hasChildren())return this.processChildren(f,d,R,A).pipe(te(K=>new mt(A,K)));if(d.length===0&&L.length===0)return Q(new mt(A,[]));let H=Ht(r)===s;return this.processSegment(f,d,R,L,H?J:s,!0,A).pipe(te(K=>new mt(A,K instanceof mt?[K]:[])))}))):Ri(t)))}getChildConfig(e,t,r){return t.children?Q({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Q({routes:t._loadedRoutes,injector:t._loadedInjector}):Ox(e,t,r,this.urlSerializer).pipe(ke(i=>i?this.configLoader.loadChildren(e,t).pipe(Le(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):Fx(t))):Q({routes:[],injector:e})}};function Wx(n){n.sort((e,t)=>e.value.outlet===J?-1:t.value.outlet===J?1:e.value.outlet.localeCompare(t.value.outlet))}function Kx(n){let e=n.value.routeConfig;return e&&e.path===""}function AE(n){let e=[],t=new Set;for(let r of n){if(!Kx(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=AE(r.children);e.push(new mt(r.value,i))}return e.filter(r=>!t.has(r))}function rE(n){return n.data||{}}function iE(n){return n.resolve||{}}function Qx(n,e,t,r,i,s){return ke(o=>zx(n,e,t,r,o.extractedUrl,i,s).pipe(te(({state:c,tree:u})=>De(F({},o),{targetSnapshot:c,urlAfterRedirects:u}))))}function Yx(n,e){return ke(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Q(t);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let d of RE(u))o.add(d);let c=0;return Me(o).pipe(di(u=>s.has(u)?Zx(u,r,n,e):(u.data=ou(u,u.parent,n).resolve,Q(void 0))),Le(()=>c++),hi(1),ke(u=>c===o.size?Q(t):ft))})}function RE(n){let e=n.children.map(t=>RE(t)).flat();return[n,...e]}function Zx(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!wE(i)&&(s[Eo]=i.title),Jx(s,n,e,r).pipe(te(o=>(n._resolvedData=o,n.data=ou(n,n.parent,t).resolve,null)))}function Jx(n,e,t,r){let i=_f(n);if(i.length===0)return Q({});let s={};return Me(i).pipe(ke(o=>Xx(n[o],e,t,r).pipe(Gt(),Le(c=>{if(c instanceof _o)throw cu(new ho,c);s[o]=c}))),hi(1),wd(s),Un(o=>bE(o)?ft:ui(o)))}function Xx(n,e,t,r){let i=Do(e)??r,s=Vi(n,i),o=s.resolve?s.resolve(e,t):_n(i,()=>s(e,t));return Zn(o)}function yf(n){return Ft(e=>{let t=n(e);return t?Me(t).pipe(te(()=>e)):Q(e)})}var NE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===J);return r}getResolvedTitleForRoute(t){return t.data[Eo]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>O(eM),providedIn:"root"})}}return n})(),eM=(()=>{class n extends NE{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(Z(Zw))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Kf=new z("",{providedIn:"root",factory:()=>({})}),tM=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=je({type:n,selectors:[["ng-component"]],standalone:!0,features:[Be],decls:1,vars:0,template:function(r,i){r&1&&Ce(0,"router-outlet")},dependencies:[ux],encapsulation:2})}}return n})();function Qf(n){let e=n.children&&n.children.map(Qf),t=e?De(F({},n),{children:e}):F({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==J&&(t.component=tM),t}var Yf=new z(""),nM=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=O(ef)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Q(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Zn(t.loadComponent()).pipe(te(xE),Le(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),ks(()=>{this.componentLoaders.delete(t)})),i=new si(r,()=>new rt).pipe(ii());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=rM(r,this.compiler,t,this.onLoadEndListener).pipe(ks(()=>{this.childrenLoaders.delete(r)})),o=new si(s,()=>new rt).pipe(ii());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function rM(n,e,t,r){return Zn(n.loadChildren()).pipe(te(xE),ke(i=>i instanceof Ws||Array.isArray(i)?Q(i):Me(e.compileModuleAsync(i))),te(i=>{r&&r(n);let s,o,c=!1;return Array.isArray(i)?(o=i,c=!0):(s=i.create(t).injector,o=s.get(Yf,[],{optional:!0,self:!0}).flat()),{routes:o.map(Qf),injector:s}}))}function iM(n){return n&&typeof n=="object"&&"default"in n}function xE(n){return iM(n)?n.default:n}var Zf=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>O(sM),providedIn:"root"})}}return n})(),sM=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),oM=new z("");var aM=new z(""),cM=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new rt,this.transitionAbortSubject=new rt,this.configLoader=O(nM),this.environmentInjector=O(St),this.urlSerializer=O(zf),this.rootContexts=O(lu),this.location=O(to),this.inputBindingEnabled=O(Wf,{optional:!0})!==null,this.titleStrategy=O(NE),this.options=O(Kf,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=O(Zf),this.createViewTransition=O(oM,{optional:!0}),this.navigationErrorHandler=O(aM,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Q(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Af(i)),r=i=>this.events.next(new Rf(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(De(F(F({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new ze({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:uo,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Et(s=>s.id!==0),te(s=>De(F({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ft(s=>{let o=!1,c=!1;return Q(s).pipe(Ft(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",yt.SupersededByNewNavigation),ft;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?De(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!d&&f!=="reload"){let g="";return this.events.next(new Mr(u.id,this.urlSerializer.serialize(u.rawUrl),g,Df.IgnoredSameUrlNavigation)),u.resolve(!1),ft}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Q(u).pipe(Ft(g=>{let y=this.transitions?.getValue();return this.events.next(new go(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),y!==this.transitions?.getValue()?ft:Promise.resolve(g)}),Qx(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Le(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=De(F({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let y=new ru(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(y)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:g,extractedUrl:y,source:I,restoredState:A,extras:x}=u,R=new go(g,this.urlSerializer.serialize(y),I,A);this.events.next(R);let L=_E(this.rootComponentType).snapshot;return this.currentTransition=s=De(F({},u),{targetSnapshot:L,urlAfterRedirects:y,extras:De(F({},x),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,Q(s)}else{let g="";return this.events.next(new Mr(u.id,this.urlSerializer.serialize(u.extractedUrl),g,Df.IgnoredByUrlHandlingStrategy)),u.resolve(!1),ft}}),Le(u=>{let d=new Tf(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),te(u=>(this.currentTransition=s=De(F({},u),{guards:gx(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),Cx(this.environmentInjector,u=>this.events.next(u)),Le(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw cu(this.urlSerializer,u.guardsResult);let d=new bf(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),Et(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",yt.GuardRejected),!1)),yf(u=>{if(u.guards.canActivateChecks.length)return Q(u).pipe(Le(d=>{let f=new Cf(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Ft(d=>{let f=!1;return Q(d).pipe(Yx(this.paramsInheritanceStrategy,this.environmentInjector),Le({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",yt.NoDataFromResolver)}}))}),Le(d=>{let f=new Sf(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),yf(u=>{let d=f=>{let g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(Le(y=>{f.component=y}),te(()=>{})));for(let y of f.children)g.push(...d(y));return g};return za(d(u.targetSnapshot.root)).pipe(jn(null),mn(1))}),yf(()=>this.afterPreactivation()),Ft(()=>{let{currentSnapshot:u,targetSnapshot:d}=s,f=this.createViewTransition?.(this.environmentInjector,u.root,d.root);return f?Me(f).pipe(te(()=>s)):Q(s)}),te(u=>{let d=lx(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=De(F({},u),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),Le(()=>{this.events.next(new yo)}),px(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),mn(1),Le({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new xr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),Dd(this.transitionAbortSubject.pipe(Le(u=>{throw u}))),ks(()=>{!o&&!c&&this.cancelNavigationTransition(s,"",yt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Un(u=>{if(c=!0,TE(u))this.events.next(new En(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),fx(u)?this.events.next(new ki(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let d=new mo(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let f=_n(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(f instanceof _o){let{message:g,cancellationCode:y}=cu(this.urlSerializer,f);this.events.next(new En(s.id,this.urlSerializer.serialize(s.extractedUrl),g,y)),this.events.next(new ki(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(d);let g=t.errorHandler(u);s.resolve(!!g)}}catch(f){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(f)}}return ft}))}))}cancelNavigationTransition(t,r,i){let s=new En(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function uM(n){return n!==uo}var lM=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>O(dM),providedIn:"root"})}}return n})(),qf=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},dM=(()=>{class n extends qf{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Nh(n)))(i||n)}})()}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ME=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>O(hM),providedIn:"root"})}}return n})(),hM=(()=>{class n extends ME{constructor(){super(...arguments),this.location=O(to),this.urlSerializer=O(zf),this.options=O(Kf,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=O(Zf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Dn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=_E(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof go)this.stateMemento=this.createStateMemento();else if(t instanceof Mr)this.rawUrlTree=r.initialUrl;else if(t instanceof ru){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof yo?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof En&&(t.code===yt.GuardRejected||t.code===yt.NoDataFromResolver)?this.restoreHistory(r):t instanceof mo?this.restoreHistory(r,!0):t instanceof xr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Dn?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=F(F({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=F(F({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Nh(n)))(i||n)}})()}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ao=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(ao||{});function fM(n,e){n.events.pipe(Et(t=>t instanceof xr||t instanceof En||t instanceof mo||t instanceof Mr),te(t=>t instanceof xr||t instanceof Mr?ao.COMPLETE:(t instanceof En?t.code===yt.Redirect||t.code===yt.SupersededByNewNavigation:!1)?ao.REDIRECTING:ao.FAILED),Et(t=>t!==ao.REDIRECTING),mn(1)).subscribe(()=>{e()})}function pM(n){throw n}var gM={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},PE=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=O(qc),this.stateManager=O(ME),this.options=O(Kf,{optional:!0})||{},this.pendingTasks=O(Si),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=O(cM),this.urlSerializer=O(zf),this.location=O(to),this.urlHandlingStrategy=O(Zf),this._events=new rt,this.errorHandler=this.options.errorHandler||pM,this.navigated=!1,this.routeReuseStrategy=O(lM),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=O(Yf,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!O(Wf,{optional:!0}),this.eventsSubscription=new Ae,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof En&&r.code!==yt.Redirect&&r.code!==yt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof xr)this.navigated=!0;else if(r instanceof ki){let o=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||uM(i.source)},o);this.scheduleNavigation(c,uo,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}vM(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),uo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let u=F({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Qf),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:o,f=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":f=F(F({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let g;try{let y=i?i.snapshot:this.routerState.snapshot.root;g=gE(y)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),g=this.currentUrlTree.root}return mE(g,t,f,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=fo(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,uo,null,r)}navigate(t,r={skipLocationChange:!1}){return yM(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=F({},gM):r===!1?i=F({},mM):i=r,fo(t))return Jw(this.currentUrlTree,t,i);let s=this.parseUrl(t);return Jw(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let c,u,d;o?(c=o.resolve,u=o.reject,d=o.promise):d=new Promise((g,y)=>{c=g,u=y});let f=this.pendingTasks.add();return fM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function yM(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new B(4008,!1)}function vM(n){return!(n instanceof yo)&&!(n instanceof ki)}var _M=new z("");function Jf(n,...e){return Qn([{provide:Yf,multi:!0,useValue:n},[],{provide:Li,useFactory:IM,deps:[PE]},{provide:Xh,multi:!0,useFactory:wM},e.map(t=>t.\u0275providers)])}function IM(n){return n.routerState.root}function wM(){let n=O(jt);return e=>{let t=n.get(Sr);if(e!==t.components[0])return;let r=n.get(PE),i=n.get(EM);n.get(DM)===1&&r.initialNavigation(),n.get(TM,null,ee.Optional)?.setUpPreloading(),n.get(_M,null,ee.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var EM=new z("",{factory:()=>new rt}),DM=new z("",{providedIn:"root",factory:()=>1});var TM=new z("");var Xf=[];var kE=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},bM=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],c=n[t++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},LE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,c=o?n[i+1]:0,u=i+2<n.length,d=u?n[i+2]:0,f=s>>2,g=(s&3)<<4|c>>4,y=(c&15)<<2|d>>6,I=d&63;u||(I=64,o||(y=64)),r.push(t[f],t[g],t[y],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(kE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):bM(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||d==null||g==null)throw new tp;let y=s<<2|c>>4;if(r.push(y),d!==64){let I=c<<4&240|d>>2;if(r.push(I),g!==64){let A=d<<6&192|g;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},tp=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},CM=function(n){let e=kE(n);return LE.encodeByteArray(e,!0)},bo=function(n){return CM(n).replace(/\./g,"")},rp=function(n){try{return LE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function SM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var AM=()=>SM().__FIREBASE_DEFAULTS__,RM=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},NM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&rp(n[1]);return e&&JSON.parse(e)},fu=()=>{try{return AM()||RM()||NM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},FE=n=>{var e,t;return(t=(e=fu())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},VE=n=>{let e=FE(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},ip=()=>{var n;return(n=fu())===null||n===void 0?void 0:n.config},UE=n=>{var e;return(e=fu())===null||e===void 0?void 0:e[`_${n}`]};var hu=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function jE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[bo(JSON.stringify(t)),bo(JSON.stringify(o)),""].join(".")}function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function xM(){var n;let e=(n=fu())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $E(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HE(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function qE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zE(){return!xM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sp(){try{return typeof indexedDB=="object"}catch{return!1}}function GE(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var MM="FirebaseError",xt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=MM,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tn.prototype.create)}},Tn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?PM(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new xt(i,c,r)}};function PM(n,e){return n.replace(OM,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var OM=/\{\$([^}]+)}/g;function Ui(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(OE(s)&&OE(o)){if(!Ui(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function OE(n){return n!==null&&typeof n=="object"}function op(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function WE(n,e){let t=new np(n,e);return t.subscribe.bind(t)}var np=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");kM(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=ep),i.error===void 0&&(i.error=ep),i.complete===void 0&&(i.complete=ep);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function kM(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ep(){}var vH=4*60*60*1e3;function at(n){return n&&n._delegate?n._delegate:n}var Mt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Pr="[DEFAULT]";var ap=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new hu;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(FM(e))try{this.getOrInitializeService({instanceIdentifier:Pr})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Pr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return C(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Pr){return this.instances.has(e)}getOptions(e=Pr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LM(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Pr){return this.component?this.component.multipleInstances?e:Pr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function LM(n){return n===Pr?void 0:n}function FM(n){return n.instantiationMode==="EAGER"}var pu=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new ap(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var VM=[],ne=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ne||{}),UM={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},jM=ne.INFO,BM={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},$M=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=BM[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Jn=class{constructor(e){this.name=e,this._logLevel=jM,this._logHandler=$M,this._userLogHandler=null,VM.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}};var HM=(n,e)=>e.some(t=>n instanceof t),KE,QE;function qM(){return KE||(KE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zM(){return QE||(QE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var YE=new WeakMap,up=new WeakMap,ZE=new WeakMap,cp=new WeakMap,dp=new WeakMap;function GM(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(tn(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&YE.set(t,n)}).catch(()=>{}),dp.set(e,n),e}function WM(n){if(up.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});up.set(n,e)}var lp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return up.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ZE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return tn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function JE(n){lp=n(lp)}function KM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(gu(this),e,...t);return ZE.set(r,e.sort?e.sort():[e]),tn(r)}:zM().includes(n)?function(...e){return n.apply(gu(this),e),tn(YE.get(this))}:function(...e){return tn(n.apply(gu(this),e))}}function QM(n){return typeof n=="function"?KM(n):(n instanceof IDBTransaction&&WM(n),HM(n,qM())?new Proxy(n,lp):n)}function tn(n){if(n instanceof IDBRequest)return GM(n);if(cp.has(n))return cp.get(n);let e=QM(n);return e!==n&&(cp.set(n,e),dp.set(e,n)),e}var gu=n=>dp.get(n);function eD(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),c=tn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(tn(o.result),u.oldVersion,u.newVersion,tn(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var YM=["get","getKey","getAll","getAllKeys","count"],ZM=["put","add","delete","clear"],hp=new Map;function XE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hp.get(e))return hp.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=ZM.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||YM.includes(t)))return;let s=function(o,...c){return C(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),d=u.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[t](...c),i&&u.done]))[0]})};return hp.set(e,s),s}JE(n=>De(F({},n),{get:(e,t,r)=>XE(e,t)||n.get(e,t,r),has:(e,t)=>!!XE(e,t)||n.has(e,t)}));var pp=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(JM(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function JM(n){let e=n.getComponent();return e?.type==="VERSION"}var gp="@firebase/app",tD="0.10.13";var bn=new Jn("@firebase/app"),XM="@firebase/app-compat",eP="@firebase/analytics-compat",tP="@firebase/analytics",nP="@firebase/app-check-compat",rP="@firebase/app-check",iP="@firebase/auth",sP="@firebase/auth-compat",oP="@firebase/database",aP="@firebase/data-connect",cP="@firebase/database-compat",uP="@firebase/functions",lP="@firebase/functions-compat",dP="@firebase/installations",hP="@firebase/installations-compat",fP="@firebase/messaging",pP="@firebase/messaging-compat",gP="@firebase/performance",mP="@firebase/performance-compat",yP="@firebase/remote-config",vP="@firebase/remote-config-compat",_P="@firebase/storage",IP="@firebase/storage-compat",wP="@firebase/firestore",EP="@firebase/vertexai-preview",DP="@firebase/firestore-compat",TP="firebase",bP="10.14.1";var mp="[DEFAULT]",CP={[gp]:"fire-core",[XM]:"fire-core-compat",[tP]:"fire-analytics",[eP]:"fire-analytics-compat",[rP]:"fire-app-check",[nP]:"fire-app-check-compat",[iP]:"fire-auth",[sP]:"fire-auth-compat",[oP]:"fire-rtdb",[aP]:"fire-data-connect",[cP]:"fire-rtdb-compat",[uP]:"fire-fn",[lP]:"fire-fn-compat",[dP]:"fire-iid",[hP]:"fire-iid-compat",[fP]:"fire-fcm",[pP]:"fire-fcm-compat",[gP]:"fire-perf",[mP]:"fire-perf-compat",[yP]:"fire-rc",[vP]:"fire-rc-compat",[_P]:"fire-gcs",[IP]:"fire-gcs-compat",[wP]:"fire-fst",[DP]:"fire-fst-compat",[EP]:"fire-vertex","fire-js":"fire-js",[TP]:"fire-js-all"};var Co=new Map,SP=new Map,yp=new Map;function nD(n,e){try{n.container.addComponent(e)}catch(t){bn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function er(n){let e=n.name;if(yp.has(e))return bn.debug(`There were multiple attempts to register component ${e}.`),!1;yp.set(e,n);for(let t of Co.values())nD(t,n);for(let t of SP.values())nD(t,n);return!0}function wp(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ji(n){return n.settings!==void 0}var AP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xn=new Tn("app","Firebase",AP);var vp=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xn.create("app-deleted",{appName:this._name})}};var Bi=bP;function Ep(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:mp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Xn.create("bad-app-name",{appName:String(i)});if(t||(t=ip()),!t)throw Xn.create("no-options");let s=Co.get(i);if(s){if(Ui(t,s.options)&&Ui(r,s.config))return s;throw Xn.create("duplicate-app",{appName:i})}let o=new pu(i);for(let u of yp.values())o.addComponent(u);let c=new vp(t,r,o);return Co.set(i,c),c}function Ao(n=mp){let e=Co.get(n);if(!e&&n===mp&&ip())return Ep();if(!e)throw Xn.create("no-app",{appName:n});return e}function mu(){return Array.from(Co.values())}function $e(n,e,t){var r;let i=(r=CP[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bn.warn(c.join(" "));return}er(new Mt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var RP="firebase-heartbeat-database",NP=1,So="firebase-heartbeat-store",fp=null;function oD(){return fp||(fp=eD(RP,NP,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(So)}catch(t){console.warn(t)}}}}).catch(n=>{throw Xn.create("idb-open",{originalErrorMessage:n.message})})),fp}function xP(n){return C(this,null,function*(){try{let t=(yield oD()).transaction(So),r=yield t.objectStore(So).get(aD(n));return yield t.done,r}catch(e){if(e instanceof xt)bn.warn(e.message);else{let t=Xn.create("idb-get",{originalErrorMessage:e?.message});bn.warn(t.message)}}})}function rD(n,e){return C(this,null,function*(){try{let r=(yield oD()).transaction(So,"readwrite");yield r.objectStore(So).put(e,aD(n)),yield r.done}catch(t){if(t instanceof xt)bn.warn(t.message);else{let r=Xn.create("idb-set",{originalErrorMessage:t?.message});bn.warn(r.message)}}})}function aD(n){return`${n.name}!${n.options.appId}`}var MP=1024,PP=30*24*60*60*1e3,_p=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Ip(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return C(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=iD();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=PP}),this._storage.overwrite(this._heartbeatsCache))}catch(r){bn.warn(r)}})}getHeartbeatsHeader(){return C(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=iD(),{heartbeatsToSend:r,unsentEntries:i}=OP(this._heartbeatsCache.heartbeats),s=bo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return bn.warn(t),""}})}};function iD(){return new Date().toISOString().substring(0,10)}function OP(n,e=MP){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),sD(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),sD(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Ip=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return C(this,null,function*(){return sp()?GE().then(()=>!0).catch(()=>!1):!1})}read(){return C(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield xP(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return C(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return rD(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return C(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return rD(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function sD(n){return bo(JSON.stringify({version:2,heartbeats:n})).length}function kP(n){er(new Mt("platform-logger",e=>new pp(e),"PRIVATE")),er(new Mt("heartbeat",e=>new _p(e),"PRIVATE")),$e(gp,tD,n),$e(gp,tD,"esm2017"),$e("fire-js","")}kP("");var LP="firebase",FP="10.14.1";$e(LP,FP,"app");var Hi=new Kn("ANGULARFIRE2_VERSION");function Tp(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var No=(n,e)=>{let t=e?[e]:mu(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Ro=class{constructor(){return No(VP)}},VP="app-check";function $i(){}var yu=class{zone;delegate;constructor(e,t=yd){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},Dp=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",$i,{},$i,$i)),t.pipe(Le({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},xo=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new yu(Zone.current)),this.insideAngular=t.run(()=>new yu(Zone.current,md)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Z(we))};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vu(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function UP(n){return vu().ngZone.runOutsideAngular(()=>n())}function Or(n){return vu().ngZone.run(()=>n())}function jP(n){return BP(vu())(n)}function BP(n){return function(t){return t=t.lift(new Dp(n.ngZone)),t.pipe(Vn(n.outsideAngular),Fn(n.insideAngular))}}var $P=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Or(()=>n.apply(void 0,r))},Pt=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=Or(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",$i,{},$i,$i))),r[s]=$P(r[s],t));let i=UP(()=>n.apply(this,r));if(!e)if(i instanceof se){let s=vu();return i.pipe(Vn(s.outsideAngular),Fn(s.insideAngular))}else return Or(()=>i);return i instanceof se?i.pipe(jP):i instanceof Promise?Or(()=>new Promise((s,o)=>i.then(c=>Or(()=>s(c)),c=>Or(()=>o(c))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Or(()=>i)};var kr=class{constructor(e){return e}},Mo=class{constructor(){return mu()}};function HP(n){return n&&n.length===1?n[0]:new kr(Ao())}var bp=new z("angularfire2._apps"),qP={provide:kr,useFactory:HP,deps:[[new Bt,bp]]},zP={provide:Mo,deps:[[new Bt,bp]]};function GP(n){return(e,t)=>{let r=t.get(Yn);$e("angularfire",Hi.full,"core"),$e("angularfire",Hi.full,"app"),$e("angular",Ew.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new kr(i)}}function cD(n,...e){return Qn([qP,zP,{provide:bp,useFactory:GP(n),multi:!0,deps:[we,jt,xo,...e]}])}var uD=Pt(Ep,!0);function yD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var vD=yD,_D=new Tn("auth","Firebase",yD());var Eu=new Jn("@firebase/auth");function KP(n,...e){Eu.logLevel<=ne.WARN&&Eu.warn(`Auth (${Bi}): ${n}`,...e)}function Iu(n,...e){Eu.logLevel<=ne.ERROR&&Eu.error(`Auth (${Bi}): ${n}`,...e)}function lD(n,...e){throw Fp(n,...e)}function Lp(n,...e){return Fp(n,...e)}function ID(n,e,t){let r=Object.assign(Object.assign({},vD()),{[e]:t});return new Tn("auth","Firebase",r).create(e,{appName:n.name})}function wu(n){return ID(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Fp(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return _D.create(n,...e)}function he(n,e,...t){if(!n)throw Fp(e,...t)}function Po(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Iu(e),new Error(e)}function Du(n,e){n||Po(e)}function QP(){return dD()==="http:"||dD()==="https:"}function dD(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function YP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QP()||HE()||"connection"in navigator)?navigator.onLine:!0}function ZP(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Fr=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Du(t>e,"Short delay should be less than long delay!"),this.isMobile=BE()||qE()}get(){return YP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function JP(n,e){Du(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Tu=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Po("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Po("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Po("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var XP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var eO=new Fr(3e4,6e4);function wD(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Au(s,o,c,u){return C(this,arguments,function*(n,e,t,r,i={}){return ED(n,i,()=>C(this,null,function*(){let d={},f={};r&&(e==="GET"?f=r:d={body:JSON.stringify(r)});let g=op(Object.assign({key:n.config.apiKey},f)).slice(1),y=yield n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);let I=Object.assign({method:e,headers:y},d);return $E()||(I.referrerPolicy="no-referrer"),Tu.fetch()(DD(n,n.config.apiHost,t,g),I)}))})}function ED(n,e,t){return C(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},XP),e);try{let i=new Ap(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw _u(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw _u(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw _u(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw _u(n,"user-disabled",o);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw ID(n,f,d);lD(n,f)}}catch(i){if(i instanceof xt)throw i;lD(n,"network-request-failed",{message:String(i)})}})}function DD(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?JP(n.config,i):`${n.config.apiScheme}://${i}`}var Ap=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Lp(this.auth,"network-request-failed")),eO.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function _u(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Lp(n,e,r);return i.customData._tokenResponse=t,i}function tO(n,e){return C(this,null,function*(){return Au(n,"POST","/v1/accounts:delete",e)})}function TD(n,e){return C(this,null,function*(){return Au(n,"POST","/v1/accounts:lookup",e)})}function Oo(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Vp(n,e=!1){return C(this,null,function*(){let t=at(n),r=yield t.getIdToken(e),i=bD(r);he(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Oo(Cp(i.auth_time)),issuedAtTime:Oo(Cp(i.iat)),expirationTime:Oo(Cp(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Cp(n){return Number(n)*1e3}function bD(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Iu("JWT malformed, contained fewer than 3 sections"),null;try{let i=rp(t);return i?JSON.parse(i):(Iu("Failed to decode base64 JWT payload"),null)}catch(i){return Iu("Caught error parsing JWT payload as JSON",i?.toString()),null}}function hD(n){let e=bD(n);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Rp(n,e,t=!1){return C(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof xt&&nO(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function nO({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Np=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>C(this,null,function*(){yield this.iteration()}),t)}iteration(){return C(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Lo=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oo(this.lastLoginAt),this.creationTime=Oo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function bu(n){return C(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Rp(n,TD(t,{idToken:r}));he(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?CD(s.providerUserInfo):[],c=rO(n.providerData,o),u=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!c?.length,f=u?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Lo(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,g)})}function Up(n){return C(this,null,function*(){let e=at(n);yield bu(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function rO(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function CD(n){return n.map(e=>{var{providerId:t}=e,r=vd(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function iO(n,e){return C(this,null,function*(){let t=yield ED(n,{},()=>C(this,null,function*(){let r=op({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=DD(n,i,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Tu.fetch()(o,{method:"POST",headers:c,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function sO(n,e){return C(this,null,function*(){return Au(n,"POST","/v2/accounts:revokeToken",wD(n,e))})}var ko=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){he(e.length!==0,"internal-error");let t=hD(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return C(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return C(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield iO(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(he(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(he(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(he(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Po("not implemented")}};function tr(n,e){he(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Fo=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=vd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Np(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Lo(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return C(this,null,function*(){let t=yield Rp(this,this.stsTokenManager.getToken(this.auth,e));return he(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Vp(this,e)}reload(){return Up(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return C(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield bu(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return C(this,null,function*(){if(ji(this.auth.app))return Promise.reject(wu(this.auth));let e=yield this.getIdToken();return yield Rp(this,tO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,c,u,d,f;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,I=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,A=(o=t.photoURL)!==null&&o!==void 0?o:void 0,x=(c=t.tenantId)!==null&&c!==void 0?c:void 0,R=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,L=(d=t.createdAt)!==null&&d!==void 0?d:void 0,H=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:K,emailVerified:fe,isAnonymous:xe,providerData:X,stsTokenManager:E}=t;he(K&&E,e,"internal-error");let m=ko.fromJSON(this.name,E);he(typeof K=="string",e,"internal-error"),tr(g,e.name),tr(y,e.name),he(typeof fe=="boolean",e,"internal-error"),he(typeof xe=="boolean",e,"internal-error"),tr(I,e.name),tr(A,e.name),tr(x,e.name),tr(R,e.name),tr(L,e.name),tr(H,e.name);let v=new n({uid:K,auth:e,email:y,emailVerified:fe,displayName:g,isAnonymous:xe,photoURL:A,phoneNumber:I,tenantId:x,stsTokenManager:m,createdAt:L,lastLoginAt:H});return X&&Array.isArray(X)&&(v.providerData=X.map(w=>Object.assign({},w))),R&&(v._redirectEventId=R),v}static _fromIdTokenResponse(e,t,r=!1){return C(this,null,function*(){let i=new ko;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield bu(s),s})}static _fromGetAccountInfoResponse(e,t,r){return C(this,null,function*(){let i=t.users[0];he(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?CD(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new ko;c.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Lo(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,d),u})}};var fD=new Map;function Lr(n){Du(n instanceof Function,"Expected a class definition");let e=fD.get(n);return e?(Du(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,fD.set(n,e),e)}var oO=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return C(this,null,function*(){return!0})}_set(t,r){return C(this,null,function*(){this.storage[t]=r})}_get(t){return C(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return C(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),xp=oO;function Sp(n,e,t){return`firebase:${n}:${e}:${t}`}var Cu=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Sp(this.userKey,i.apiKey,s),this.fullPersistenceKey=Sp("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return C(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Fo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return C(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return C(this,null,function*(){if(!t.length)return new n(Lr(xp),e,r);let i=(yield Promise.all(t.map(d=>C(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||Lr(xp),o=Sp(r,e.config.apiKey,e.name),c=null;for(let d of t)try{let f=yield d._get(o);if(f){let g=Fo._fromJSON(e,f);d!==s&&(c=g),s=d;break}}catch{}let u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new n(s,e,r):(s=u[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(d=>C(this,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new n(s,e,r))})}};function pD(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lO(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aO(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hO(e))return"Blackberry";if(fO(e))return"Webos";if(cO(e))return"Safari";if((e.includes("chrome/")||uO(e))&&!e.includes("edge/"))return"Chrome";if(dO(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function aO(n=vt()){return/firefox\//i.test(n)}function cO(n=vt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uO(n=vt()){return/crios\//i.test(n)}function lO(n=vt()){return/iemobile/i.test(n)}function dO(n=vt()){return/android/i.test(n)}function hO(n=vt()){return/blackberry/i.test(n)}function fO(n=vt()){return/webos/i.test(n)}function SD(n,e=[]){let t;switch(n){case"Browser":t=pD(vt());break;case"Worker":t=`${pD(vt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bi}/${r}`}var Mp=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,c)=>{try{let u=e(s);o(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return C(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function pO(t){return C(this,arguments,function*(n,e={}){return Au(n,"GET","/v2/passwordPolicy",wD(n,e))})}var gO=6,Pp=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:gO,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Op=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Su(this),this.idTokenSubscription=new Su(this),this.beforeStateQueue=new Mp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_D,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Lr(t)),this._initializationPromise=this.queue(()=>C(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Cu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return C(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return C(this,null,function*(){try{let t=yield TD(this,{idToken:e}),r=yield Fo._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return C(this,null,function*(){var t;if(ji(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return C(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return C(this,null,function*(){try{yield bu(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=ZP()}_delete(){return C(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return C(this,null,function*(){if(ji(this.app))return Promise.reject(wu(this));let t=e?at(e):null;return t&&he(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return C(this,null,function*(){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>C(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return C(this,null,function*(){return ji(this.app)?Promise.reject(wu(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return ji(this.app)?Promise.reject(wu(this)):this.queue(()=>C(this,null,function*(){yield this.assertedPersistence.setPersistence(Lr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return C(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return C(this,null,function*(){let e=yield pO(this),t=new Pp(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Tn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return C(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield sO(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return C(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return C(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Lr(e)||this._popupRedirectResolver;he(t,this,"argument-error"),this.redirectPersistenceManager=yield Cu.create(this,[Lr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return C(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>C(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return C(this,null,function*(){if(e===this.currentUser)return this.queue(()=>C(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(t);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return C(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return C(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return C(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&KP(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function mO(n){return at(n)}var Su=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=WE(t=>this.observer=t)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var yO={loadJS(){return C(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vO(n){yO=n}function _O(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function IO(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Lr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var gq=_O("rcb"),mq=new Fr(3e4,6e4);var yq=new Fr(2e3,1e4);var vq=10*60*1e3;var _q=new Fr(3e4,6e4);var Iq=new Fr(5e3,15e3);var wq=encodeURIComponent("fac");var gD="@firebase/auth",mD="1.7.9";var kp=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return C(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function wO(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function EO(n){er(new Mt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;he(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SD(n)},d=new Op(r,i,s,u);return IO(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),er(new Mt("auth-internal",e=>{let t=mO(e.getProvider("auth").getImmediate());return(r=>new kp(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),$e(gD,mD,wO(n)),$e(gD,mD,"esm2017")}var DO=5*60,Eq=UE("authIdTokenMaxAge")||DO;function TO(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}vO({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Lp("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",TO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});EO("Browser");var Dk="auth";var Ru=class{constructor(){return No(Dk)}};var AD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},RD={};var nr,jp;(function(){var n;function e(E,m){function v(){}v.prototype=m.prototype,E.D=m.prototype,E.prototype=new v,E.prototype.constructor=E,E.C=function(w,D,b){for(var _=Array(arguments.length-2),hn=2;hn<arguments.length;hn++)_[hn-2]=arguments[hn];return m.prototype[D].apply(w,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,m,v){v||(v=0);var w=Array(16);if(typeof m=="string")for(var D=0;16>D;++D)w[D]=m.charCodeAt(v++)|m.charCodeAt(v++)<<8|m.charCodeAt(v++)<<16|m.charCodeAt(v++)<<24;else for(D=0;16>D;++D)w[D]=m[v++]|m[v++]<<8|m[v++]<<16|m[v++]<<24;m=E.g[0],v=E.g[1],D=E.g[2];var b=E.g[3],_=m+(b^v&(D^b))+w[0]+3614090360&4294967295;m=v+(_<<7&4294967295|_>>>25),_=b+(D^m&(v^D))+w[1]+3905402710&4294967295,b=m+(_<<12&4294967295|_>>>20),_=D+(v^b&(m^v))+w[2]+606105819&4294967295,D=b+(_<<17&4294967295|_>>>15),_=v+(m^D&(b^m))+w[3]+3250441966&4294967295,v=D+(_<<22&4294967295|_>>>10),_=m+(b^v&(D^b))+w[4]+4118548399&4294967295,m=v+(_<<7&4294967295|_>>>25),_=b+(D^m&(v^D))+w[5]+1200080426&4294967295,b=m+(_<<12&4294967295|_>>>20),_=D+(v^b&(m^v))+w[6]+2821735955&4294967295,D=b+(_<<17&4294967295|_>>>15),_=v+(m^D&(b^m))+w[7]+4249261313&4294967295,v=D+(_<<22&4294967295|_>>>10),_=m+(b^v&(D^b))+w[8]+1770035416&4294967295,m=v+(_<<7&4294967295|_>>>25),_=b+(D^m&(v^D))+w[9]+2336552879&4294967295,b=m+(_<<12&4294967295|_>>>20),_=D+(v^b&(m^v))+w[10]+4294925233&4294967295,D=b+(_<<17&4294967295|_>>>15),_=v+(m^D&(b^m))+w[11]+2304563134&4294967295,v=D+(_<<22&4294967295|_>>>10),_=m+(b^v&(D^b))+w[12]+1804603682&4294967295,m=v+(_<<7&4294967295|_>>>25),_=b+(D^m&(v^D))+w[13]+4254626195&4294967295,b=m+(_<<12&4294967295|_>>>20),_=D+(v^b&(m^v))+w[14]+2792965006&4294967295,D=b+(_<<17&4294967295|_>>>15),_=v+(m^D&(b^m))+w[15]+1236535329&4294967295,v=D+(_<<22&4294967295|_>>>10),_=m+(D^b&(v^D))+w[1]+4129170786&4294967295,m=v+(_<<5&4294967295|_>>>27),_=b+(v^D&(m^v))+w[6]+3225465664&4294967295,b=m+(_<<9&4294967295|_>>>23),_=D+(m^v&(b^m))+w[11]+643717713&4294967295,D=b+(_<<14&4294967295|_>>>18),_=v+(b^m&(D^b))+w[0]+3921069994&4294967295,v=D+(_<<20&4294967295|_>>>12),_=m+(D^b&(v^D))+w[5]+3593408605&4294967295,m=v+(_<<5&4294967295|_>>>27),_=b+(v^D&(m^v))+w[10]+38016083&4294967295,b=m+(_<<9&4294967295|_>>>23),_=D+(m^v&(b^m))+w[15]+3634488961&4294967295,D=b+(_<<14&4294967295|_>>>18),_=v+(b^m&(D^b))+w[4]+3889429448&4294967295,v=D+(_<<20&4294967295|_>>>12),_=m+(D^b&(v^D))+w[9]+568446438&4294967295,m=v+(_<<5&4294967295|_>>>27),_=b+(v^D&(m^v))+w[14]+3275163606&4294967295,b=m+(_<<9&4294967295|_>>>23),_=D+(m^v&(b^m))+w[3]+4107603335&4294967295,D=b+(_<<14&4294967295|_>>>18),_=v+(b^m&(D^b))+w[8]+1163531501&4294967295,v=D+(_<<20&4294967295|_>>>12),_=m+(D^b&(v^D))+w[13]+2850285829&4294967295,m=v+(_<<5&4294967295|_>>>27),_=b+(v^D&(m^v))+w[2]+4243563512&4294967295,b=m+(_<<9&4294967295|_>>>23),_=D+(m^v&(b^m))+w[7]+1735328473&4294967295,D=b+(_<<14&4294967295|_>>>18),_=v+(b^m&(D^b))+w[12]+2368359562&4294967295,v=D+(_<<20&4294967295|_>>>12),_=m+(v^D^b)+w[5]+4294588738&4294967295,m=v+(_<<4&4294967295|_>>>28),_=b+(m^v^D)+w[8]+2272392833&4294967295,b=m+(_<<11&4294967295|_>>>21),_=D+(b^m^v)+w[11]+1839030562&4294967295,D=b+(_<<16&4294967295|_>>>16),_=v+(D^b^m)+w[14]+4259657740&4294967295,v=D+(_<<23&4294967295|_>>>9),_=m+(v^D^b)+w[1]+2763975236&4294967295,m=v+(_<<4&4294967295|_>>>28),_=b+(m^v^D)+w[4]+1272893353&4294967295,b=m+(_<<11&4294967295|_>>>21),_=D+(b^m^v)+w[7]+4139469664&4294967295,D=b+(_<<16&4294967295|_>>>16),_=v+(D^b^m)+w[10]+3200236656&4294967295,v=D+(_<<23&4294967295|_>>>9),_=m+(v^D^b)+w[13]+681279174&4294967295,m=v+(_<<4&4294967295|_>>>28),_=b+(m^v^D)+w[0]+3936430074&4294967295,b=m+(_<<11&4294967295|_>>>21),_=D+(b^m^v)+w[3]+3572445317&4294967295,D=b+(_<<16&4294967295|_>>>16),_=v+(D^b^m)+w[6]+76029189&4294967295,v=D+(_<<23&4294967295|_>>>9),_=m+(v^D^b)+w[9]+3654602809&4294967295,m=v+(_<<4&4294967295|_>>>28),_=b+(m^v^D)+w[12]+3873151461&4294967295,b=m+(_<<11&4294967295|_>>>21),_=D+(b^m^v)+w[15]+530742520&4294967295,D=b+(_<<16&4294967295|_>>>16),_=v+(D^b^m)+w[2]+3299628645&4294967295,v=D+(_<<23&4294967295|_>>>9),_=m+(D^(v|~b))+w[0]+4096336452&4294967295,m=v+(_<<6&4294967295|_>>>26),_=b+(v^(m|~D))+w[7]+1126891415&4294967295,b=m+(_<<10&4294967295|_>>>22),_=D+(m^(b|~v))+w[14]+2878612391&4294967295,D=b+(_<<15&4294967295|_>>>17),_=v+(b^(D|~m))+w[5]+4237533241&4294967295,v=D+(_<<21&4294967295|_>>>11),_=m+(D^(v|~b))+w[12]+1700485571&4294967295,m=v+(_<<6&4294967295|_>>>26),_=b+(v^(m|~D))+w[3]+2399980690&4294967295,b=m+(_<<10&4294967295|_>>>22),_=D+(m^(b|~v))+w[10]+4293915773&4294967295,D=b+(_<<15&4294967295|_>>>17),_=v+(b^(D|~m))+w[1]+2240044497&4294967295,v=D+(_<<21&4294967295|_>>>11),_=m+(D^(v|~b))+w[8]+1873313359&4294967295,m=v+(_<<6&4294967295|_>>>26),_=b+(v^(m|~D))+w[15]+4264355552&4294967295,b=m+(_<<10&4294967295|_>>>22),_=D+(m^(b|~v))+w[6]+2734768916&4294967295,D=b+(_<<15&4294967295|_>>>17),_=v+(b^(D|~m))+w[13]+1309151649&4294967295,v=D+(_<<21&4294967295|_>>>11),_=m+(D^(v|~b))+w[4]+4149444226&4294967295,m=v+(_<<6&4294967295|_>>>26),_=b+(v^(m|~D))+w[11]+3174756917&4294967295,b=m+(_<<10&4294967295|_>>>22),_=D+(m^(b|~v))+w[2]+718787259&4294967295,D=b+(_<<15&4294967295|_>>>17),_=v+(b^(D|~m))+w[9]+3951481745&4294967295,E.g[0]=E.g[0]+m&4294967295,E.g[1]=E.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+b&4294967295}r.prototype.u=function(E,m){m===void 0&&(m=E.length);for(var v=m-this.blockSize,w=this.B,D=this.h,b=0;b<m;){if(D==0)for(;b<=v;)i(this,E,b),b+=this.blockSize;if(typeof E=="string"){for(;b<m;)if(w[D++]=E.charCodeAt(b++),D==this.blockSize){i(this,w),D=0;break}}else for(;b<m;)if(w[D++]=E[b++],D==this.blockSize){i(this,w),D=0;break}}this.h=D,this.o+=m},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var m=1;m<E.length-8;++m)E[m]=0;var v=8*this.o;for(m=E.length-8;m<E.length;++m)E[m]=v&255,v/=256;for(this.u(E),E=Array(16),m=v=0;4>m;++m)for(var w=0;32>w;w+=8)E[v++]=this.g[m]>>>w&255;return E};function s(E,m){var v=c;return Object.prototype.hasOwnProperty.call(v,E)?v[E]:v[E]=m(E)}function o(E,m){this.h=m;for(var v=[],w=!0,D=E.length-1;0<=D;D--){var b=E[D]|0;w&&b==m||(v[D]=b,w=!1)}this.g=v}var c={};function u(E){return-128<=E&&128>E?s(E,function(m){return new o([m|0],0>m?-1:0)}):new o([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return g;if(0>E)return R(d(-E));for(var m=[],v=1,w=0;E>=v;w++)m[w]=E/v|0,v*=4294967296;return new o(m,0)}function f(E,m){if(E.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(E.charAt(0)=="-")return R(f(E.substring(1),m));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=d(Math.pow(m,8)),w=g,D=0;D<E.length;D+=8){var b=Math.min(8,E.length-D),_=parseInt(E.substring(D,D+b),m);8>b?(b=d(Math.pow(m,b)),w=w.j(b).add(d(_))):(w=w.j(v),w=w.add(d(_)))}return w}var g=u(0),y=u(1),I=u(16777216);n=o.prototype,n.m=function(){if(x(this))return-R(this).m();for(var E=0,m=1,v=0;v<this.g.length;v++){var w=this.i(v);E+=(0<=w?w:4294967296+w)*m,m*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(A(this))return"0";if(x(this))return"-"+R(this).toString(E);for(var m=d(Math.pow(E,6)),v=this,w="";;){var D=fe(v,m).g;v=L(v,D.j(m));var b=((0<v.g.length?v.g[0]:v.h)>>>0).toString(E);if(v=D,A(v))return b+w;for(;6>b.length;)b="0"+b;w=b+w}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function A(E){if(E.h!=0)return!1;for(var m=0;m<E.g.length;m++)if(E.g[m]!=0)return!1;return!0}function x(E){return E.h==-1}n.l=function(E){return E=L(this,E),x(E)?-1:A(E)?0:1};function R(E){for(var m=E.g.length,v=[],w=0;w<m;w++)v[w]=~E.g[w];return new o(v,~E.h).add(y)}n.abs=function(){return x(this)?R(this):this},n.add=function(E){for(var m=Math.max(this.g.length,E.g.length),v=[],w=0,D=0;D<=m;D++){var b=w+(this.i(D)&65535)+(E.i(D)&65535),_=(b>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);w=_>>>16,b&=65535,_&=65535,v[D]=_<<16|b}return new o(v,v[v.length-1]&-2147483648?-1:0)};function L(E,m){return E.add(R(m))}n.j=function(E){if(A(this)||A(E))return g;if(x(this))return x(E)?R(this).j(R(E)):R(R(this).j(E));if(x(E))return R(this.j(R(E)));if(0>this.l(I)&&0>E.l(I))return d(this.m()*E.m());for(var m=this.g.length+E.g.length,v=[],w=0;w<2*m;w++)v[w]=0;for(w=0;w<this.g.length;w++)for(var D=0;D<E.g.length;D++){var b=this.i(w)>>>16,_=this.i(w)&65535,hn=E.i(D)>>>16,ps=E.i(D)&65535;v[2*w+2*D]+=_*ps,H(v,2*w+2*D),v[2*w+2*D+1]+=b*ps,H(v,2*w+2*D+1),v[2*w+2*D+1]+=_*hn,H(v,2*w+2*D+1),v[2*w+2*D+2]+=b*hn,H(v,2*w+2*D+2)}for(w=0;w<m;w++)v[w]=v[2*w+1]<<16|v[2*w];for(w=m;w<2*m;w++)v[w]=0;return new o(v,0)};function H(E,m){for(;(E[m]&65535)!=E[m];)E[m+1]+=E[m]>>>16,E[m]&=65535,m++}function K(E,m){this.g=E,this.h=m}function fe(E,m){if(A(m))throw Error("division by zero");if(A(E))return new K(g,g);if(x(E))return m=fe(R(E),m),new K(R(m.g),R(m.h));if(x(m))return m=fe(E,R(m)),new K(R(m.g),m.h);if(30<E.g.length){if(x(E)||x(m))throw Error("slowDivide_ only works with positive integers.");for(var v=y,w=m;0>=w.l(E);)v=xe(v),w=xe(w);var D=X(v,1),b=X(w,1);for(w=X(w,2),v=X(v,2);!A(w);){var _=b.add(w);0>=_.l(E)&&(D=D.add(v),b=_),w=X(w,1),v=X(v,1)}return m=L(E,D.j(m)),new K(D,m)}for(D=g;0<=E.l(m);){for(v=Math.max(1,Math.floor(E.m()/m.m())),w=Math.ceil(Math.log(v)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),b=d(v),_=b.j(m);x(_)||0<_.l(E);)v-=w,b=d(v),_=b.j(m);A(b)&&(b=y),D=D.add(b),E=L(E,_)}return new K(D,E)}n.A=function(E){return fe(this,E).h},n.and=function(E){for(var m=Math.max(this.g.length,E.g.length),v=[],w=0;w<m;w++)v[w]=this.i(w)&E.i(w);return new o(v,this.h&E.h)},n.or=function(E){for(var m=Math.max(this.g.length,E.g.length),v=[],w=0;w<m;w++)v[w]=this.i(w)|E.i(w);return new o(v,this.h|E.h)},n.xor=function(E){for(var m=Math.max(this.g.length,E.g.length),v=[],w=0;w<m;w++)v[w]=this.i(w)^E.i(w);return new o(v,this.h^E.h)};function xe(E){for(var m=E.g.length+1,v=[],w=0;w<m;w++)v[w]=E.i(w)<<1|E.i(w-1)>>>31;return new o(v,E.h)}function X(E,m){var v=m>>5;m%=32;for(var w=E.g.length-v,D=[],b=0;b<w;b++)D[b]=0<m?E.i(b+v)>>>m|E.i(b+v+1)<<32-m:E.i(b+v);return new o(D,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,jp=RD.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,nr=RD.Integer=o}).apply(typeof AD<"u"?AD:typeof self<"u"?self:typeof window<"u"?window:{});var Nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Cn={};var Bp,Tk,qi,$p,Vo,xu,Hp,qp,zp;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,l,h){return a==Array.prototype||a==Object.prototype||(a[l]=h.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nu=="object"&&Nu];for(var l=0;l<a.length;++l){var h=a[l];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(a,l){if(l)e:{var h=r;a=a.split(".");for(var p=0;p<a.length-1;p++){var T=a[p];if(!(T in h))break e;h=h[T]}a=a[a.length-1],p=h[a],l=l(p),l!=p&&l!=null&&e(h,a,{configurable:!0,writable:!0,value:l})}}function s(a,l){a instanceof String&&(a+="");var h=0,p=!1,T={next:function(){if(!p&&h<a.length){var S=h++;return{value:l(S,a[S]),done:!1}}return p=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(a){return a||function(){return s(this,function(l,h){return h})}});var o=o||{},c=this||self;function u(a){var l=typeof a;return l=l!="object"?l:a?Array.isArray(a)?"array":l:"null",l=="array"||l=="object"&&typeof a.length=="number"}function d(a){var l=typeof a;return l=="object"&&a!=null||l=="function"}function f(a,l,h){return a.call.apply(a.bind,arguments)}function g(a,l,h){if(!a)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,p),a.apply(l,T)}}return function(){return a.apply(l,arguments)}}function y(a,l,h){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,y.apply(null,arguments)}function I(a,l){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),a.apply(this,p)}}function A(a,l){function h(){}h.prototype=l.prototype,a.aa=l.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(p,T,S){for(var P=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)P[_e-2]=arguments[_e];return l.prototype[T].apply(p,P)}}function x(a){let l=a.length;if(0<l){let h=Array(l);for(let p=0;p<l;p++)h[p]=a[p];return h}return[]}function R(a,l){for(let h=1;h<arguments.length;h++){let p=arguments[h];if(u(p)){let T=a.length||0,S=p.length||0;a.length=T+S;for(let P=0;P<S;P++)a[T+P]=p[P]}else a.push(p)}}class L{constructor(l,h){this.i=l,this.j=h,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function H(a){return/^[\s\xa0]*$/.test(a)}function K(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function fe(a){return fe[" "](a),a}fe[" "]=function(){};var xe=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function X(a,l,h){for(let p in a)l.call(h,a[p],p,a)}function E(a,l){for(let h in a)l.call(void 0,a[h],h,a)}function m(a){let l={};for(let h in a)l[h]=a[h];return l}let v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,l){let h,p;for(let T=1;T<arguments.length;T++){p=arguments[T];for(h in p)a[h]=p[h];for(let S=0;S<v.length;S++)h=v[S],Object.prototype.hasOwnProperty.call(p,h)&&(a[h]=p[h])}}function D(a){var l=1;a=a.split(":");let h=[];for(;0<l&&a.length;)h.push(a.shift()),l--;return a.length&&h.push(a.join(":")),h}function b(a){c.setTimeout(()=>{throw a},0)}function _(){var a=Sl;let l=null;return a.g&&(l=a.g,a.g=a.g.next,a.g||(a.h=null),l.next=null),l}class hn{constructor(){this.h=this.g=null}add(l,h){let p=ps.get();p.set(l,h),this.h?this.h.next=p:this.g=p,this.h=p}}var ps=new L(()=>new Lb,a=>a.reset());class Lb{constructor(){this.next=this.g=this.h=null}set(l,h){this.h=l,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let gs,ms=!1,Sl=new hn,Zm=()=>{let a=c.Promise.resolve(void 0);gs=()=>{a.then(Fb)}};var Fb=()=>{for(var a;a=_();){try{a.h.call(a.g)}catch(h){b(h)}var l=ps;l.j(a),100>l.h&&(l.h++,a.next=l.g,l.g=a)}ms=!1};function Mn(){this.s=this.s,this.C=this.C}Mn.prototype.s=!1,Mn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Mn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ke(a,l){this.type=a,this.g=this.target=l,this.defaultPrevented=!1}Ke.prototype.h=function(){this.defaultPrevented=!0};var Vb=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,l=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,l),c.removeEventListener("test",h,l)}catch{}return a}();function ys(a,l){if(Ke.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,p=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=l,l=a.relatedTarget){if(xe){e:{try{fe(l.nodeName);var T=!0;break e}catch{}T=!1}T||(l=null)}}else h=="mouseover"?l=a.fromElement:h=="mouseout"&&(l=a.toElement);this.relatedTarget=l,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Ub[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ys.aa.h.call(this)}}A(ys,Ke);var Ub={2:"touch",3:"pen",4:"mouse"};ys.prototype.h=function(){ys.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var vs="closure_listenable_"+(1e6*Math.random()|0),jb=0;function Bb(a,l,h,p,T){this.listener=a,this.proxy=null,this.src=l,this.type=h,this.capture=!!p,this.ha=T,this.key=++jb,this.da=this.fa=!1}function ua(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function la(a){this.src=a,this.g={},this.h=0}la.prototype.add=function(a,l,h,p,T){var S=a.toString();a=this.g[S],a||(a=this.g[S]=[],this.h++);var P=Rl(a,l,p,T);return-1<P?(l=a[P],h||(l.fa=!1)):(l=new Bb(l,this.src,S,!!p,T),l.fa=h,a.push(l)),l};function Al(a,l){var h=l.type;if(h in a.g){var p=a.g[h],T=Array.prototype.indexOf.call(p,l,void 0),S;(S=0<=T)&&Array.prototype.splice.call(p,T,1),S&&(ua(l),a.g[h].length==0&&(delete a.g[h],a.h--))}}function Rl(a,l,h,p){for(var T=0;T<a.length;++T){var S=a[T];if(!S.da&&S.listener==l&&S.capture==!!h&&S.ha==p)return T}return-1}var Nl="closure_lm_"+(1e6*Math.random()|0),xl={};function Jm(a,l,h,p,T){if(p&&p.once)return ey(a,l,h,p,T);if(Array.isArray(l)){for(var S=0;S<l.length;S++)Jm(a,l[S],h,p,T);return null}return h=kl(h),a&&a[vs]?a.K(l,h,d(p)?!!p.capture:!!p,T):Xm(a,l,h,!1,p,T)}function Xm(a,l,h,p,T,S){if(!l)throw Error("Invalid event type");var P=d(T)?!!T.capture:!!T,_e=Pl(a);if(_e||(a[Nl]=_e=new la(a)),h=_e.add(l,h,p,P,S),h.proxy)return h;if(p=$b(),h.proxy=p,p.src=a,p.listener=h,a.addEventListener)Vb||(T=P),T===void 0&&(T=!1),a.addEventListener(l.toString(),p,T);else if(a.attachEvent)a.attachEvent(ny(l.toString()),p);else if(a.addListener&&a.removeListener)a.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function $b(){function a(h){return l.call(a.src,a.listener,h)}let l=Hb;return a}function ey(a,l,h,p,T){if(Array.isArray(l)){for(var S=0;S<l.length;S++)ey(a,l[S],h,p,T);return null}return h=kl(h),a&&a[vs]?a.L(l,h,d(p)?!!p.capture:!!p,T):Xm(a,l,h,!0,p,T)}function ty(a,l,h,p,T){if(Array.isArray(l))for(var S=0;S<l.length;S++)ty(a,l[S],h,p,T);else p=d(p)?!!p.capture:!!p,h=kl(h),a&&a[vs]?(a=a.i,l=String(l).toString(),l in a.g&&(S=a.g[l],h=Rl(S,h,p,T),-1<h&&(ua(S[h]),Array.prototype.splice.call(S,h,1),S.length==0&&(delete a.g[l],a.h--)))):a&&(a=Pl(a))&&(l=a.g[l.toString()],a=-1,l&&(a=Rl(l,h,p,T)),(h=-1<a?l[a]:null)&&Ml(h))}function Ml(a){if(typeof a!="number"&&a&&!a.da){var l=a.src;if(l&&l[vs])Al(l.i,a);else{var h=a.type,p=a.proxy;l.removeEventListener?l.removeEventListener(h,p,a.capture):l.detachEvent?l.detachEvent(ny(h),p):l.addListener&&l.removeListener&&l.removeListener(p),(h=Pl(l))?(Al(h,a),h.h==0&&(h.src=null,l[Nl]=null)):ua(a)}}}function ny(a){return a in xl?xl[a]:xl[a]="on"+a}function Hb(a,l){if(a.da)a=!0;else{l=new ys(l,this);var h=a.listener,p=a.ha||a.src;a.fa&&Ml(a),a=h.call(p,l)}return a}function Pl(a){return a=a[Nl],a instanceof la?a:null}var Ol="__closure_events_fn_"+(1e9*Math.random()>>>0);function kl(a){return typeof a=="function"?a:(a[Ol]||(a[Ol]=function(l){return a.handleEvent(l)}),a[Ol])}function Qe(){Mn.call(this),this.i=new la(this),this.M=this,this.F=null}A(Qe,Mn),Qe.prototype[vs]=!0,Qe.prototype.removeEventListener=function(a,l,h,p){ty(this,a,l,h,p)};function tt(a,l){var h,p=a.F;if(p)for(h=[];p;p=p.F)h.push(p);if(a=a.M,p=l.type||l,typeof l=="string")l=new Ke(l,a);else if(l instanceof Ke)l.target=l.target||a;else{var T=l;l=new Ke(p,a),w(l,T)}if(T=!0,h)for(var S=h.length-1;0<=S;S--){var P=l.g=h[S];T=da(P,p,!0,l)&&T}if(P=l.g=a,T=da(P,p,!0,l)&&T,T=da(P,p,!1,l)&&T,h)for(S=0;S<h.length;S++)P=l.g=h[S],T=da(P,p,!1,l)&&T}Qe.prototype.N=function(){if(Qe.aa.N.call(this),this.i){var a=this.i,l;for(l in a.g){for(var h=a.g[l],p=0;p<h.length;p++)ua(h[p]);delete a.g[l],a.h--}}this.F=null},Qe.prototype.K=function(a,l,h,p){return this.i.add(String(a),l,!1,h,p)},Qe.prototype.L=function(a,l,h,p){return this.i.add(String(a),l,!0,h,p)};function da(a,l,h,p){if(l=a.i.g[String(l)],!l)return!0;l=l.concat();for(var T=!0,S=0;S<l.length;++S){var P=l[S];if(P&&!P.da&&P.capture==h){var _e=P.listener,qe=P.ha||P.src;P.fa&&Al(a.i,P),T=_e.call(qe,p)!==!1&&T}}return T&&!p.defaultPrevented}function ry(a,l,h){if(typeof a=="function")h&&(a=y(a,h));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:c.setTimeout(a,l||0)}function iy(a){a.g=ry(()=>{a.g=null,a.i&&(a.i=!1,iy(a))},a.l);let l=a.h;a.h=null,a.m.apply(null,l)}class qb extends Mn{constructor(l,h){super(),this.m=l,this.l=h,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:iy(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _s(a){Mn.call(this),this.h=a,this.g={}}A(_s,Mn);var sy=[];function oy(a){X(a.g,function(l,h){this.g.hasOwnProperty(h)&&Ml(l)},a),a.g={}}_s.prototype.N=function(){_s.aa.N.call(this),oy(this)},_s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ll=c.JSON.stringify,zb=c.JSON.parse,Gb=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Fl(){}Fl.prototype.h=null;function ay(a){return a.h||(a.h=a.i())}function cy(){}var Is={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vl(){Ke.call(this,"d")}A(Vl,Ke);function Ul(){Ke.call(this,"c")}A(Ul,Ke);var cr={},uy=null;function ha(){return uy=uy||new Qe}cr.La="serverreachability";function ly(a){Ke.call(this,cr.La,a)}A(ly,Ke);function ws(a){let l=ha();tt(l,new ly(l))}cr.STAT_EVENT="statevent";function dy(a,l){Ke.call(this,cr.STAT_EVENT,a),this.stat=l}A(dy,Ke);function nt(a){let l=ha();tt(l,new dy(l,a))}cr.Ma="timingevent";function hy(a,l){Ke.call(this,cr.Ma,a),this.size=l}A(hy,Ke);function Es(a,l){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},l)}function Ds(){this.g=!0}Ds.prototype.xa=function(){this.g=!1};function Wb(a,l,h,p,T,S){a.info(function(){if(a.g)if(S)for(var P="",_e=S.split("&"),qe=0;qe<_e.length;qe++){var ue=_e[qe].split("=");if(1<ue.length){var Ye=ue[0];ue=ue[1];var Ze=Ye.split("_");P=2<=Ze.length&&Ze[1]=="type"?P+(Ye+"="+ue+"&"):P+(Ye+"=redacted&")}}else P=null;else P=S;return"XMLHTTP REQ ("+p+") [attempt "+T+"]: "+l+`
`+h+`
`+P})}function Kb(a,l,h,p,T,S,P){a.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+T+"]: "+l+`
`+h+`
`+S+" "+P})}function Qr(a,l,h,p){a.info(function(){return"XMLHTTP TEXT ("+l+"): "+Yb(a,h)+(p?" "+p:"")})}function Qb(a,l){a.info(function(){return"TIMEOUT: "+l})}Ds.prototype.info=function(){};function Yb(a,l){if(!a.g)return l;if(!l)return null;try{var h=JSON.parse(l);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var p=h[a];if(!(2>p.length)){var T=p[1];if(Array.isArray(T)&&!(1>T.length)){var S=T[0];if(S!="noop"&&S!="stop"&&S!="close")for(var P=1;P<T.length;P++)T[P]=""}}}}return Ll(h)}catch{return l}}var fa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},jl;function pa(){}A(pa,Fl),pa.prototype.g=function(){return new XMLHttpRequest},pa.prototype.i=function(){return{}},jl=new pa;function Pn(a,l,h,p){this.j=a,this.i=l,this.l=h,this.R=p||1,this.U=new _s(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new py}function py(){this.i=null,this.g="",this.h=!1}var gy={},Bl={};function $l(a,l,h){a.L=1,a.v=va(fn(l)),a.m=h,a.P=!0,my(a,null)}function my(a,l){a.F=Date.now(),ga(a),a.A=fn(a.v);var h=a.A,p=a.R;Array.isArray(p)||(p=[String(p)]),Ny(h.i,"t",p),a.C=0,h=a.j.J,a.h=new py,a.g=Ky(a.j,h?l:null,!a.m),0<a.O&&(a.M=new qb(y(a.Y,a,a.g),a.O)),l=a.U,h=a.g,p=a.ca;var T="readystatechange";Array.isArray(T)||(T&&(sy[0]=T.toString()),T=sy);for(var S=0;S<T.length;S++){var P=Jm(h,T[S],p||l.handleEvent,!1,l.h||l);if(!P)break;l.g[P.key]=P}l=a.H?m(a.H):{},a.m?(a.u||(a.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,l)):(a.u="GET",a.g.ea(a.A,a.u,null,l)),ws(),Wb(a.i,a.u,a.A,a.l,a.R,a.m)}Pn.prototype.ca=function(a){a=a.target;let l=this.M;l&&pn(a)==3?l.j():this.Y(a)},Pn.prototype.Y=function(a){try{if(a==this.g)e:{let Ze=pn(this.g);var l=this.g.Ba();let Jr=this.g.Z();if(!(3>Ze)&&(Ze!=3||this.g&&(this.h.h||this.g.oa()||Fy(this.g)))){this.J||Ze!=4||l==7||(l==8||0>=Jr?ws(3):ws(2)),Hl(this);var h=this.g.Z();this.X=h;t:if(yy(this)){var p=Fy(this.g);a="";var T=p.length,S=pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ur(this),Ts(this);var P="";break t}this.h.i=new c.TextDecoder}for(l=0;l<T;l++)this.h.h=!0,a+=this.h.i.decode(p[l],{stream:!(S&&l==T-1)});p.length=0,this.h.g+=a,this.C=0,P=this.h.g}else P=this.g.oa();if(this.o=h==200,Kb(this.i,this.u,this.A,this.l,this.R,Ze,h),this.o){if(this.T&&!this.K){t:{if(this.g){var _e,qe=this.g;if((_e=qe.g?qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(_e)){var ue=_e;break t}}ue=null}if(h=ue)Qr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ql(this,h);else{this.o=!1,this.s=3,nt(12),ur(this),Ts(this);break e}}if(this.P){h=!0;let kt;for(;!this.J&&this.C<P.length;)if(kt=Zb(this,P),kt==Bl){Ze==4&&(this.s=4,nt(14),h=!1),Qr(this.i,this.l,null,"[Incomplete Response]");break}else if(kt==gy){this.s=4,nt(15),Qr(this.i,this.l,P,"[Invalid Chunk]"),h=!1;break}else Qr(this.i,this.l,kt,null),ql(this,kt);if(yy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ze!=4||P.length!=0||this.h.h||(this.s=1,nt(16),h=!1),this.o=this.o&&h,!h)Qr(this.i,this.l,P,"[Invalid Chunked Response]"),ur(this),Ts(this);else if(0<P.length&&!this.W){this.W=!0;var Ye=this.j;Ye.g==this&&Ye.ba&&!Ye.M&&(Ye.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),Yl(Ye),Ye.M=!0,nt(11))}}else Qr(this.i,this.l,P,null),ql(this,P);Ze==4&&ur(this),this.o&&!this.J&&(Ze==4?qy(this.j,this):(this.o=!1,ga(this)))}else pC(this.g),h==400&&0<P.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),ur(this),Ts(this)}}}catch{}finally{}};function yy(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Zb(a,l){var h=a.C,p=l.indexOf(`
`,h);return p==-1?Bl:(h=Number(l.substring(h,p)),isNaN(h)?gy:(p+=1,p+h>l.length?Bl:(l=l.slice(p,p+h),a.C=p+h,l)))}Pn.prototype.cancel=function(){this.J=!0,ur(this)};function ga(a){a.S=Date.now()+a.I,vy(a,a.I)}function vy(a,l){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Es(y(a.ba,a),l)}function Hl(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Pn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(Qb(this.i,this.A),this.L!=2&&(ws(),nt(17)),ur(this),this.s=2,Ts(this)):vy(this,this.S-a)};function Ts(a){a.j.G==0||a.J||qy(a.j,a)}function ur(a){Hl(a);var l=a.M;l&&typeof l.ma=="function"&&l.ma(),a.M=null,oy(a.U),a.g&&(l=a.g,a.g=null,l.abort(),l.ma())}function ql(a,l){try{var h=a.j;if(h.G!=0&&(h.g==a||zl(h.h,a))){if(!a.K&&zl(h.h,a)&&h.G==3){try{var p=h.Da.g.parse(l)}catch{p=null}if(Array.isArray(p)&&p.length==3){var T=p;if(T[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)Da(h),wa(h);else break e;Ql(h),nt(18)}}else h.za=T[1],0<h.za-h.T&&37500>T[2]&&h.F&&h.v==0&&!h.C&&(h.C=Es(y(h.Za,h),6e3));if(1>=wy(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else dr(h,11)}else if((a.K||h.g==a)&&Da(h),!H(l))for(T=h.Da.g.parse(l),l=0;l<T.length;l++){let ue=T[l];if(h.T=ue[0],ue=ue[1],h.G==2)if(ue[0]=="c"){h.K=ue[1],h.ia=ue[2];let Ye=ue[3];Ye!=null&&(h.la=Ye,h.j.info("VER="+h.la));let Ze=ue[4];Ze!=null&&(h.Aa=Ze,h.j.info("SVER="+h.Aa));let Jr=ue[5];Jr!=null&&typeof Jr=="number"&&0<Jr&&(p=1.5*Jr,h.L=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;let kt=a.g;if(kt){let ba=kt.g?kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ba){var S=p.h;S.g||ba.indexOf("spdy")==-1&&ba.indexOf("quic")==-1&&ba.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Gl(S,S.h),S.h=null))}if(p.D){let Zl=kt.g?kt.g.getResponseHeader("X-HTTP-Session-Id"):null;Zl&&(p.ya=Zl,Ee(p.I,p.D,Zl))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),p=h;var P=a;if(p.qa=Wy(p,p.J?p.ia:null,p.W),P.K){Ey(p.h,P);var _e=P,qe=p.L;qe&&(_e.I=qe),_e.B&&(Hl(_e),ga(_e)),p.g=P}else $y(p);0<h.i.length&&Ea(h)}else ue[0]!="stop"&&ue[0]!="close"||dr(h,7);else h.G==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?dr(h,7):Kl(h):ue[0]!="noop"&&h.l&&h.l.ta(ue),h.v=0)}}ws(4)}catch{}}var Jb=class{constructor(a,l){this.g=a,this.map=l}};function _y(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Iy(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function wy(a){return a.h?1:a.g?a.g.size:0}function zl(a,l){return a.h?a.h==l:a.g?a.g.has(l):!1}function Gl(a,l){a.g?a.g.add(l):a.h=l}function Ey(a,l){a.h&&a.h==l?a.h=null:a.g&&a.g.has(l)&&a.g.delete(l)}_y.prototype.cancel=function(){if(this.i=Dy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Dy(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let l=a.i;for(let h of a.g.values())l=l.concat(h.D);return l}return x(a.i)}function Xb(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var l=[],h=a.length,p=0;p<h;p++)l.push(a[p]);return l}l=[],h=0;for(p in a)l[h++]=a[p];return l}function eC(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var l=[];a=a.length;for(var h=0;h<a;h++)l.push(h);return l}l=[],h=0;for(let p in a)l[h++]=p;return l}}}function Ty(a,l){if(a.forEach&&typeof a.forEach=="function")a.forEach(l,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,l,void 0);else for(var h=eC(a),p=Xb(a),T=p.length,S=0;S<T;S++)l.call(void 0,p[S],h&&h[S],a)}var by=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tC(a,l){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var p=a[h].indexOf("="),T=null;if(0<=p){var S=a[h].substring(0,p);T=a[h].substring(p+1)}else S=a[h];l(S,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function lr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof lr){this.h=a.h,ma(this,a.j),this.o=a.o,this.g=a.g,ya(this,a.s),this.l=a.l;var l=a.i,h=new Ss;h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),Cy(this,h),this.m=a.m}else a&&(l=String(a).match(by))?(this.h=!1,ma(this,l[1]||"",!0),this.o=bs(l[2]||""),this.g=bs(l[3]||"",!0),ya(this,l[4]),this.l=bs(l[5]||"",!0),Cy(this,l[6]||"",!0),this.m=bs(l[7]||"")):(this.h=!1,this.i=new Ss(null,this.h))}lr.prototype.toString=function(){var a=[],l=this.j;l&&a.push(Cs(l,Sy,!0),":");var h=this.g;return(h||l=="file")&&(a.push("//"),(l=this.o)&&a.push(Cs(l,Sy,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(Cs(h,h.charAt(0)=="/"?iC:rC,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",Cs(h,oC)),a.join("")};function fn(a){return new lr(a)}function ma(a,l,h){a.j=h?bs(l,!0):l,a.j&&(a.j=a.j.replace(/:$/,""))}function ya(a,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);a.s=l}else a.s=null}function Cy(a,l,h){l instanceof Ss?(a.i=l,aC(a.i,a.h)):(h||(l=Cs(l,sC)),a.i=new Ss(l,a.h))}function Ee(a,l,h){a.i.set(l,h)}function va(a){return Ee(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function bs(a,l){return a?l?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Cs(a,l,h){return typeof a=="string"?(a=encodeURI(a).replace(l,nC),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function nC(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Sy=/[#\/\?@]/g,rC=/[#\?:]/g,iC=/[#\?]/g,sC=/[#\?@]/g,oC=/#/g;function Ss(a,l){this.h=this.g=null,this.i=a||null,this.j=!!l}function On(a){a.g||(a.g=new Map,a.h=0,a.i&&tC(a.i,function(l,h){a.add(decodeURIComponent(l.replace(/\+/g," ")),h)}))}n=Ss.prototype,n.add=function(a,l){On(this),this.i=null,a=Yr(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(l),this.h+=1,this};function Ay(a,l){On(a),l=Yr(a,l),a.g.has(l)&&(a.i=null,a.h-=a.g.get(l).length,a.g.delete(l))}function Ry(a,l){return On(a),l=Yr(a,l),a.g.has(l)}n.forEach=function(a,l){On(this),this.g.forEach(function(h,p){h.forEach(function(T){a.call(l,T,p,this)},this)},this)},n.na=function(){On(this);let a=Array.from(this.g.values()),l=Array.from(this.g.keys()),h=[];for(let p=0;p<l.length;p++){let T=a[p];for(let S=0;S<T.length;S++)h.push(l[p])}return h},n.V=function(a){On(this);let l=[];if(typeof a=="string")Ry(this,a)&&(l=l.concat(this.g.get(Yr(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)l=l.concat(a[h])}return l},n.set=function(a,l){return On(this),this.i=null,a=Yr(this,a),Ry(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[l]),this.h+=1,this},n.get=function(a,l){return a?(a=this.V(a),0<a.length?String(a[0]):l):l};function Ny(a,l,h){Ay(a,l),0<h.length&&(a.i=null,a.g.set(Yr(a,l),x(h)),a.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],l=Array.from(this.g.keys());for(var h=0;h<l.length;h++){var p=l[h];let S=encodeURIComponent(String(p)),P=this.V(p);for(p=0;p<P.length;p++){var T=S;P[p]!==""&&(T+="="+encodeURIComponent(String(P[p]))),a.push(T)}}return this.i=a.join("&")};function Yr(a,l){return l=String(l),a.j&&(l=l.toLowerCase()),l}function aC(a,l){l&&!a.j&&(On(a),a.i=null,a.g.forEach(function(h,p){var T=p.toLowerCase();p!=T&&(Ay(this,p),Ny(this,T,h))},a)),a.j=l}function cC(a,l){let h=new Ds;if(c.Image){let p=new Image;p.onload=I(kn,h,"TestLoadImage: loaded",!0,l,p),p.onerror=I(kn,h,"TestLoadImage: error",!1,l,p),p.onabort=I(kn,h,"TestLoadImage: abort",!1,l,p),p.ontimeout=I(kn,h,"TestLoadImage: timeout",!1,l,p),c.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=a}else l(!1)}function uC(a,l){let h=new Ds,p=new AbortController,T=setTimeout(()=>{p.abort(),kn(h,"TestPingServer: timeout",!1,l)},1e4);fetch(a,{signal:p.signal}).then(S=>{clearTimeout(T),S.ok?kn(h,"TestPingServer: ok",!0,l):kn(h,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(T),kn(h,"TestPingServer: error",!1,l)})}function kn(a,l,h,p,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),p(h)}catch{}}function lC(){this.g=new Gb}function dC(a,l,h){let p=h||"";try{Ty(a,function(T,S){let P=T;d(T)&&(P=Ll(T)),l.push(p+S+"="+encodeURIComponent(P))})}catch(T){throw l.push(p+"type="+encodeURIComponent("_badmap")),T}}function As(a){this.l=a.Ub||null,this.j=a.eb||!1}A(As,Fl),As.prototype.g=function(){return new _a(this.l,this.j)},As.prototype.i=function(a){return function(){return a}}({});function _a(a,l){Qe.call(this),this.D=a,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(_a,Qe),n=_a.prototype,n.open=function(a,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=l,this.readyState=1,Ns(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(l.body=a),(this.D||c).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rs(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ns(this)),this.g&&(this.readyState=3,Ns(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xy(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function xy(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var l=a.value?a.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!a.done}))&&(this.response=this.responseText+=l)}a.done?Rs(this):Ns(this),this.readyState==3&&xy(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,Rs(this))},n.Qa=function(a){this.g&&(this.response=a,Rs(this))},n.ga=function(){this.g&&Rs(this)};function Rs(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ns(a)}n.setRequestHeader=function(a,l){this.u.append(a,l)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],l=this.h.entries();for(var h=l.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=l.next();return a.join(`\r
`)};function Ns(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(_a.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function My(a){let l="";return X(a,function(h,p){l+=p,l+=":",l+=h,l+=`\r
`}),l}function Wl(a,l,h){e:{for(p in h){var p=!1;break e}p=!0}p||(h=My(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):Ee(a,l,h))}function Se(a){Qe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Se,Qe);var hC=/^https?$/i,fC=["POST","PUT"];n=Se.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,l,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);l=l?l.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():jl.g(),this.v=this.o?ay(this.o):ay(jl),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(l,String(a),!0),this.B=!1}catch(S){Py(this,S);return}if(a=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var T in p)h.set(T,p[T]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let S of p.keys())h.set(S,p.get(S));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(S=>S.toLowerCase()=="content-type"),T=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(fC,l,void 0))||p||T||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,P]of h)this.g.setRequestHeader(S,P);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ly(this),this.u=!0,this.g.send(a),this.u=!1}catch(S){Py(this,S)}};function Py(a,l){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=l,a.m=5,Oy(a),Ia(a)}function Oy(a){a.A||(a.A=!0,tt(a,"complete"),tt(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,tt(this,"complete"),tt(this,"abort"),Ia(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ia(this,!0)),Se.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ky(this):this.bb())},n.bb=function(){ky(this)};function ky(a){if(a.h&&typeof o<"u"&&(!a.v[1]||pn(a)!=4||a.Z()!=2)){if(a.u&&pn(a)==4)ry(a.Ea,0,a);else if(tt(a,"readystatechange"),pn(a)==4){a.h=!1;try{let P=a.Z();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var h;if(!(h=l)){var p;if(p=P===0){var T=String(a.D).match(by)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),p=!hC.test(T?T.toLowerCase():"")}h=p}if(h)tt(a,"complete"),tt(a,"success");else{a.m=6;try{var S=2<pn(a)?a.g.statusText:""}catch{S=""}a.l=S+" ["+a.Z()+"]",Oy(a)}}finally{Ia(a)}}}}function Ia(a,l){if(a.g){Ly(a);let h=a.g,p=a.v[0]?()=>{}:null;a.g=null,a.v=null,l||tt(a,"ready");try{h.onreadystatechange=p}catch{}}}function Ly(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function pn(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<pn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var l=this.g.responseText;return a&&l.indexOf(a)==0&&(l=l.substring(a.length)),zb(l)}};function Fy(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function pC(a){let l={};a=(a.g&&2<=pn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<a.length;p++){if(H(a[p]))continue;var h=D(a[p]);let T=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let S=l[T]||[];l[T]=S,S.push(h)}E(l,function(p){return p.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xs(a,l,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||l}function Vy(a){this.Aa=0,this.i=[],this.j=new Ds,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xs("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xs("baseRetryDelayMs",5e3,a),this.cb=xs("retryDelaySeedMs",1e4,a),this.Wa=xs("forwardChannelMaxRetries",2,a),this.wa=xs("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new _y(a&&a.concurrentRequestLimit),this.Da=new lC,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Vy.prototype,n.la=8,n.G=1,n.connect=function(a,l,h,p){nt(0),this.W=a,this.H=l||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.I=Wy(this,null,this.W),Ea(this)};function Kl(a){if(Uy(a),a.G==3){var l=a.U++,h=fn(a.I);if(Ee(h,"SID",a.K),Ee(h,"RID",l),Ee(h,"TYPE","terminate"),Ms(a,h),l=new Pn(a,a.j,l),l.L=2,l.v=va(fn(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(l.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=l.v,h=!0),h||(l.g=Ky(l.j,null),l.g.ea(l.v)),l.F=Date.now(),ga(l)}Gy(a)}function wa(a){a.g&&(Yl(a),a.g.cancel(),a.g=null)}function Uy(a){wa(a),a.u&&(c.clearTimeout(a.u),a.u=null),Da(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Ea(a){if(!Iy(a.h)&&!a.s){a.s=!0;var l=a.Ga;gs||Zm(),ms||(gs(),ms=!0),Sl.add(l,a),a.B=0}}function gC(a,l){return wy(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=l.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Es(y(a.Ga,a,l),zy(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let T=new Pn(this,this.j,a),S=this.o;if(this.S&&(S?(S=m(S),w(S,this.S)):S=this.S),this.m!==null||this.O||(T.H=S,S=null),this.P)e:{for(var l=0,h=0;h<this.i.length;h++){t:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(l+=p,4096<l){l=h;break e}if(l===4096||h===this.i.length-1){l=h+1;break e}}l=1e3}else l=1e3;l=By(this,T,l),h=fn(this.I),Ee(h,"RID",a),Ee(h,"CVER",22),this.D&&Ee(h,"X-HTTP-Session-Id",this.D),Ms(this,h),S&&(this.O?l="headers="+encodeURIComponent(String(My(S)))+"&"+l:this.m&&Wl(h,this.m,S)),Gl(this.h,T),this.Ua&&Ee(h,"TYPE","init"),this.P?(Ee(h,"$req",l),Ee(h,"SID","null"),T.T=!0,$l(T,h,null)):$l(T,h,l),this.G=2}}else this.G==3&&(a?jy(this,a):this.i.length==0||Iy(this.h)||jy(this))};function jy(a,l){var h;l?h=l.l:h=a.U++;let p=fn(a.I);Ee(p,"SID",a.K),Ee(p,"RID",h),Ee(p,"AID",a.T),Ms(a,p),a.m&&a.o&&Wl(p,a.m,a.o),h=new Pn(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),l&&(a.i=l.D.concat(a.i)),l=By(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Gl(a.h,h),$l(h,p,l)}function Ms(a,l){a.H&&X(a.H,function(h,p){Ee(l,p,h)}),a.l&&Ty({},function(h,p){Ee(l,p,h)})}function By(a,l,h){h=Math.min(a.i.length,h);var p=a.l?y(a.l.Na,a.l,a):null;e:{var T=a.i;let S=-1;for(;;){let P=["count="+h];S==-1?0<h?(S=T[0].g,P.push("ofs="+S)):S=0:P.push("ofs="+S);let _e=!0;for(let qe=0;qe<h;qe++){let ue=T[qe].g,Ye=T[qe].map;if(ue-=S,0>ue)S=Math.max(0,T[qe].g-100),_e=!1;else try{dC(Ye,P,"req"+ue+"_")}catch{p&&p(Ye)}}if(_e){p=P.join("&");break e}}}return a=a.i.splice(0,h),l.D=a,p}function $y(a){if(!a.g&&!a.u){a.Y=1;var l=a.Fa;gs||Zm(),ms||(gs(),ms=!0),Sl.add(l,a),a.v=0}}function Ql(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Es(y(a.Fa,a),zy(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,Hy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Es(y(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nt(10),wa(this),Hy(this))};function Yl(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Hy(a){a.g=new Pn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var l=fn(a.qa);Ee(l,"RID","rpc"),Ee(l,"SID",a.K),Ee(l,"AID",a.T),Ee(l,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ee(l,"TO",a.ja),Ee(l,"TYPE","xmlhttp"),Ms(a,l),a.m&&a.o&&Wl(l,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=va(fn(l)),h.m=null,h.P=!0,my(h,a)}n.Za=function(){this.C!=null&&(this.C=null,wa(this),Ql(this),nt(19))};function Da(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function qy(a,l){var h=null;if(a.g==l){Da(a),Yl(a),a.g=null;var p=2}else if(zl(a.h,l))h=l.D,Ey(a.h,l),p=1;else return;if(a.G!=0){if(l.o)if(p==1){h=l.m?l.m.length:0,l=Date.now()-l.F;var T=a.B;p=ha(),tt(p,new hy(p,h)),Ea(a)}else $y(a);else if(T=l.s,T==3||T==0&&0<l.X||!(p==1&&gC(a,l)||p==2&&Ql(a)))switch(h&&0<h.length&&(l=a.h,l.i=l.i.concat(h)),T){case 1:dr(a,5);break;case 4:dr(a,10);break;case 3:dr(a,6);break;default:dr(a,2)}}}function zy(a,l){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*l}function dr(a,l){if(a.j.info("Error code "+l),l==2){var h=y(a.fb,a),p=a.Xa;let T=!p;p=new lr(p||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ma(p,"https"),va(p),T?cC(p.toString(),h):uC(p.toString(),h)}else nt(2);a.G=0,a.l&&a.l.sa(l),Gy(a),Uy(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function Gy(a){if(a.G=0,a.ka=[],a.l){let l=Dy(a.h);(l.length!=0||a.i.length!=0)&&(R(a.ka,l),R(a.ka,a.i),a.h.i.length=0,x(a.i),a.i.length=0),a.l.ra()}}function Wy(a,l,h){var p=h instanceof lr?fn(h):new lr(h);if(p.g!="")l&&(p.g=l+"."+p.g),ya(p,p.s);else{var T=c.location;p=T.protocol,l=l?l+"."+T.hostname:T.hostname,T=+T.port;var S=new lr(null);p&&ma(S,p),l&&(S.g=l),T&&ya(S,T),h&&(S.l=h),p=S}return h=a.D,l=a.ya,h&&l&&Ee(p,h,l),Ee(p,"VER",a.la),Ms(a,p),p}function Ky(a,l,h){if(l&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=a.Ca&&!a.pa?new Se(new As({eb:h})):new Se(a.pa),l.Ha(a.J),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qy(){}n=Qy.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ta(){}Ta.prototype.g=function(a,l){return new dt(a,l)};function dt(a,l){Qe.call(this),this.g=new Vy(l),this.l=a,this.h=l&&l.messageUrlParams||null,a=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(a?a["X-WebChannel-Content-Type"]=l.messageContentType:a={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(a?a["X-WebChannel-Client-Profile"]=l.va:a={"X-WebChannel-Client-Profile":l.va}),this.g.S=a,(a=l&&l.Sb)&&!H(a)&&(this.g.m=a),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!H(l)&&(this.g.D=l,a=this.h,a!==null&&l in a&&(a=this.h,l in a&&delete a[l])),this.j=new Zr(this)}A(dt,Qe),dt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dt.prototype.close=function(){Kl(this.g)},dt.prototype.o=function(a){var l=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=Ll(a),a=h);l.i.push(new Jb(l.Ya++,a)),l.G==3&&Ea(l)},dt.prototype.N=function(){this.g.l=null,delete this.j,Kl(this.g),delete this.g,dt.aa.N.call(this)};function Yy(a){Vl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var l=a.__sm__;if(l){e:{for(let h in l){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,l=l!==null&&a in l?l[a]:void 0),this.data=l}else this.data=a}A(Yy,Vl);function Zy(){Ul.call(this),this.status=1}A(Zy,Ul);function Zr(a){this.g=a}A(Zr,Qy),Zr.prototype.ua=function(){tt(this.g,"a")},Zr.prototype.ta=function(a){tt(this.g,new Yy(a))},Zr.prototype.sa=function(a){tt(this.g,new Zy)},Zr.prototype.ra=function(){tt(this.g,"b")},Ta.prototype.createWebChannel=Ta.prototype.g,dt.prototype.send=dt.prototype.o,dt.prototype.open=dt.prototype.m,dt.prototype.close=dt.prototype.close,zp=Cn.createWebChannelTransport=function(){return new Ta},qp=Cn.getStatEventTarget=function(){return ha()},Hp=Cn.Event=cr,xu=Cn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fa.NO_ERROR=0,fa.TIMEOUT=8,fa.HTTP_ERROR=6,Vo=Cn.ErrorCode=fa,fy.COMPLETE="complete",$p=Cn.EventType=fy,cy.EventType=Is,Is.OPEN="a",Is.CLOSE="b",Is.ERROR="c",Is.MESSAGE="d",Qe.prototype.listen=Qe.prototype.K,qi=Cn.WebChannel=cy,Tk=Cn.FetchXmlHttpFactory=As,Se.prototype.listenOnce=Se.prototype.L,Se.prototype.getLastError=Se.prototype.Ka,Se.prototype.getLastErrorCode=Se.prototype.Ba,Se.prototype.getStatus=Se.prototype.Z,Se.prototype.getResponseJson=Se.prototype.Oa,Se.prototype.getResponseText=Se.prototype.oa,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Ha,Bp=Cn.XhrIo=Se}).apply(typeof Nu<"u"?Nu:typeof self<"u"?self:typeof window<"u"?window:{});var ND="@firebase/firestore";var He=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};He.UNAUTHENTICATED=new He(null),He.GOOGLE_CREDENTIALS=new He("google-credentials-uid"),He.FIRST_PARTY=new He("first-party-uid"),He.MOCK_USER=new He("mock-user");var ds="10.14.0";var Br=new Jn("@firebase/firestore");function Uo(){return Br.logLevel}function k(n,...e){if(Br.logLevel<=ne.DEBUG){let t=e.map(bm);Br.debug(`Firestore (${ds}): ${n}`,...t)}}function An(n,...e){if(Br.logLevel<=ne.ERROR){let t=e.map(bm);Br.error(`Firestore (${ds}): ${n}`,...t)}}function Zi(n,...e){if(Br.logLevel<=ne.WARN){let t=e.map(bm);Br.warn(`Firestore (${ds}): ${n}`,...t)}}function bm(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function $(n="Unexpected state"){let e=`FIRESTORE (${ds}) INTERNAL ASSERTION FAILED: `+n;throw An(e),new Error(e)}function ve(n,e){n||$()}function G(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends xt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var rn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Lu=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Yp=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(He.UNAUTHENTICATED))}shutdown(){}},Zp=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Jp=class{constructor(e){this.t=e,this.currentUser=He.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ve(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),s=new rn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new rn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>C(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new rn)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string"),new Lu(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new He(e)}},Xp=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=He.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},eg=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Xp(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(He.FIRST_PARTY))}shutdown(){}invalidateToken(){}},tg=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ng=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ve(this.o===void 0);let r=s=>{s.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,k("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ve(typeof t.token=="string"),this.R=t.token,new tg(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function bk(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Fu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=bk(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function de(n,e){return n<e?-1:n>e?1:0}function Ji(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var We=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new V(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new V(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new V(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Y=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new We(0,0))}static max(){return new n(new We(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Vu=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&$(),r===void 0?r=e.length-t:r>e.length-t&&$(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Re=class n extends Vu{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Ck=/^[_a-zA-Z][_a-zA-Z0-9]*$/,It=class n extends Vu{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Ck.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new V(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new V(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new V(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new V(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var j=class n{constructor(e){this.path=e}static fromPath(e){return new n(Re.fromString(e))}static fromName(e){return new n(Re.fromString(e).popFirst(5))}static empty(){return new n(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Re.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Re(e.slice()))}};var rg=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};rg.UNKNOWN_ID=-1;function Sk(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new We(t+1,0):new We(t,r));return new $r(i,j.empty(),e)}function Ak(n){return new $r(n.readTime,n.key,-1)}var $r=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Y.min(),j.empty(),-1)}static max(){return new n(Y.max(),j.empty(),-1)}};function Rk(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=j.comparator(n.documentKey,e.documentKey),t!==0?t:de(n.largestBatchId,e.largestBatchId))}var Nk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ig=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function sa(n){return C(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==Nk)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var M=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),c=0;for(let u=0;u<s;u++){let d=u;t(e[d]).next(f=>{o[d]=f,++c,c===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function xk(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function oa(n){return n.name==="IndexedDbTransactionError"}var cT=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function pl(n){return n==null}function zo(n){return n===0&&1/n==-1/0}function Mk(n){return typeof n=="number"&&Number.isInteger(n)&&!zo(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Pk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Dz=[...Pk,"documentOverlays"],Ok=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],kk=Ok,Lk=[...kk,"indexConfiguration","indexState","indexEntries"];var Tz=[...Lk,"globals"];function xD(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Wr(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function uT(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ne=class n{constructor(e,t){this.comparator=e,this.root=t||sn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ki(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ki(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ki(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ki(this.root,e,this.comparator,!0)}},Ki=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},sn=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $();let e=this.left.check();if(e!==this.right.check())throw $();return e+(this.isRed()?0:1)}};sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw $()}get value(){throw $()}get color(){throw $()}get left(){throw $()}get right(){throw $()}copy(e,t,r,i,s){return this}insert(e,t,r){return new sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Xe=class n{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Uu(this.data.getIterator())}getIteratorFrom(e){return new Uu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Uu=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ot=class n{constructor(e){this.fields=e,e.sort(It.comparator)}static empty(){return new n([])}unionWith(e){let t=new Xe(It.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ji(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var ju=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var et=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ju("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};et.EMPTY_BYTE_STRING=new et("");var Fk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rn(n){if(ve(!!n),typeof n=="string"){let e=0,t=Fk.exec(n);if(ve(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:be(n.seconds),nanos:be(n.nanos)}}function be(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ir(n){return typeof n=="string"?et.fromBase64String(n):et.fromUint8Array(n)}function Cm(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Sm(n){let e=n.mapValue.fields.__previous_value__;return Cm(e)?Sm(e):e}function Go(n){let e=Rn(n.mapValue.fields.__local_write_time__.timestampValue);return new We(e.seconds,e.nanos)}var sg=class{constructor(e,t,r,i,s,o,c,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}},Bu=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Mu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Hr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Cm(n)?4:dT(n)?9007199254740991:lT(n)?10:11:$()}function un(n,e){if(n===e)return!0;let t=Hr(n);if(t!==Hr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Go(n).isEqual(Go(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Rn(i.timestampValue),c=Rn(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return ir(i.bytesValue).isEqual(ir(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return be(i.geoPointValue.latitude)===be(s.geoPointValue.latitude)&&be(i.geoPointValue.longitude)===be(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return be(i.integerValue)===be(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=be(i.doubleValue),c=be(s.doubleValue);return o===c?zo(o)===zo(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return Ji(n.arrayValue.values||[],e.arrayValue.values||[],un);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(xD(o)!==xD(c))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!un(o[u],c[u])))return!1;return!0}(n,e);default:return $()}}function Wo(n,e){return(n.values||[]).find(t=>un(t,e))!==void 0}function Xi(n,e){if(n===e)return 0;let t=Hr(n),r=Hr(e);if(t!==r)return de(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return de(n.booleanValue,e.booleanValue);case 2:return function(s,o){let c=be(s.integerValue||s.doubleValue),u=be(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(n,e);case 3:return MD(n.timestampValue,e.timestampValue);case 4:return MD(Go(n),Go(e));case 5:return de(n.stringValue,e.stringValue);case 6:return function(s,o){let c=ir(s),u=ir(o);return c.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){let f=de(c[d],u[d]);if(f!==0)return f}return de(c.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let c=de(be(s.latitude),be(o.latitude));return c!==0?c:de(be(s.longitude),be(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return PD(n.arrayValue,e.arrayValue);case 10:return function(s,o){var c,u,d,f;let g=s.fields||{},y=o.fields||{},I=(c=g.value)===null||c===void 0?void 0:c.arrayValue,A=(u=y.value)===null||u===void 0?void 0:u.arrayValue,x=de(((d=I?.values)===null||d===void 0?void 0:d.length)||0,((f=A?.values)===null||f===void 0?void 0:f.length)||0);return x!==0?x:PD(I,A)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Mu.mapValue&&o===Mu.mapValue)return 0;if(s===Mu.mapValue)return 1;if(o===Mu.mapValue)return-1;let c=s.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){let y=de(u[g],f[g]);if(y!==0)return y;let I=Xi(c[u[g]],d[f[g]]);if(I!==0)return I}return de(u.length,f.length)}(n.mapValue,e.mapValue);default:throw $()}}function MD(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return de(n,e);let t=Rn(n),r=Rn(e),i=de(t.seconds,r.seconds);return i!==0?i:de(t.nanos,r.nanos)}function PD(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Xi(t[i],r[i]);if(s)return s}return de(t.length,r.length)}function es(n){return og(n)}function og(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Rn(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ir(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return j.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=og(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${og(t.fields[o])}`;return i+"}"}(n.mapValue):$()}function ag(n){return!!n&&"integerValue"in n}function Am(n){return!!n&&"arrayValue"in n}function OD(n){return!!n&&"nullValue"in n}function kD(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ou(n){return!!n&&"mapValue"in n}function lT(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Bo(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Wr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Bo(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Bo(n.arrayValue.values[t]);return e}return Object.assign({},n)}function dT(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var _t=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ou(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bo(t)}setAll(e){let t=It.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}o?r[c.lastSegment()]=Bo(o):i.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Ou(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return un(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ou(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Wr(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Bo(this.value))}};function hT(n){let e=[];return Wr(n.fields,(t,r)=>{let i=new It([t]);if(Ou(r)){let s=hT(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Ot(e)}var qt=class n{constructor(e,t,r,i,s,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new n(e,0,Y.min(),Y.min(),Y.min(),_t.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Y.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Y.min(),Y.min(),_t.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Y.min(),Y.min(),_t.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ts=class{constructor(e,t){this.position=e,this.inclusive=t}};function LD(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=j.comparator(j.fromName(o.referenceValue),t.key):r=Xi(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function FD(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!un(n.position[t],e.position[t]))return!1;return!0}var ns=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Vk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var $u=class{},Ve=class n extends $u{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ug(e,t,r):t==="array-contains"?new hg(e,r):t==="in"?new fg(e,r):t==="not-in"?new pg(e,r):t==="array-contains-any"?new gg(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new lg(e,r):new dg(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Xi(t,this.value)):t!==null&&Hr(this.value)===Hr(t)&&this.matchesComparison(Xi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ln=class n extends $u{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return fT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function fT(n){return n.op==="and"}function pT(n){return Uk(n)&&fT(n)}function Uk(n){for(let e of n.filters)if(e instanceof ln)return!1;return!0}function cg(n){if(n instanceof Ve)return n.field.canonicalString()+n.op.toString()+es(n.value);if(pT(n))return n.filters.map(e=>cg(e)).join(",");{let e=n.filters.map(t=>cg(t)).join(",");return`${n.op}(${e})`}}function gT(n,e){return n instanceof Ve?function(r,i){return i instanceof Ve&&r.op===i.op&&r.field.isEqual(i.field)&&un(r.value,i.value)}(n,e):n instanceof ln?function(r,i){return i instanceof ln&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&gT(o,i.filters[c]),!0):!1}(n,e):void $()}function mT(n){return n instanceof Ve?function(t){return`${t.field.canonicalString()} ${t.op} ${es(t.value)}`}(n):n instanceof ln?function(t){return t.op.toString()+" {"+t.getFilters().map(mT).join(" ,")+"}"}(n):"Filter"}var ug=class extends Ve{constructor(e,t,r){super(e,t,r),this.key=j.fromName(r.referenceValue)}matches(e){let t=j.comparator(e.key,this.key);return this.matchesComparison(t)}},lg=class extends Ve{constructor(e,t){super(e,"in",t),this.keys=yT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},dg=class extends Ve{constructor(e,t){super(e,"not-in",t),this.keys=yT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function yT(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>j.fromName(r.referenceValue))}var hg=class extends Ve{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Am(t)&&Wo(t.arrayValue,this.value)}},fg=class extends Ve{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Wo(this.value.arrayValue,t)}},pg=class extends Ve{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Wo(this.value.arrayValue,t)}},gg=class extends Ve{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Am(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Wo(this.value.arrayValue,r))}};var mg=class{constructor(e,t=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function VD(n,e=null,t=[],r=[],i=null,s=null,o=null){return new mg(n,e,t,r,i,s,o)}function Rm(n){let e=G(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>cg(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),pl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>es(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>es(r)).join(",")),e.ue=t}return e.ue}function Nm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Vk(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!FD(n.startAt,e.startAt)&&FD(n.endAt,e.endAt)}function yg(n){return j.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var rs=class{constructor(e,t=null,r=[],i=[],s=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function jk(n,e,t,r,i,s,o,c){return new rs(n,e,t,r,i,s,o,c)}function xm(n){return new rs(n)}function UD(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Bk(n){return n.collectionGroup!==null}function $o(n){let e=G(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Xe(It.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ns(s,r))}),t.has(It.keyField().canonicalString())||e.ce.push(new ns(It.keyField(),r))}return e.ce}function on(n){let e=G(n);return e.le||(e.le=$k(e,$o(n))),e.le}function $k(n,e){if(n.limitType==="F")return VD(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new ns(i.field,s)});let t=n.endAt?new ts(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ts(n.startAt.position,n.startAt.inclusive):null;return VD(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function vg(n,e,t){return new rs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gl(n,e){return Nm(on(n),on(e))&&n.limitType===e.limitType}function vT(n){return`${Rm(on(n))}|lt:${n.limitType}`}function zi(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>mT(i)).join(", ")}]`),pl(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>es(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>es(i)).join(",")),`Target(${r})`}(on(n))}; limitType=${n.limitType})`}function ml(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):j.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of $o(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){let d=LD(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,$o(r),i)||r.endAt&&!function(o,c,u){let d=LD(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,$o(r),i))}(n,e)}function Hk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function _T(n){return(e,t)=>{let r=!1;for(let i of $o(n)){let s=qk(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function qk(n,e,t){let r=n.field.isKeyField()?j.comparator(e.key,t.key):function(s,o,c){let u=o.data.field(s),d=c.data.field(s);return u!==null&&d!==null?Xi(u,d):$()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return $()}}var sr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wr(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return uT(this.inner)}size(){return this.innerSize}};var zk=new Ne(j.comparator);function Nn(){return zk}var IT=new Ne(j.comparator);function jo(...n){let e=IT;for(let t of n)e=e.insert(t.key,t);return e}function wT(n){let e=IT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Vr(){return Ho()}function ET(){return Ho()}function Ho(){return new sr(n=>n.toString(),(n,e)=>n.isEqual(e))}var Gk=new Ne(j.comparator),Wk=new Xe(j.comparator);function re(...n){let e=Wk;for(let t of n)e=e.add(t);return e}var Kk=new Xe(de);function Qk(){return Kk}function Mm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zo(e)?"-0":e}}function DT(n){return{integerValue:""+n}}function Yk(n,e){return Mk(e)?DT(e):Mm(n,e)}var is=class{constructor(){this._=void 0}};function Zk(n,e,t){return n instanceof ss?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Cm(s)&&(s=Sm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof qr?bT(n,e):n instanceof zr?CT(n,e):function(i,s){let o=TT(i,s),c=jD(o)+jD(i.Pe);return ag(o)&&ag(i.Pe)?DT(c):Mm(i.serializer,c)}(n,e)}function Jk(n,e,t){return n instanceof qr?bT(n,e):n instanceof zr?CT(n,e):t}function TT(n,e){return n instanceof os?function(r){return ag(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var ss=class extends is{},qr=class extends is{constructor(e){super(),this.elements=e}};function bT(n,e){let t=ST(e);for(let r of n.elements)t.some(i=>un(i,r))||t.push(r);return{arrayValue:{values:t}}}var zr=class extends is{constructor(e){super(),this.elements=e}};function CT(n,e){let t=ST(e);for(let r of n.elements)t=t.filter(i=>!un(i,r));return{arrayValue:{values:t}}}var os=class extends is{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function jD(n){return be(n.integerValue||n.doubleValue)}function ST(n){return Am(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Xk(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof qr&&i instanceof qr||r instanceof zr&&i instanceof zr?Ji(r.elements,i.elements,un):r instanceof os&&i instanceof os?un(r.Pe,i.Pe):r instanceof ss&&i instanceof ss}(n.transform,e.transform)}var _g=class{constructor(e,t){this.version=e,this.transformResults=t}},Sn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ku(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var as=class{};function AT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ko(n.key,Sn.none()):new Gr(n.key,n.data,Sn.none());{let t=n.data,r=_t.empty(),i=new Xe(It.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new dn(n.key,r,new Ot(i.toArray()),Sn.none())}}function e1(n,e,t){n instanceof Gr?function(i,s,o){let c=i.value.clone(),u=$D(i.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof dn?function(i,s,o){if(!ku(i.precondition,s))return void s.convertToUnknownDocument(o.version);let c=$D(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(RT(i)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function qo(n,e,t,r){return n instanceof Gr?function(s,o,c,u){if(!ku(s.precondition,o))return c;let d=s.value.clone(),f=HD(s.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof dn?function(s,o,c,u){if(!ku(s.precondition,o))return c;let d=HD(s.fieldTransforms,u,o),f=o.data;return f.setAll(RT(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(s,o,c){return ku(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,e,t)}function t1(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=TT(r.transform,i||null);s!=null&&(t===null&&(t=_t.empty()),t.set(r.field,s))}return t||null}function BD(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ji(r,i,(s,o)=>Xk(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Gr=class extends as{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},dn=class extends as{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function RT(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function $D(n,e,t){let r=new Map;ve(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,Jk(o,c,t[i]))}return r}function HD(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,Zk(s,o,e))}return r}var Ko=class extends as{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ig=class extends as{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var wg=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&e1(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=qo(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=qo(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=ET();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=t.has(i.key)?null:c;let u=AT(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),re())}isEqual(e){return this.batchId===e.batchId&&Ji(this.mutations,e.mutations,(t,r)=>BD(t,r))&&Ji(this.baseMutations,e.baseMutations,(t,r)=>BD(t,r))}},Eg=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ve(e.mutations.length===r.length);let i=function(){return Gk}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var Dg=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Tg=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Pe,ce;function n1(n){switch(n){default:return $();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function NT(n){if(n===void 0)return An("GRPC error has no .code"),N.UNKNOWN;switch(n){case Pe.OK:return N.OK;case Pe.CANCELLED:return N.CANCELLED;case Pe.UNKNOWN:return N.UNKNOWN;case Pe.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Pe.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Pe.INTERNAL:return N.INTERNAL;case Pe.UNAVAILABLE:return N.UNAVAILABLE;case Pe.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Pe.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Pe.NOT_FOUND:return N.NOT_FOUND;case Pe.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Pe.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Pe.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Pe.ABORTED:return N.ABORTED;case Pe.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Pe.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Pe.DATA_LOSS:return N.DATA_LOSS;default:return $()}}(ce=Pe||(Pe={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";var qD=null;function r1(){return new TextEncoder}var i1=new nr([4294967295,4294967295],0);function zD(n){let e=r1().encode(n),t=new jp;return t.update(e),new Uint8Array(t.digest())}function GD(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new nr([t,r],0),new nr([i,s],0)]}var bg=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ur(`Invalid padding: ${t}`);if(r<0)throw new Ur(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ur(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ur(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=nr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(nr.fromNumber(r)));return i.compare(i1)===1&&(i=new nr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=zD(e),[r,i]=GD(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let t=zD(e),[r,i]=GD(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ur=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Hu=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Qo.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Y.min(),i,new Ne(de),Nn(),re())}},Qo=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,re(),re(),re())}};var Qi=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},qu=class{constructor(e,t){this.targetId=e,this.me=t}},zu=class{constructor(e,t,r=et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Gu=class{constructor(){this.fe=0,this.ge=KD(),this.pe=et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=re(),t=re(),r=re();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:$()}}),new Qo(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=KD()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Cg=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Nn(),this.qe=WD(),this.Qe=new Ne(de)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:$()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(yg(s))if(r===0){let o=new j(s.path);this.Ue(t,o,qt.newNoDocument(o,Y.min()))}else ve(r===1);else{let o=this.Ye(t);if(o!==r){let c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(t);let d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}qD?.et(function(f,g,y,I,A){var x,R,L,H,K,fe;let xe={localCacheCount:f,existenceFilterCount:g.count,databaseId:y.database,projectId:y.projectId},X=g.unchangedNames;return X&&(xe.bloomFilter={applied:A===0,hashCount:(x=X?.hashCount)!==null&&x!==void 0?x:0,bitmapLength:(H=(L=(R=X?.bits)===null||R===void 0?void 0:R.bitmap)===null||L===void 0?void 0:L.length)!==null&&H!==void 0?H:0,padding:(fe=(K=X?.bits)===null||K===void 0?void 0:K.padding)!==null&&fe!==void 0?fe:0,mightContain:E=>{var m;return(m=I?.mightContain(E))!==null&&m!==void 0&&m}}),xe}(o,e.me,this.Le.tt(),c,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,c;try{o=ir(r).toUint8Array()}catch(u){if(u instanceof ju)return Zi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new bg(o,i,s)}catch(u){return Zi(u instanceof Ur?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&yg(c.target)){let u=new j(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,qt.newNoDocument(u,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=re();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{let d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Hu(e,t,this.Qe,this.ke,r);return this.ke=Nn(),this.qe=WD(),this.Qe=new Ne(de),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Gu,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Xe(de),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Gu),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function WD(){return new Ne(j.comparator)}function KD(){return new Ne(j.comparator)}var s1={asc:"ASCENDING",desc:"DESCENDING"},o1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},a1={and:"AND",or:"OR"},Sg=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Ag(n,e){return n.useProto3Json||pl(e)?e:{value:e}}function Wu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function c1(n,e){return Wu(n,e.toTimestamp())}function an(n){return ve(!!n),Y.fromTimestamp(function(t){let r=Rn(t);return new We(r.seconds,r.nanos)}(n))}function Pm(n,e){return Rg(n,e).canonicalString()}function Rg(n,e){let t=function(i){return new Re(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function MT(n){let e=Re.fromString(n);return ve(FT(e)),e}function Ng(n,e){return Pm(n.databaseId,e.path)}function Gp(n,e){let t=MT(e);if(t.get(1)!==n.databaseId.projectId)throw new V(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new V(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new j(OT(t))}function PT(n,e){return Pm(n.databaseId,e)}function u1(n){let e=MT(n);return e.length===4?Re.emptyPath():OT(e)}function xg(n){return new Re(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function OT(n){return ve(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function QD(n,e,t){return{name:Ng(n,e),fields:t.value.mapValue.fields}}function l1(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:$()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(ve(f===void 0||typeof f=="string"),et.fromBase64String(f||"")):(ve(f===void 0||f instanceof Buffer||f instanceof Uint8Array),et.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){let f=d.code===void 0?N.UNKNOWN:NT(d.code);return new V(f,d.message||"")}(o);t=new zu(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Gp(n,r.document.name),s=an(r.document.updateTime),o=r.document.createTime?an(r.document.createTime):Y.min(),c=new _t({mapValue:{fields:r.document.fields}}),u=qt.newFoundDocument(i,s,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];t=new Qi(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Gp(n,r.document),s=r.readTime?an(r.readTime):Y.min(),o=qt.newNoDocument(i,s),c=r.removedTargetIds||[];t=new Qi([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Gp(n,r.document),s=r.removedTargetIds||[];t=new Qi([],s,i,null)}else{if(!("filter"in e))return $();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Tg(i,s),c=r.targetId;t=new qu(c,o)}}return t}function d1(n,e){let t;if(e instanceof Gr)t={update:QD(n,e.key,e.value)};else if(e instanceof Ko)t={delete:Ng(n,e.key)};else if(e instanceof dn)t={update:QD(n,e.key,e.data),updateMask:I1(e.fieldMask)};else{if(!(e instanceof Ig))return $();t={verify:Ng(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let c=o.transform;if(c instanceof ss)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof qr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof zr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof os)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw $()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:c1(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:$()}(n,e.precondition)),t}function h1(n,e){return n&&n.length>0?(ve(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?an(i.updateTime):an(s);return o.isEqual(Y.min())&&(o=an(s)),new _g(o,i.transformResults||[])}(t,e))):[]}function f1(n,e){return{documents:[PT(n,e.path)]}}function p1(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=PT(n,i);let s=function(d){if(d.length!==0)return LT(ln.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(d){if(d.length!==0)return d.map(f=>function(y){return{field:Gi(y.field),direction:y1(y.dir)}}(f))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let c=Ag(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i}}function g1(n){let e=u1(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ve(r===1);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(g){let y=kT(g);return y instanceof ln&&pT(y)?y.getFilters():[y]}(t.where));let o=[];t.orderBy&&(o=function(g){return g.map(y=>function(A){return new ns(Wi(A.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(y))}(t.orderBy));let c=null;t.limit&&(c=function(g){let y;return y=typeof g=="object"?g.value:g,pl(y)?null:y}(t.limit));let u=null;t.startAt&&(u=function(g){let y=!!g.before,I=g.values||[];return new ts(I,y)}(t.startAt));let d=null;return t.endAt&&(d=function(g){let y=!g.before,I=g.values||[];return new ts(I,y)}(t.endAt)),jk(e,i,o,s,c,"F",u,d)}function m1(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function kT(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Wi(t.unaryFilter.field);return Ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Wi(t.unaryFilter.field);return Ve.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Wi(t.unaryFilter.field);return Ve.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Wi(t.unaryFilter.field);return Ve.create(o,"!=",{nullValue:"NULL_VALUE"});default:return $()}}(n):n.fieldFilter!==void 0?function(t){return Ve.create(Wi(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ln.create(t.compositeFilter.filters.map(r=>kT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return $()}}(t.compositeFilter.op))}(n):$()}function y1(n){return s1[n]}function v1(n){return o1[n]}function _1(n){return a1[n]}function Gi(n){return{fieldPath:n.canonicalString()}}function Wi(n){return It.fromServerFormat(n.fieldPath)}function LT(n){return n instanceof Ve?function(t){if(t.op==="=="){if(kD(t.value))return{unaryFilter:{field:Gi(t.field),op:"IS_NAN"}};if(OD(t.value))return{unaryFilter:{field:Gi(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(kD(t.value))return{unaryFilter:{field:Gi(t.field),op:"IS_NOT_NAN"}};if(OD(t.value))return{unaryFilter:{field:Gi(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gi(t.field),op:v1(t.op),value:t.value}}}(n):n instanceof ln?function(t){let r=t.getFilters().map(i=>LT(i));return r.length===1?r[0]:{compositeFilter:{op:_1(t.op),filters:r}}}(n):$()}function I1(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function FT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Yo=class n{constructor(e,t,r,i,s=Y.min(),o=Y.min(),c=et.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Mg=class{constructor(e){this.ct=e}};function w1(n){let e=g1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?vg(e,e.limit,"L"):e}var Ku=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(be(e.integerValue));else if("doubleValue"in e){let r=be(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),zo(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Rn(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ir(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?dT(e)?this.dt(t,Number.MAX_SAFE_INTEGER):lT(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):$()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",c=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(be(c)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),j.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Ku.vt=new Ku;var Pg=class{constructor(){this.un=new Og}addToCollectionParentIndex(e,t){return this.un.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve($r.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve($r.min())}updateCollectionGroup(e,t,r){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}},Og=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Xe(Re.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xe(Re.comparator)).toArray()}};var Cz=new Uint8Array(0);var nn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(41943040,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);var Zo=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var kg=class{constructor(){this.changes=new sr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?M.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Lg=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Fg=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&qo(r.mutation,i,Ot.empty(),We.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,t,r=re()){let i=Vr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=jo();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Vr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,re()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,r,i){let s=Nn(),o=Ho(),c=function(){return Ho()}();return t.forEach((u,d)=>{let f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof dn)?s=s.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),qo(f.mutation,d,f.mutation.getFieldMask(),We.now())):o.set(d.key,Ot.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,f)=>o.set(d,f)),t.forEach((d,f)=>{var g;return c.set(d,new Lg(f,(g=o.get(d))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,t){let r=Ho(),i=new Ne((o,c)=>o-c),s=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let c of o)c.keys().forEach(u=>{let d=t.get(u);if(d===null)return;let f=r.get(u)||Ot.empty();f=c.applyToLocalView(d,f),r.set(u,f);let g=(i.get(c.batchId)||re()).add(u);i=i.insert(c.batchId,g)})}).next(()=>{let o=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),d=u.key,f=u.value,g=ET();f.forEach(y=>{if(!s.has(y)){let I=AT(t.get(y),r.get(y));I!==null&&g.set(y,I),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return j.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Bk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):M.resolve(Vr()),c=-1,u=s;return o.next(d=>M.forEach(d,(f,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),s.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{u=u.insert(f,y)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,re())).next(f=>({batchId:c,changes:wT(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new j(t)).next(r=>{let i=jo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=jo();return this.indexManager.getCollectionParents(e,s).next(c=>M.forEach(c,u=>{let d=function(g,y){return new rs(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((g,y)=>{o=o.insert(g,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,d)=>{let f=d.getKey();o.get(f)===null&&(o=o.insert(f,qt.newInvalidDocument(f)))});let c=jo();return o.forEach((u,d)=>{let f=s.get(u);f!==void 0&&qo(f.mutation,d,Ot.empty(),We.now()),ml(t,d)&&(c=c.insert(u,d))}),c})}};var Vg=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return M.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:an(i.createTime)}}(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:w1(i.bundledQuery),readTime:an(i.readTime)}}(t)),M.resolve()}};var Ug=class{constructor(){this.overlays=new Ne(j.comparator),this.Ir=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Vr();return M.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),M.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,t,r){let i=Vr(),s=t.length+1,o=new j(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let u=c.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ne((d,f)=>d-f),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let f=s.get(d.largestBatchId);f===null&&(f=Vr(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}let c=Vr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=i)););return M.resolve(c)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Dg(t,r));let s=this.Ir.get(t);s===void 0&&(s=re(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var jg=class{constructor(){this.sessionToken=et.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}};var Jo=class{constructor(){this.Tr=new Xe(Oe.Er),this.dr=new Xe(Oe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Oe(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Oe(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new j(new Re([])),r=new Oe(t,e),i=new Oe(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new j(new Re([])),r=new Oe(t,e),i=new Oe(t,e+1),s=re();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Oe(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Oe=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return j.comparator(e.key,t.key)||de(e.wr,t.wr)}static Ar(e,t){return de(e.wr,t.wr)||j.comparator(e.key,t.key)}};var Bg=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Xe(Oe.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new wg(s,t,r,i);this.mutationQueue.push(o);for(let c of i)this.br=this.br.add(new Oe(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,t){return M.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Oe(t,0),i=new Oe(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let c=this.Dr(o.wr);s.push(c)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xe(de);return t.forEach(i=>{let s=new Oe(i,0),o=new Oe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],c=>{r=r.add(c.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;j.isDocumentKey(s)||(s=s.child(""));let o=new Oe(new j(s),0),c=new Xe(de);return this.br.forEachWhile(u=>{let d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.wr)),!0)},o),M.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ve(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(t.mutations,i=>{let s=new Oe(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Oe(t,0),i=this.br.firstAfterOrEqual(r);return M.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var $g=class{constructor(e){this.Mr=e,this.docs=function(){return new Ne(j.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return M.resolve(r?r.document.mutableCopy():qt.newInvalidDocument(t))}getEntries(e,t){let r=Nn();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():qt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Nn(),o=t.path,c=new j(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||Rk(Ak(f),r)<=0||(i.has(f.key)||ml(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,t,r,i){$()}Or(e,t){return M.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Hg(this)}getSize(e){return M.resolve(this.size)}},Hg=class extends kg{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),M.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var qg=class{constructor(e){this.persistence=e,this.Nr=new sr(t=>Rm(t),Nm),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Jo,this.targetCount=0,this.kr=Zo.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),M.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Zo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.Kn(t),M.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return M.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),M.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),M.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return M.resolve(r)}containsKey(e,t){return M.resolve(this.Br.containsKey(t))}};var zg=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new cT(0),this.Kr=!1,this.Kr=!0,this.$r=new jg,this.referenceDelegate=e(this),this.Ur=new qg(this),this.indexManager=new Pg,this.remoteDocumentCache=function(i){return new $g(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Mg(t),this.Gr=new Vg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ug,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Bg(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new Gg(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},Gg=class extends ig{constructor(e){super(),this.currentSequenceNumber=e}},Wg=class n{constructor(e){this.persistence=e,this.Jr=new Jo,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw $()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),M.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{let i=j.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,Y.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return M.or([()=>M.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Kg=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=re(),i=re();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var Qg=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Yg=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return zE()?8:xk(vt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Qg;return this.Xi(e,t,o).next(c=>{if(s.result=c,this.zi)return this.es(e,t,o,c.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Uo()<=ne.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",zi(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(Uo()<=ne.DEBUG&&k("QueryEngine","Query:",zi(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Uo()<=ne.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",zi(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,on(t))):M.resolve())}Yi(e,t){if(UD(t))return M.resolve(null);let r=on(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=vg(t,null,"F"),r=on(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=re(...s);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let d=this.ts(t,c);return this.ns(t,d,o,u.readTime)?this.Yi(e,vg(t,null,"F")):this.rs(e,d,t,u)}))})))}Zi(e,t,r,i){return UD(t)||i.isEqual(Y.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?M.resolve(null):(Uo()<=ne.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zi(t)),this.rs(e,o,t,Sk(i,-1)).next(c=>c))})}ts(e,t){let r=new Xe(_T(e));return t.forEach((i,s)=>{ml(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Uo()<=ne.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",zi(t)),this.Ji.getDocumentsMatchingQuery(e,t,$r.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Zg=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ne(de),this._s=new sr(s=>Rm(s),Nm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fg(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function E1(n,e,t,r){return new Zg(n,e,t,r)}function VT(n,e){return C(this,null,function*(){let t=G(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],c=[],u=re();for(let d of i){o.push(d.batchId);for(let f of d.mutations)u=u.add(f.key)}for(let d of s){c.push(d.batchId);for(let f of d.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:c}))})})})}function D1(n,e){let t=G(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){let g=d.batch,y=g.keys(),I=M.resolve();return y.forEach(A=>{I=I.next(()=>f.getEntry(u,A)).next(x=>{let R=d.docVersions.get(A);ve(R!==null),x.version.compareTo(R)<0&&(g.applyToRemoteDocument(x,d),x.isValidDocument()&&(x.setReadTime(d.commitVersion),f.addEntry(x)))})}),I.next(()=>c.mutationQueue.removeMutationBatch(u,g))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=re();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function UT(n){let e=G(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function T1(n,e){let t=G(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let c=[];e.targetChanges.forEach((f,g)=>{let y=i.get(g);if(!y)return;c.push(t.Ur.removeMatchingKeys(s,f.removedDocuments,g).next(()=>t.Ur.addMatchingKeys(s,f.addedDocuments,g)));let I=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?I=I.withResumeToken(et.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):f.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(f.resumeToken,r)),i=i.insert(g,I),function(x,R,L){return x.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(y,I,f)&&c.push(t.Ur.updateTargetData(s,I))});let u=Nn(),d=re();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(b1(s,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(Y.min())){let f=t.Ur.getLastRemoteSnapshotVersion(s).next(g=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(f)}return M.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(t.os=i,s))}function b1(n,e,t){let r=re(),i=re();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Nn();return t.forEach((c,u)=>{let d=s.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):k("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function C1(n,e){let t=G(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function S1(n,e){let t=G(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Yo(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Jg(n,e,t){return C(this,null,function*(){let r=G(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!oa(o))throw o;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function YD(n,e,t){let r=G(n),i=Y.min(),s=re();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){let g=G(u),y=g._s.get(f);return y!==void 0?M.resolve(g.os.get(y)):g.Ur.getTargetData(d,f)}(r,o,on(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:Y.min(),t?s:re())).next(c=>(A1(r,Hk(e),c),{documents:c,Ts:s})))}function A1(n,e,t){let r=n.us.get(e)||Y.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var Qu=class{constructor(){this.activeTargetIds=Qk()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Xg=class{constructor(){this.so=new Qu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Qu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var em=class{_o(e){}shutdown(){}};var Yu=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Pu=null;function Wp(){return Pu===null?Pu=function(){return 268435456+Math.round(2147483648*Math.random())}():Pu++,"0x"+Pu.toString(16)}var R1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var tm=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Je="WebChannelConnection",nm=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let c=Wp(),u=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${c}:`,u,i);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(t,u,d,i).then(f=>(k("RestConnection",`Received RPC '${t}' ${c}: `,f),f),f=>{throw Zi("RestConnection",`RPC '${t}' ${c} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(t,r,i,s,o,c){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ds}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=R1[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=Wp();return new Promise((o,c)=>{let u=new Bp;u.setWithCredentials(!0),u.listenOnce($p.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Vo.NO_ERROR:let f=u.getResponseJson();k(Je,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Vo.TIMEOUT:k(Je,`RPC '${e}' ${s} timed out`),c(new V(N.DEADLINE_EXCEEDED,"Request time out"));break;case Vo.HTTP_ERROR:let g=u.getStatus();if(k(Je,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);let I=y?.error;if(I&&I.status&&I.message){let A=function(R){let L=R.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(L)>=0?L:N.UNKNOWN}(I.status);c(new V(A,I.message))}else c(new V(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new V(N.UNAVAILABLE,"Connection failed."));break;default:$()}}finally{k(Je,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);k(Je,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",d,r,15)})}Bo(e,t,r){let i=Wp(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=zp(),c=qp(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let f=s.join("");k(Je,`Creating RPC '${e}' stream ${i}: ${f}`,u);let g=o.createWebChannel(f,u),y=!1,I=!1,A=new tm({Io:R=>{I?k(Je,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(y||(k(Je,`Opening RPC '${e}' stream ${i} transport.`),g.open(),y=!0),k(Je,`RPC '${e}' stream ${i} sending:`,R),g.send(R))},To:()=>g.close()}),x=(R,L,H)=>{R.listen(L,K=>{try{H(K)}catch(fe){setTimeout(()=>{throw fe},0)}})};return x(g,qi.EventType.OPEN,()=>{I||(k(Je,`RPC '${e}' stream ${i} transport opened.`),A.yo())}),x(g,qi.EventType.CLOSE,()=>{I||(I=!0,k(Je,`RPC '${e}' stream ${i} transport closed`),A.So())}),x(g,qi.EventType.ERROR,R=>{I||(I=!0,Zi(Je,`RPC '${e}' stream ${i} transport errored:`,R),A.So(new V(N.UNAVAILABLE,"The operation could not be completed")))}),x(g,qi.EventType.MESSAGE,R=>{var L;if(!I){let H=R.data[0];ve(!!H);let K=H,fe=K.error||((L=K[0])===null||L===void 0?void 0:L.error);if(fe){k(Je,`RPC '${e}' stream ${i} received error:`,fe);let xe=fe.status,X=function(v){let w=Pe[v];if(w!==void 0)return NT(w)}(xe),E=fe.message;X===void 0&&(X=N.INTERNAL,E="Unknown error status: "+xe+" with message "+fe.message),I=!0,A.So(new V(X,E)),g.close()}else k(Je,`RPC '${e}' stream ${i} received:`,H),A.bo(H)}}),x(c,Hp.STAT_EVENT,R=>{R.stat===xu.PROXY?k(Je,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===xu.NOPROXY&&k(Je,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}};function Kp(){return typeof document<"u"?document:null}function yl(n){return new Sg(n,!0)}var Zu=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Ju=class{constructor(e,t,r,i,s,o,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Zu(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return C(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return C(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return C(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(An(t.toString()),An("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new V(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>C(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},rm=class extends Ju{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=l1(this.serializer,e),r=function(s){if(!("targetChange"in s))return Y.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?an(o.readTime):Y.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=xg(this.serializer),t.addTarget=function(s,o){let c,u=o.target;if(c=yg(u)?{documents:f1(s,u)}:{query:p1(s,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=xT(s,o.resumeToken);let d=Ag(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(Y.min())>0){c.readTime=Wu(s,o.snapshotVersion.toTimestamp());let d=Ag(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);let r=m1(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=xg(this.serializer),t.removeTarget=e,this.a_(t)}},im=class extends Ju{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ve(!!e.streamToken),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=h1(e.writeResults,e.commitTime),r=an(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=xg(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>d1(this.serializer,r))};this.a_(t)}};var sm=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new V(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Rg(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(N.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Rg(t,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(N.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},om=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(An(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var am=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>C(this,null,function*(){Kr(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(u){return C(this,null,function*(){let d=G(u);d.L_.add(4),yield aa(d),d.q_.set("Unknown"),d.L_.delete(4),yield vl(d)})}(this))}))}),this.q_=new om(r,i)}};function vl(n){return C(this,null,function*(){if(Kr(n))for(let e of n.B_)yield e(!0)})}function aa(n){return C(this,null,function*(){for(let e of n.B_)yield e(!1)})}function jT(n,e){let t=G(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Fm(t)?Lm(t):hs(t).r_()&&km(t,e))}function Om(n,e){let t=G(n),r=hs(t);t.N_.delete(e),r.r_()&&BT(t,e),t.N_.size===0&&(r.r_()?r.o_():Kr(t)&&t.q_.set("Unknown"))}function km(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}hs(n).A_(e)}function BT(n,e){n.Q_.xe(e),hs(n).R_(e)}function Lm(n){n.Q_=new Cg({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),hs(n).start(),n.q_.v_()}function Fm(n){return Kr(n)&&!hs(n).n_()&&n.N_.size>0}function Kr(n){return G(n).L_.size===0}function $T(n){n.Q_=void 0}function N1(n){return C(this,null,function*(){n.q_.set("Online")})}function x1(n){return C(this,null,function*(){n.N_.forEach((e,t)=>{km(n,e)})})}function M1(n,e){return C(this,null,function*(){$T(n),Fm(n)?(n.q_.M_(e),Lm(n)):n.q_.set("Unknown")})}function P1(n,e,t){return C(this,null,function*(){if(n.q_.set("Online"),e instanceof zu&&e.state===2&&e.cause)try{yield function(i,s){return C(this,null,function*(){let o=s.cause;for(let c of s.targetIds)i.N_.has(c)&&(yield i.remoteSyncer.rejectListen(c,o),i.N_.delete(c),i.Q_.removeTarget(c))})}(n,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Xu(n,r)}else if(e instanceof Qi?n.Q_.Ke(e):e instanceof qu?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Y.min()))try{let r=yield UT(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let c=s.Q_.rt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){let f=s.N_.get(d);f&&s.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{let f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(et.EMPTY_BYTE_STRING,f.snapshotVersion)),BT(s,u);let g=new Yo(f.target,u,d,f.sequenceNumber);km(s,g)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield Xu(n,r)}})}function Xu(n,e,t){return C(this,null,function*(){if(!oa(e))throw e;n.L_.add(1),yield aa(n),n.q_.set("Offline"),t||(t=()=>UT(n.localStore)),n.asyncQueue.enqueueRetryable(()=>C(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield vl(n)}))})}function HT(n,e){return e().catch(t=>Xu(n,t,e))}function _l(n){return C(this,null,function*(){let e=G(n),t=or(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;O1(e);)try{let i=yield C1(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,k1(e,i)}catch(i){yield Xu(e,i)}qT(e)&&zT(e)})}function O1(n){return Kr(n)&&n.O_.length<10}function k1(n,e){n.O_.push(e);let t=or(n);t.r_()&&t.V_&&t.m_(e.mutations)}function qT(n){return Kr(n)&&!or(n).n_()&&n.O_.length>0}function zT(n){or(n).start()}function L1(n){return C(this,null,function*(){or(n).p_()})}function F1(n){return C(this,null,function*(){let e=or(n);for(let t of n.O_)e.m_(t.mutations)})}function V1(n,e,t){return C(this,null,function*(){let r=n.O_.shift(),i=Eg.from(r,e,t);yield HT(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield _l(n)})}function U1(n,e){return C(this,null,function*(){e&&or(n).V_&&(yield function(r,i){return C(this,null,function*(){if(function(o){return n1(o)&&o!==N.ABORTED}(i.code)){let s=r.O_.shift();or(r).s_(),yield HT(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield _l(r)}})}(n,e)),qT(n)&&zT(n)})}function ZD(n,e){return C(this,null,function*(){let t=G(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=Kr(t);t.L_.add(3),yield aa(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield vl(t)})}function j1(n,e){return C(this,null,function*(){let t=G(n);e?(t.L_.delete(2),yield vl(t)):e||(t.L_.add(2),yield aa(t),t.q_.set("Unknown"))})}function hs(n){return n.K_||(n.K_=function(t,r,i){let s=G(t);return s.w_(),new rm(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:N1.bind(null,n),Ro:x1.bind(null,n),mo:M1.bind(null,n),d_:P1.bind(null,n)}),n.B_.push(e=>C(this,null,function*(){e?(n.K_.s_(),Fm(n)?Lm(n):n.q_.set("Unknown")):(yield n.K_.stop(),$T(n))}))),n.K_}function or(n){return n.U_||(n.U_=function(t,r,i){let s=G(t);return s.w_(),new im(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:L1.bind(null,n),mo:U1.bind(null,n),f_:F1.bind(null,n),g_:V1.bind(null,n)}),n.B_.push(e=>C(this,null,function*(){e?(n.U_.s_(),yield _l(n)):(yield n.U_.stop(),n.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var cm=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,c=new n(e,t,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Vm(n,e){if(An("AsyncQueue",`${e}: ${n}`),oa(n))return new V(N.UNAVAILABLE,`${e}: ${n}`);throw n}var el=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||j.comparator(t.key,r.key):(t,r)=>j.comparator(t.key,r.key),this.keyedMap=jo(),this.sortedSet=new Ne(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var tl=class{constructor(){this.W_=new Ne(j.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):$():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},cs=class n{constructor(e,t,r,i,s,o,c,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new n(e,t,el.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var um=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},lm=class{constructor(){this.queries=JD(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=G(t),s=i.queries;i.queries=JD(),s.forEach((o,c)=>{for(let u of c.j_)u.onError(r)})})(this,new V(N.ABORTED,"Firestore shutting down"))}};function JD(){return new sr(n=>vT(n),gl)}function GT(n,e){return C(this,null,function*(){let t=G(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new um,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let c=Vm(o,`Initialization of query '${zi(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&Um(t)})}function WT(n,e){return C(this,null,function*(){let t=G(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function B1(n,e){let t=G(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let c of o.j_)c.X_(i)&&(r=!0);o.z_=i}}r&&Um(t)}function $1(n,e,t){let r=G(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function Um(n){n.Y_.forEach(e=>{e.next()})}var dm,XD;(XD=dm||(dm={})).ea="default",XD.Cache="cache";var nl=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new cs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=cs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==dm.Cache}};var rl=class{constructor(e){this.key=e}},il=class{constructor(e){this.key=e}},hm=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=re(),this.mutatedKeys=re(),this.Aa=_T(e),this.Ra=new el(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new tl,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,g)=>{let y=i.get(f),I=ml(this.query,g)?g:null,A=!!y&&this.mutatedKeys.has(y.key),x=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations),R=!1;y&&I?y.data.isEqual(I.data)?A!==x&&(r.track({type:3,doc:I}),R=!0):this.ga(y,I)||(r.track({type:2,doc:I}),R=!0,(u&&this.Aa(I,u)>0||d&&this.Aa(I,d)<0)&&(c=!0)):!y&&I?(r.track({type:0,doc:I}),R=!0):y&&!I&&(r.track({type:1,doc:y}),R=!0,(u||d)&&(c=!0)),R&&(I?(o=o.add(I),s=x?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:c,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((f,g)=>function(I,A){let x=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $()}};return x(I)-x(A)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(r),i=i!=null&&i;let c=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new cs(this.query,e.Ra,s,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new tl,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=re(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new il(r))}),this.da.forEach(r=>{e.has(r)||t.push(new rl(r))}),t}ba(e){this.Ta=e.Ts,this.da=re();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return cs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},fm=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},pm=class{constructor(e){this.key=e,this.va=!1}},gm=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new sr(c=>vT(c),gl),this.Ma=new Map,this.xa=new Set,this.Oa=new Ne(j.comparator),this.Na=new Map,this.La=new Jo,this.Ba={},this.ka=new Map,this.qa=Zo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function H1(n,e,t=!0){return C(this,null,function*(){let r=XT(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield KT(r,e,t,!0),i})}function q1(n,e){return C(this,null,function*(){let t=XT(n);yield KT(t,e,!0,!1)})}function KT(n,e,t,r){return C(this,null,function*(){let i=yield S1(n.localStore,on(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),c;return r&&(c=yield z1(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&jT(n.remoteStore,i),c})}function z1(n,e,t,r,i){return C(this,null,function*(){n.Ka=(g,y,I)=>function(x,R,L,H){return C(this,null,function*(){let K=R.view.ma(L);K.ns&&(K=yield YD(x.localStore,R.query,!1).then(({documents:E})=>R.view.ma(E,K)));let fe=H&&H.targetChanges.get(R.targetId),xe=H&&H.targetMismatches.get(R.targetId)!=null,X=R.view.applyChanges(K,x.isPrimaryClient,fe,xe);return tT(x,R.targetId,X.wa),X.snapshot})}(n,g,y,I);let s=yield YD(n.localStore,e,!0),o=new hm(e,s.Ts),c=o.ma(s.documents),u=Qo.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(c,n.isPrimaryClient,u);tT(n,t,d.wa);let f=new fm(e,t,o);return n.Fa.set(e,f),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot})}function G1(n,e,t){return C(this,null,function*(){let r=G(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!gl(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Jg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Om(r.remoteStore,i.targetId),mm(r,i.targetId)}).catch(sa))):(mm(r,i.targetId),yield Jg(r.localStore,i.targetId,!0))})}function W1(n,e){return C(this,null,function*(){let t=G(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Om(t.remoteStore,r.targetId))})}function K1(n,e,t){return C(this,null,function*(){let r=tL(n);try{let i=yield function(o,c){let u=G(o),d=We.now(),f=c.reduce((I,A)=>I.add(A.key),re()),g,y;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let A=Nn(),x=re();return u.cs.getEntries(I,f).next(R=>{A=R,A.forEach((L,H)=>{H.isValidDocument()||(x=x.add(L))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,A)).next(R=>{g=R;let L=[];for(let H of c){let K=t1(H,g.get(H.key).overlayedDocument);K!=null&&L.push(new dn(H.key,K,hT(K.value.mapValue),Sn.exists(!0)))}return u.mutationQueue.addMutationBatch(I,d,L,c)}).next(R=>{y=R;let L=R.applyToLocalDocumentSet(g,x);return u.documentOverlayCache.saveOverlays(I,R.batchId,L)})}).then(()=>({batchId:y.batchId,changes:wT(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Ne(de)),d=d.insert(c,u),o.Ba[o.currentUser.toKey()]=d}(r,i.batchId,t),yield ca(r,i.changes),yield _l(r.remoteStore)}catch(i){let s=Vm(i,"Failed to persist write");t.reject(s)}})}function QT(n,e){return C(this,null,function*(){let t=G(n);try{let r=yield T1(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ve(o.va):i.removedDocuments.size>0&&(ve(o.va),o.va=!1))}),yield ca(t,r,e)}catch(r){yield sa(r)}})}function eT(n,e,t){let r=G(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let c=o.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){let u=G(o);u.onlineState=c;let d=!1;u.queries.forEach((f,g)=>{for(let y of g.j_)y.Z_(c)&&(d=!0)}),d&&Um(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Q1(n,e,t){return C(this,null,function*(){let r=G(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ne(j.comparator);o=o.insert(s,qt.newNoDocument(s,Y.min()));let c=re().add(s),u=new Hu(Y.min(),new Map,new Ne(de),o,c);yield QT(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),jm(r)}else yield Jg(r.localStore,e,!1).then(()=>mm(r,e,t)).catch(sa)})}function Y1(n,e){return C(this,null,function*(){let t=G(n),r=e.batch.batchId;try{let i=yield D1(t.localStore,e);ZT(t,r,null),YT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ca(t,i)}catch(i){yield sa(i)}})}function Z1(n,e,t){return C(this,null,function*(){let r=G(n);try{let i=yield function(o,c){let u=G(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(g=>(ve(g!==null),f=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);ZT(r,e,t),YT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ca(r,i)}catch(i){yield sa(i)}})}function YT(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function ZT(n,e,t){let r=G(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function mm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||JT(n,r)})}function JT(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Om(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),jm(n))}function tT(n,e,t){for(let r of t)r instanceof rl?(n.La.addReference(r.key,e),J1(n,r)):r instanceof il?(k("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||JT(n,r.key)):$()}function J1(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(k("SyncEngine","New document in limbo: "+t),n.xa.add(r),jm(n))}function jm(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new j(Re.fromString(e)),r=n.qa.next();n.Na.set(r,new pm(t)),n.Oa=n.Oa.insert(t,r),jT(n.remoteStore,new Yo(on(xm(t.path)),r,"TargetPurposeLimboResolution",cT.oe))}}function ca(n,e,t){return C(this,null,function*(){let r=G(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,t).then(d=>{var f;if((d||t)&&r.isPrimaryClient){let g=d?!d.fromCache:(f=t?.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(d){i.push(d);let g=Kg.Wi(u.targetId,d);s.push(g)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,d){return C(this,null,function*(){let f=G(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>M.forEach(d,y=>M.forEach(y.$i,I=>f.persistence.referenceDelegate.addReference(g,y.targetId,I)).next(()=>M.forEach(y.Ui,I=>f.persistence.referenceDelegate.removeReference(g,y.targetId,I)))))}catch(g){if(!oa(g))throw g;k("LocalStore","Failed to update sequence numbers: "+g)}for(let g of d){let y=g.targetId;if(!g.fromCache){let I=f.os.get(y),A=I.snapshotVersion,x=I.withLastLimboFreeSnapshotVersion(A);f.os=f.os.insert(y,x)}}})}(r.localStore,s))})}function X1(n,e){return C(this,null,function*(){let t=G(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield VT(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(c=>{c.forEach(u=>{u.reject(new V(N.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ca(t,r.hs)}})}function eL(n,e){let t=G(n),r=t.Na.get(e);if(r&&r.va)return re().add(r.key);{let i=re(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let c=t.Fa.get(o);i=i.unionWith(c.view.Va)}return i}}function XT(n){let e=G(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=QT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Q1.bind(null,e),e.Ca.d_=B1.bind(null,e.eventManager),e.Ca.$a=$1.bind(null,e.eventManager),e}function tL(n){let e=G(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Y1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Z1.bind(null,e),e}var nT=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return C(this,null,function*(){this.serializer=yl(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return E1(this.persistence,new Yg,t.initialUser,this.serializer)}Ga(t){return new zg(Wg.Zr,this.serializer)}Wa(t){return new Xg}terminate(){return C(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var nL=(()=>{class n{initialize(t,r){return C(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>eT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=X1.bind(null,this.syncEngine),yield j1(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new lm}()}createDatastore(t){let r=yl(t.databaseInfo.databaseId),i=function(o){return new nm(o)}(t.databaseInfo);return function(o,c,u,d){return new sm(o,c,u,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,c,u){return new am(i,s,o,c,u)}(this.localStore,this.datastore,t.asyncQueue,r=>eT(this.syncEngine,r,0),function(){return Yu.D()?new Yu:new em}())}createSyncEngine(t,r){return function(s,o,c,u,d,f,g){let y=new gm(s,o,c,u,d,f);return g&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return C(this,null,function*(){var t,r;yield function(s){return C(this,null,function*(){let o=G(s);k("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield aa(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var sl=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):An("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var ym=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=He.UNAUTHENTICATED,this.clientId=Fu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>C(this,null,function*(){k("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(k("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>C(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Vm(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Qp(n,e){return C(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>C(this,null,function*(){r.isEqual(i)||(yield VT(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function rT(n,e){return C(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield rL(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>ZD(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>ZD(e.remoteStore,i)),n._onlineComponents=e})}function rL(n){return C(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Qp(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Zi("Error using user provided cache. Falling back to memory cache: "+t),yield Qp(n,new nT)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield Qp(n,new nT);return n._offlineComponents})}function eb(n){return C(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield rT(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield rT(n,new nL))),n._onlineComponents})}function iL(n){return eb(n).then(e=>e.syncEngine)}function vm(n){return C(this,null,function*(){let e=yield eb(n),t=e.eventManager;return t.onListen=H1.bind(null,e.syncEngine),t.onUnlisten=G1.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=q1.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=W1.bind(null,e.syncEngine),t})}function sL(n,e,t={}){let r=new rn;return n.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return function(s,o,c,u,d){let f=new sl({next:y=>{f.Za(),o.enqueueAndForget(()=>WT(s,g)),y.fromCache&&u.source==="server"?d.reject(new V(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(y)},error:y=>d.reject(y)}),g=new nl(c,f,{includeMetadataChanges:!0,_a:!0});return GT(s,g)}(yield vm(n),n.asyncQueue,e,t,r)})),r.promise}function tb(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var iT=new Map;function nb(n,e,t){if(!t)throw new V(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function oL(n,e,t,r){if(e===!0&&r===!0)throw new V(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function sT(n){if(!j.isDocumentKey(n))throw new V(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function oT(n){if(j.isDocumentKey(n))throw new V(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Bm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":$()}function cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new V(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Bm(n);throw new V(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var ol=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new V(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new V(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new V(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new V(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new V(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},us=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ol({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new V(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new V(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ol(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Yp;switch(r.type){case"firstParty":return new eg(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return C(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=iT.get(t);r&&(k("ComponentProvider","Removing Datastore"),iT.delete(t),r.terminate())}(this),Promise.resolve()}};function rb(n,e,t,r={}){var i;let s=(n=cn(n,us))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Zi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=He.MOCK_USER;else{c=jE(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new V(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new He(d)}n._authCredentials=new Zp(new Lu(c,u))}}var Xo=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},wt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},rr=class n extends Xo{constructor(e,t,r){super(e,t,xm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new j(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function ib(n,e,...t){if(n=at(n),nb("collection","path",e),n instanceof us){let r=Re.fromString(e,...t);return oT(r),new rr(n,null,r)}{if(!(n instanceof wt||n instanceof rr))throw new V(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Re.fromString(e,...t));return oT(r),new rr(n.firestore,null,r)}}function $m(n,e,...t){if(n=at(n),arguments.length===1&&(e=Fu.newId()),nb("doc","path",e),n instanceof us){let r=Re.fromString(e,...t);return sT(r),new wt(n,null,new j(r))}{if(!(n instanceof wt||n instanceof rr))throw new V(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Re.fromString(e,...t));return sT(r),new wt(n.firestore,n instanceof rr?n.converter:null,new j(r))}}var al=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Zu(this,"async_queue_retry"),this.Vu=()=>{let r=Kp();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Kp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Kp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new rn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return C(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!oa(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw An("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=cm.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&$()}verifyOperationInProgress(){}wu(){return C(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function aT(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var xn=class extends us{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new al,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return C(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new al(e),this._firestoreClient=void 0,yield e}})}};function sb(n,e){let t=typeof n=="object"?n:Ao(),r=typeof n=="string"?n:e||"(default)",i=wp(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=VE("firestore");s&&rb(i,...s)}return i}function Hm(n){if(n._terminated)throw new V(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||aL(n),n._firestoreClient}function aL(n){var e,t,r;let i=n._freezeSettings(),s=function(c,u,d,f){return new sg(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,tb(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new ym(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}}(n._componentsProvider))}var ea=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(et.fromBase64String(e))}catch(t){throw new V(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ls=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new V(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new It(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ta=class{constructor(e){this._methodName=e}};var na=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new V(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new V(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}};var ra=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var cL=/^__.*__$/,_m=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new dn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gr(e,this.data,t,this.fieldTransforms)}},cl=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new dn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function ob(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $()}}var Im=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ll(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(ob(this.Cu)&&cL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},wm=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||yl(e)}Qu(e,t,r,i=!1){return new Im({Cu:e,methodName:t,qu:r,path:It.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ab(n){let e=n._freezeSettings(),t=yl(n._databaseId);return new wm(n._databaseId,!!e.ignoreUndefinedProperties,t)}function uL(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);qm("Data must be an object, but it was:",o,r);let c=cb(r,o),u,d;if(s.merge)u=new Ot(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let f=[];for(let g of s.mergeFields){let y=Em(e,g,t);if(!o.contains(y))throw new V(N.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);lb(f,y)||f.push(y)}u=new Ot(f),d=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=o.fieldTransforms;return new _m(new _t(c),u,d)}var ul=class n extends ta{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function lL(n,e,t,r){let i=n.Qu(1,e,t);qm("Data must be an object, but it was:",i,r);let s=[],o=_t.empty();Wr(r,(u,d)=>{let f=zm(e,u,t);d=at(d);let g=i.Nu(f);if(d instanceof ul)s.push(f);else{let y=Il(d,g);y!=null&&(s.push(f),o.set(f,y))}});let c=new Ot(s);return new cl(o,c,i.fieldTransforms)}function dL(n,e,t,r,i,s){let o=n.Qu(1,e,t),c=[Em(e,r,t)],u=[i];if(s.length%2!=0)throw new V(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)c.push(Em(e,s[y])),u.push(s[y+1]);let d=[],f=_t.empty();for(let y=c.length-1;y>=0;--y)if(!lb(d,c[y])){let I=c[y],A=u[y];A=at(A);let x=o.Nu(I);if(A instanceof ul)d.push(I);else{let R=Il(A,x);R!=null&&(d.push(I),f.set(I,R))}}let g=new Ot(d);return new cl(f,g,o.fieldTransforms)}function Il(n,e){if(ub(n=at(n)))return qm("Unsupported field value:",e,n),cb(n,e);if(n instanceof ta)return function(r,i){if(!ob(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let c of r){let u=Il(c,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=at(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Yk(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=We.fromDate(r);return{timestampValue:Wu(i.serializer,s)}}if(r instanceof We){let s=new We(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wu(i.serializer,s)}}if(r instanceof na)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ea)return{bytesValue:xT(i.serializer,r._byteString)};if(r instanceof wt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Pm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ra)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return Mm(c.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Bm(r)}`)}(n,e)}function cb(n,e){let t={};return uT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wr(n,(r,i)=>{let s=Il(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function ub(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof We||n instanceof na||n instanceof ea||n instanceof wt||n instanceof ta||n instanceof ra)}function qm(n,e,t){if(!ub(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Bm(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Em(n,e,t){if((e=at(e))instanceof ls)return e._internalPath;if(typeof e=="string")return zm(n,e);throw ll("Field path arguments must be of type string or ",n,!1,void 0,t)}var hL=new RegExp("[~\\*/\\[\\]]");function zm(n,e,t){if(e.search(hL)>=0)throw ll(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ls(...e.split("."))._internalPath}catch{throw ll(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ll(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new V(N.INVALID_ARGUMENT,c+n+u)}function lb(n,e){return n.some(t=>t.isEqual(e))}var dl=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Dm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(db("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Dm=class extends dl{data(){return super.data()}};function db(n,e){return typeof e=="string"?zm(n,e):e instanceof ls?e._internalPath:e._delegate._internalPath}function hb(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new V(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Tm=class{convertValue(e,t="none"){switch(Hr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ir(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw $()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Wr(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>be(o.doubleValue));return new ra(s)}convertGeoPoint(e){return new na(be(e.latitude),be(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Sm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Go(e));default:return null}}convertTimestamp(e){let t=Rn(e);return new We(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Re.fromString(e);ve(FT(r));let i=new Bu(r.get(1),r.get(3)),s=new j(r.popFirst(5));return i.isEqual(t)||An(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function fL(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var jr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},hl=class extends dl{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Yi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(db("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Yi=class extends hl{data(e={}){return super.data(e)}},fl=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new jr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Yi(this._firestore,this._userDataWriter,r.key,r,new jr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new V(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{let u=new Yi(i._firestore,i._userDataWriter,c.doc.key,c.doc,new jr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let u=new Yi(i._firestore,i._userDataWriter,c.doc.key,c.doc,new jr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:pL(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function pL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $()}}var ia=class extends Tm{constructor(e){super(),this.firestore=e}convertBytes(e){return new ea(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,t)}};function fb(n){n=cn(n,Xo);let e=cn(n.firestore,xn),t=Hm(e),r=new ia(e);return hb(n._query),sL(t,n._query).then(i=>new fl(e,r,n,i))}function pb(n,e,t,...r){n=cn(n,wt);let i=cn(n.firestore,xn),s=ab(i),o;return o=typeof(e=at(e))=="string"||e instanceof ls?dL(s,"updateDoc",n._key,e,t,r):lL(s,"updateDoc",n._key,e),Wm(i,[o.toMutation(n._key,Sn.exists(!0))])}function gb(n){return Wm(cn(n.firestore,xn),[new Ko(n._key,Sn.none())])}function mb(n,e){let t=cn(n.firestore,xn),r=$m(n),i=fL(n.converter,e);return Wm(t,[uL(ab(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Sn.exists(!1))]).then(()=>r)}function Gm(n,...e){var t,r,i;n=at(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||aT(e[o])||(s=e[o],o++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(aT(e[o])){let g=e[o];e[o]=(t=g.next)===null||t===void 0?void 0:t.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let u,d,f;if(n instanceof wt)d=cn(n.firestore,xn),f=xm(n._key.path),u={next:g=>{e[o]&&e[o](gL(d,n,g))},error:e[o+1],complete:e[o+2]};else{let g=cn(n,Xo);d=cn(g.firestore,xn),f=g._query;let y=new ia(d);u={next:I=>{e[o]&&e[o](new fl(d,y,g,I))},error:e[o+1],complete:e[o+2]},hb(n._query)}return function(y,I,A,x){let R=new sl(x),L=new nl(I,R,A);return y.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return GT(yield vm(y),L)})),()=>{R.Za(),y.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return WT(yield vm(y),L)}))}}(Hm(d),f,c,u)}function Wm(n,e){return function(r,i){let s=new rn;return r.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return K1(yield iL(r),i,s)})),s.promise}(Hm(n),e)}function gL(n,e,t){let r=t.docs.get(e._key),i=new ia(n);return new hl(n,i,e._key,r,new jr(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){ds=i})(Bi),er(new Mt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),c=new xn(new Jp(r.getProvider("auth-internal")),new ng(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new V(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bu(d.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),$e(ND,"4.7.3",e),$e(ND,"4.7.3","esm2017")})();var wl=function(){return wl=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},wl.apply(this,arguments)};var vL={includeMetadataChanges:!1};function yb(n,e){return e===void 0&&(e=vL),new se(function(t){var r=Gm(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function vb(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:wl(wl({},r),(t={},t[e.idField]=n.id,t))}function _b(n){return yb(n,{includeMetadataChanges:!0}).pipe(te(function(e){return e.docs}))}function Ib(n,e){return e===void 0&&(e={}),_b(n).pipe(te(function(t){return t.map(function(r){return vb(r,e)})}))}var zt=class{constructor(e){return e}},wb="firestore",Km=class{constructor(){return No(wb)}};var Qm=new z("angularfire2.firestore-instances");function _L(n,e){let t=Tp(wb,n,e);return t&&new zt(t)}function IL(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new zt(r)}}var wL={provide:Km,deps:[[new Bt,Qm]]},EL={provide:zt,useFactory:_L,deps:[[new Bt,Qm],kr]};function Eb(n,...e){return $e("angularfire",Hi.full,"fst"),Qn([EL,wL,{provide:Qm,useFactory:IL(n),multi:!0,deps:[we,jt,xo,Mo,[new Bt,Ru],[new Bt,Ro],...e]}])}var El=Pt(Ib,!0);var Dl=Pt(mb,!0);var ar=Pt(ib,!0);var Tl=Pt(gb,!0);var fs=Pt($m,!0);var Db=Pt(fb,!0);var Tb=Pt(sb,!0);var bl=Pt(pb,!0);var bb={providers:[Jf(Xf),cD(()=>uD({apiKey:"AIzaSyDQiu2zW9iGIWQ1ecsqyCnbx5_Kb5fdh8s",authDomain:"my-cv-8d48f.firebaseapp.com",projectId:"my-cv-8d48f",storageBucket:"my-cv-8d48f.firebasestorage.app",messagingSenderId:"1021445641929",appId:"1:1021445641929:web:6f8bc7c832f46a3d295f18"})),Eb(()=>Tb()),Aw({eventCoalescing:!0}),Jf(Xf)]};var Cl=class{constructor(){this.name="name",this.goalLife="goal",this.photoUrl="photo",this.email="email@domain.com",this.phoneNumber="999-999-9999",this.location="city, country",this.socialNetwork="@facebook"}};var Cb=(()=>{class n{constructor(t){this.firestore=t,this.accesoHeader="header service running...",this.dbPath="header"}getHeader(){let t=ar(this.firestore,this.dbPath);return El(t,{idField:"id"})}addHeader(t){let r=ar(this.firestore,this.dbPath);return Dl(r,t)}updateHeader(t,r){let i=fs(this.firestore,`${this.dbPath}/${t}`);return bl(i,r)}deleteHeader(t){let r=fs(this.firestore,`${this.dbPath}/${t}`);return Tl(r)}static{this.\u0275fac=function(r){return new(r||n)(Z(zt))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Sb=(()=>{class n{constructor(t){this.headerService=t,this.header=new Cl,console.log(this.headerService),this.headerService.getHeader().subscribe(r=>{r&&r.length>0?(this.header=r[0],console.log("Header recibido:",this.header)):console.warn("No se encontr\xF3 ning\xFAn header en Firestore")})}static{this.\u0275fac=function(r){return new(r||n)(At(Cb))}}static{this.\u0275cmp=je({type:n,selectors:[["app-header"]],standalone:!0,features:[Be],decls:16,vars:7,consts:[["width","200","height","200",3,"src"]],template:function(r,i){r&1&&(me(0,"table")(1,"tr")(2,"td"),Te(3),Ce(4,"br"),Te(5),ye(),me(6,"td"),Ce(7,"img",0),ye(),me(8,"td"),Te(9),Ce(10,"br"),Te(11),Ce(12,"br"),Te(13),Ce(14,"br"),Te(15),ye()()()),r&2&&(ot(3),gt(" ",i.header.name," "),ot(2),gt(" ",i.header.goalLife," "),ot(2),Zh("src",i.header.photoUrl,FI),ot(2),gt(" ",i.header.email,""),ot(2),gt(" ",i.header.phoneNumber,""),ot(2),gt(" ",i.header.location,""),ot(2),gt(" ",i.header.socialNetwork," "))}})}}return n})();var Ab=(()=>{class n{constructor(t){this.firestore=t,this.accesoWorkExperience="work experience running...",this.dbPath="work-experience"}getWorkExperience(){let t=ar(this.firestore,this.dbPath);return El(t,{idField:"id"})}addWorkExperience(t){let r=ar(this.firestore,this.dbPath);return Dl(r,t)}updateWorkExperience(t,r){let i=fs(this.firestore,`${this.dbPath}/${t}`);return bl(i,r)}deleteWorkExperience(t){let r=fs(this.firestore,`${this.dbPath}/${t}`);return Tl(r)}static{this.\u0275fac=function(r){return new(r||n)(Z(zt))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function bL(n,e){if(n&1&&(me(0,"li"),Te(1),me(2,"i"),Te(3),ye(),Ce(4,"br"),me(5,"b"),Te(6),ye(),Ce(7,"br"),Te(8),Ce(9,"br"),Te(10," Logros: "),Ce(11,"br"),Te(12),Ce(13,"br"),ye()),n&2){let t=e.$implicit;ot(),Jh(" ",t.startDate," - ",t.endDate," "),ot(2),gt("",t.location," "),ot(3),gt(" ",t.position," "),ot(2),gt(" ",t.company," "),ot(4),gt(" ",t.accomplishments," ")}}var Rb=(()=>{class n{constructor(t){this.workExperienceService=t,this.workExperience=[],this.workExperienceService.getWorkExperience().subscribe(r=>{r&&r.length>0?(this.workExperience=r,console.log("Workexperience recibido:",this.workExperience)):console.warn("No se encontr\xF3 ning\xFAn workexperience en Firestore")})}static{this.\u0275fac=function(r){return new(r||n)(At(Ab))}}static{this.\u0275cmp=je({type:n,selectors:[["app-work-experience"]],standalone:!0,features:[Be],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(me(0,"ul"),Qh(1,bL,14,6,"li",0),ye()),r&2&&(ot(),Yh("ngForOf",i.workExperience))},dependencies:[sf,Bw]})}}return n})();var Nb=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=je({type:n,selectors:[["app-education"]],standalone:!0,features:[Be],decls:2,vars:0,template:function(r,i){r&1&&(me(0,"p"),Te(1,"education works!"),ye())}})}}return n})();var xb=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=je({type:n,selectors:[["app-certificates"]],standalone:!0,features:[Be],decls:2,vars:0,template:function(r,i){r&1&&(me(0,"p"),Te(1,"certificates works!"),ye())}})}}return n})();var Mb=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=je({type:n,selectors:[["app-skills"]],standalone:!0,features:[Be],decls:2,vars:0,template:function(r,i){r&1&&(me(0,"p"),Te(1,"skills works!"),ye())}})}}return n})();var Pb=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=je({type:n,selectors:[["app-languages"]],standalone:!0,features:[Be],decls:2,vars:0,template:function(r,i){r&1&&(me(0,"p"),Te(1,"languages works!"),ye())}})}}return n})();var Ob=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=je({type:n,selectors:[["app-interests"]],standalone:!0,features:[Be],decls:2,vars:0,template:function(r,i){r&1&&(me(0,"p"),Te(1,"interests works!"),ye())}})}}return n})();var kb=(()=>{class n{constructor(t){this.firestore=t,this.title="mycv"}ngOnInit(){return C(this,null,function*(){(yield Db(ar(this.firestore,"test"))).forEach(r=>{console.log(`${r.id} =>`,r.data())})})}static{this.\u0275fac=function(r){return new(r||n)(At(zt))}}static{this.\u0275cmp=je({type:n,selectors:[["app-root"]],standalone:!0,features:[Be],decls:19,vars:0,consts:[["border","1"],["colspan","2"]],template:function(r,i){r&1&&(me(0,"table",0)(1,"tr")(2,"td",1),Ce(3,"app-header"),ye()(),me(4,"tr")(5,"td"),Ce(6,"app-work-experience"),ye(),me(7,"td"),Ce(8,"app-skills"),ye()(),me(9,"tr")(10,"td"),Ce(11,"app-education"),ye(),me(12,"td"),Ce(13,"app-certificates"),ye()(),me(14,"tr")(15,"td"),Ce(16,"app-languages"),ye(),me(17,"td"),Ce(18,"app-interests"),ye()()())},dependencies:[Sb,Rb,Nb,xb,Mb,Pb,Ob]})}}return n})();Yw(kb,bb).catch(n=>console.error(n));
